function j_(i,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const l in r)if(l!=="default"&&!(l in i)){const c=Object.getOwnPropertyDescriptor(r,l);c&&Object.defineProperty(i,l,c.get?c:{enumerable:!0,get:()=>r[l]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(l){if(l.ep)return;l.ep=!0;const c=n(l);fetch(l.href,c)}})();function Sf(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function O_(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var e=i.default;if(typeof e=="function"){var n=function r(){var l=!1;try{l=this instanceof r}catch{}return l?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(r){var l=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(n,r,l.get?l:{enumerable:!0,get:function(){return i[r]}})}),n}var uh={exports:{}},gl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gy;function L_(){if(Gy)return gl;Gy=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,l,c){var u=null;if(c!==void 0&&(u=""+c),l.key!==void 0&&(u=""+l.key),"key"in l){c={};for(var h in l)h!=="key"&&(c[h]=l[h])}else c=l;return l=c.ref,{$$typeof:i,type:r,key:u,ref:l!==void 0?l:null,props:c}}return gl.Fragment=e,gl.jsx=n,gl.jsxs=n,gl}var Vy;function k_(){return Vy||(Vy=1,uh.exports=L_()),uh.exports}var b=k_(),dh={exports:{}},he={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function N_(){if(Qy)return he;Qy=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.iterator;function w(T){return T===null||typeof T!="object"?null:(T=y&&T[y]||T["@@iterator"],typeof T=="function"?T:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,x={};function A(T,B,V){this.props=T,this.context=B,this.refs=x,this.updater=V||_}A.prototype.isReactComponent={},A.prototype.setState=function(T,B){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,B,"setState")},A.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function U(){}U.prototype=A.prototype;function z(T,B,V){this.props=T,this.context=B,this.refs=x,this.updater=V||_}var $=z.prototype=new U;$.constructor=z,C($,A.prototype),$.isPureReactComponent=!0;var H=Array.isArray,j={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function F(T,B,V,Y,J,ue){return V=ue.ref,{$$typeof:i,type:T,key:B,ref:V!==void 0?V:null,props:ue}}function W(T,B){return F(T.type,B,void 0,void 0,void 0,T.props)}function fe(T){return typeof T=="object"&&T!==null&&T.$$typeof===i}function ee(T){var B={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(V){return B[V]})}var ae=/\/+/g;function me(T,B){return typeof T=="object"&&T!==null&&T.key!=null?ee(""+T.key):B.toString(36)}function Le(){}function Xe(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(Le,Le):(T.status="pending",T.then(function(B){T.status==="pending"&&(T.status="fulfilled",T.value=B)},function(B){T.status==="pending"&&(T.status="rejected",T.reason=B)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function Ie(T,B,V,Y,J){var ue=typeof T;(ue==="undefined"||ue==="boolean")&&(T=null);var te=!1;if(T===null)te=!0;else switch(ue){case"bigint":case"string":case"number":te=!0;break;case"object":switch(T.$$typeof){case i:case e:te=!0;break;case p:return te=T._init,Ie(te(T._payload),B,V,Y,J)}}if(te)return J=J(T),te=Y===""?"."+me(T,0):Y,H(J)?(V="",te!=null&&(V=te.replace(ae,"$&/")+"/"),Ie(J,B,V,"",function(st){return st})):J!=null&&(fe(J)&&(J=W(J,V+(J.key==null||T&&T.key===J.key?"":(""+J.key).replace(ae,"$&/")+"/")+te)),B.push(J)),1;te=0;var nt=Y===""?".":Y+":";if(H(T))for(var Se=0;Se<T.length;Se++)Y=T[Se],ue=nt+me(Y,Se),te+=Ie(Y,B,V,ue,J);else if(Se=w(T),typeof Se=="function")for(T=Se.call(T),Se=0;!(Y=T.next()).done;)Y=Y.value,ue=nt+me(Y,Se++),te+=Ie(Y,B,V,ue,J);else if(ue==="object"){if(typeof T.then=="function")return Ie(Xe(T),B,V,Y,J);throw B=String(T),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return te}function I(T,B,V){if(T==null)return T;var Y=[],J=0;return Ie(T,Y,"","",function(ue){return B.call(V,ue,J++)}),Y}function K(T){if(T._status===-1){var B=T._result;B=B(),B.then(function(V){(T._status===0||T._status===-1)&&(T._status=1,T._result=V)},function(V){(T._status===0||T._status===-1)&&(T._status=2,T._result=V)}),T._status===-1&&(T._status=0,T._result=B)}if(T._status===1)return T._result.default;throw T._result}var se=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function X(){}return he.Children={map:I,forEach:function(T,B,V){I(T,function(){B.apply(this,arguments)},V)},count:function(T){var B=0;return I(T,function(){B++}),B},toArray:function(T){return I(T,function(B){return B})||[]},only:function(T){if(!fe(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},he.Component=A,he.Fragment=n,he.Profiler=l,he.PureComponent=z,he.StrictMode=r,he.Suspense=g,he.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,he.__COMPILER_RUNTIME={__proto__:null,c:function(T){return j.H.useMemoCache(T)}},he.cache=function(T){return function(){return T.apply(null,arguments)}},he.cloneElement=function(T,B,V){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var Y=C({},T.props),J=T.key,ue=void 0;if(B!=null)for(te in B.ref!==void 0&&(ue=void 0),B.key!==void 0&&(J=""+B.key),B)!P.call(B,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&B.ref===void 0||(Y[te]=B[te]);var te=arguments.length-2;if(te===1)Y.children=V;else if(1<te){for(var nt=Array(te),Se=0;Se<te;Se++)nt[Se]=arguments[Se+2];Y.children=nt}return F(T.type,J,void 0,void 0,ue,Y)},he.createContext=function(T){return T={$$typeof:u,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:c,_context:T},T},he.createElement=function(T,B,V){var Y,J={},ue=null;if(B!=null)for(Y in B.key!==void 0&&(ue=""+B.key),B)P.call(B,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(J[Y]=B[Y]);var te=arguments.length-2;if(te===1)J.children=V;else if(1<te){for(var nt=Array(te),Se=0;Se<te;Se++)nt[Se]=arguments[Se+2];J.children=nt}if(T&&T.defaultProps)for(Y in te=T.defaultProps,te)J[Y]===void 0&&(J[Y]=te[Y]);return F(T,ue,void 0,void 0,null,J)},he.createRef=function(){return{current:null}},he.forwardRef=function(T){return{$$typeof:h,render:T}},he.isValidElement=fe,he.lazy=function(T){return{$$typeof:p,_payload:{_status:-1,_result:T},_init:K}},he.memo=function(T,B){return{$$typeof:m,type:T,compare:B===void 0?null:B}},he.startTransition=function(T){var B=j.T,V={};j.T=V;try{var Y=T(),J=j.S;J!==null&&J(V,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(X,se)}catch(ue){se(ue)}finally{j.T=B}},he.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},he.use=function(T){return j.H.use(T)},he.useActionState=function(T,B,V){return j.H.useActionState(T,B,V)},he.useCallback=function(T,B){return j.H.useCallback(T,B)},he.useContext=function(T){return j.H.useContext(T)},he.useDebugValue=function(){},he.useDeferredValue=function(T,B){return j.H.useDeferredValue(T,B)},he.useEffect=function(T,B,V){var Y=j.H;if(typeof V=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(T,B)},he.useId=function(){return j.H.useId()},he.useImperativeHandle=function(T,B,V){return j.H.useImperativeHandle(T,B,V)},he.useInsertionEffect=function(T,B){return j.H.useInsertionEffect(T,B)},he.useLayoutEffect=function(T,B){return j.H.useLayoutEffect(T,B)},he.useMemo=function(T,B){return j.H.useMemo(T,B)},he.useOptimistic=function(T,B){return j.H.useOptimistic(T,B)},he.useReducer=function(T,B,V){return j.H.useReducer(T,B,V)},he.useRef=function(T){return j.H.useRef(T)},he.useState=function(T){return j.H.useState(T)},he.useSyncExternalStore=function(T,B,V){return j.H.useSyncExternalStore(T,B,V)},he.useTransition=function(){return j.H.useTransition()},he.version="19.1.1",he}var Py;function _f(){return Py||(Py=1,dh.exports=N_()),dh.exports}var E=_f();const $t=Sf(E),M_=j_({__proto__:null,default:$t},[E]);var hh={exports:{}},ml={},fh={exports:{}},gh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xy;function U_(){return Xy||(Xy=1,(function(i){function e(I,K){var se=I.length;I.push(K);e:for(;0<se;){var X=se-1>>>1,T=I[X];if(0<l(T,K))I[X]=K,I[se]=T,se=X;else break e}}function n(I){return I.length===0?null:I[0]}function r(I){if(I.length===0)return null;var K=I[0],se=I.pop();if(se!==K){I[0]=se;e:for(var X=0,T=I.length,B=T>>>1;X<B;){var V=2*(X+1)-1,Y=I[V],J=V+1,ue=I[J];if(0>l(Y,se))J<T&&0>l(ue,Y)?(I[X]=ue,I[J]=se,X=J):(I[X]=Y,I[V]=se,X=V);else if(J<T&&0>l(ue,se))I[X]=ue,I[J]=se,X=J;else break e}}return K}function l(I,K){var se=I.sortIndex-K.sortIndex;return se!==0?se:I.id-K.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var u=Date,h=u.now();i.unstable_now=function(){return u.now()-h}}var g=[],m=[],p=1,y=null,w=3,_=!1,C=!1,x=!1,A=!1,U=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function H(I){for(var K=n(m);K!==null;){if(K.callback===null)r(m);else if(K.startTime<=I)r(m),K.sortIndex=K.expirationTime,e(g,K);else break;K=n(m)}}function j(I){if(x=!1,H(I),!C)if(n(g)!==null)C=!0,P||(P=!0,me());else{var K=n(m);K!==null&&Ie(j,K.startTime-I)}}var P=!1,F=-1,W=5,fe=-1;function ee(){return A?!0:!(i.unstable_now()-fe<W)}function ae(){if(A=!1,P){var I=i.unstable_now();fe=I;var K=!0;try{e:{C=!1,x&&(x=!1,z(F),F=-1),_=!0;var se=w;try{t:{for(H(I),y=n(g);y!==null&&!(y.expirationTime>I&&ee());){var X=y.callback;if(typeof X=="function"){y.callback=null,w=y.priorityLevel;var T=X(y.expirationTime<=I);if(I=i.unstable_now(),typeof T=="function"){y.callback=T,H(I),K=!0;break t}y===n(g)&&r(g),H(I)}else r(g);y=n(g)}if(y!==null)K=!0;else{var B=n(m);B!==null&&Ie(j,B.startTime-I),K=!1}}break e}finally{y=null,w=se,_=!1}K=void 0}}finally{K?me():P=!1}}}var me;if(typeof $=="function")me=function(){$(ae)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Xe=Le.port2;Le.port1.onmessage=ae,me=function(){Xe.postMessage(null)}}else me=function(){U(ae,0)};function Ie(I,K){F=U(function(){I(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(I){I.callback=null},i.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<I?Math.floor(1e3/I):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_next=function(I){switch(w){case 1:case 2:case 3:var K=3;break;default:K=w}var se=w;w=K;try{return I()}finally{w=se}},i.unstable_requestPaint=function(){A=!0},i.unstable_runWithPriority=function(I,K){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var se=w;w=I;try{return K()}finally{w=se}},i.unstable_scheduleCallback=function(I,K,se){var X=i.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?X+se:X):se=X,I){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=se+T,I={id:p++,callback:K,priorityLevel:I,startTime:se,expirationTime:T,sortIndex:-1},se>X?(I.sortIndex=se,e(m,I),n(g)===null&&I===n(m)&&(x?(z(F),F=-1):x=!0,Ie(j,se-X))):(I.sortIndex=T,e(g,I),C||_||(C=!0,P||(P=!0,me()))),I},i.unstable_shouldYield=ee,i.unstable_wrapCallback=function(I){var K=w;return function(){var se=w;w=K;try{return I.apply(this,arguments)}finally{w=se}}}})(gh)),gh}var Ky;function $_(){return Ky||(Ky=1,fh.exports=U_()),fh.exports}var mh={exports:{}},Ut={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy;function I_(){if(Fy)return Ut;Fy=1;var i=_f();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)m+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(g,m,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:g,containerInfo:m,implementation:p}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Ut.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ut.createPortal=function(g,m){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return c(g,m,null,p)},Ut.flushSync=function(g){var m=u.T,p=r.p;try{if(u.T=null,r.p=2,g)return g()}finally{u.T=m,r.p=p,r.d.f()}},Ut.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(g,m))},Ut.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},Ut.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var p=m.as,y=h(p,m.crossOrigin),w=typeof m.integrity=="string"?m.integrity:void 0,_=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;p==="style"?r.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:w,fetchPriority:_}):p==="script"&&r.d.X(g,{crossOrigin:y,integrity:w,fetchPriority:_,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Ut.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var p=h(m.as,m.crossOrigin);r.d.M(g,{crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(g)},Ut.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var p=m.as,y=h(p,m.crossOrigin);r.d.L(g,p,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Ut.preloadModule=function(g,m){if(typeof g=="string")if(m){var p=h(m.as,m.crossOrigin);r.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:p,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(g)},Ut.requestFormReset=function(g){r.d.r(g)},Ut.unstable_batchedUpdates=function(g,m){return g(m)},Ut.useFormState=function(g,m,p){return u.H.useFormState(g,m,p)},Ut.useFormStatus=function(){return u.H.useHostTransitionStatus()},Ut.version="19.1.1",Ut}var Jy;function xb(){if(Jy)return mh.exports;Jy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),mh.exports=I_(),mh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function B_(){if(Zy)return ml;Zy=1;var i=$_(),e=_f(),n=xb();function r(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function u(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function h(t){if(c(t)!==t)throw Error(r(188))}function g(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(r(188));return s!==t?null:t}for(var a=t,o=s;;){var d=a.return;if(d===null)break;var f=d.alternate;if(f===null){if(o=d.return,o!==null){a=o;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===a)return h(d),t;if(f===o)return h(d),s;f=f.sibling}throw Error(r(188))}if(a.return!==o.return)a=d,o=f;else{for(var v=!1,S=d.child;S;){if(S===a){v=!0,a=d,o=f;break}if(S===o){v=!0,o=d,a=f;break}S=S.sibling}if(!v){for(S=f.child;S;){if(S===a){v=!0,a=f,o=d;break}if(S===o){v=!0,o=f,a=d;break}S=S.sibling}if(!v)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?t:s}function m(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=m(t),s!==null)return s;t=t.sibling}return null}var p=Object.assign,y=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),$=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),fe=Symbol.for("react.activity"),ee=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function me(t){return t===null||typeof t!="object"?null:(t=ae&&t[ae]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Symbol.for("react.client.reference");function Xe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Le?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case A:return"Profiler";case x:return"StrictMode";case j:return"Suspense";case P:return"SuspenseList";case fe:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case _:return"Portal";case $:return(t.displayName||"Context")+".Provider";case z:return(t._context.displayName||"Context")+".Consumer";case H:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case F:return s=t.displayName||null,s!==null?s:Xe(t.type)||"Memo";case W:s=t._payload,t=t._init;try{return Xe(t(s))}catch{}}return null}var Ie=Array.isArray,I=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},X=[],T=-1;function B(t){return{current:t}}function V(t){0>T||(t.current=X[T],X[T]=null,T--)}function Y(t,s){T++,X[T]=t.current,t.current=s}var J=B(null),ue=B(null),te=B(null),nt=B(null);function Se(t,s){switch(Y(te,s),Y(ue,t),Y(J,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?vy(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=vy(s),t=by(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}V(J),Y(J,t)}function st(){V(J),V(ue),V(te)}function Ce(t){t.memoizedState!==null&&Y(nt,t);var s=J.current,a=by(s,t.type);s!==a&&(Y(ue,t),Y(J,a))}function un(t){ue.current===t&&(V(J),V(ue)),nt.current===t&&(V(nt),cl._currentValue=se)}var kt=Object.prototype.hasOwnProperty,dn=i.unstable_scheduleCallback,Bt=i.unstable_cancelCallback,Un=i.unstable_shouldYield,$n=i.unstable_requestPaint,zt=i.unstable_now,Pi=i.unstable_getCurrentPriorityLevel,Ts=i.unstable_ImmediatePriority,Kt=i.unstable_UserBlockingPriority,Tn=i.unstable_NormalPriority,Zn=i.unstable_LowPriority,Ds=i.unstable_IdlePriority,Xi=i.log,wa=i.unstable_setDisableYieldValue,Yt=null,Be=null;function lt(t){if(typeof Xi=="function"&&wa(t),Be&&typeof Be.setStrictMode=="function")try{Be.setStrictMode(Yt,t)}catch{}}var Ke=Math.clz32?Math.clz32:Fi,Ki=Math.log,hn=Math.LN2;function Fi(t){return t>>>=0,t===0?32:31-(Ki(t)/hn|0)|0}var As=256,Rs=4194304;function Ft(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Wn(t,s,a){var o=t.pendingLanes;if(o===0)return 0;var d=0,f=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var S=o&134217727;return S!==0?(o=S&~f,o!==0?d=Ft(o):(v&=S,v!==0?d=Ft(v):a||(a=S&~t,a!==0&&(d=Ft(a))))):(S=o&~f,S!==0?d=Ft(S):v!==0?d=Ft(v):a||(a=o&~t,a!==0&&(d=Ft(a)))),d===0?0:s!==0&&s!==d&&(s&f)===0&&(f=d&-d,a=s&-s,f>=a||f===32&&(a&4194048)!==0)?s:d}function es(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function Ji(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zi(){var t=As;return As<<=1,(As&4194048)===0&&(As=256),t}function Wi(){var t=Rs;return Rs<<=1,(Rs&62914560)===0&&(Rs=4194304),t}function fi(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function Ve(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Tt(t,s,a,o,d,f){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,D=t.expirationTimes,k=t.hiddenUpdates;for(a=v&~a;0<a;){var q=31-Ke(a),Q=1<<q;S[q]=0,D[q]=-1;var N=k[q];if(N!==null)for(k[q]=null,q=0;q<N.length;q++){var M=N[q];M!==null&&(M.lane&=-536870913)}a&=~Q}o!==0&&mt(t,o,0),f!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=f&~(v&~s))}function mt(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var o=31-Ke(s);t.entangledLanes|=s,t.entanglements[o]=t.entanglements[o]|1073741824|a&4194090}function Jt(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var o=31-Ke(a),d=1<<o;d&s|t[o]&s&&(t[o]|=s),a&=~d}}function pt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Z(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function it(){var t=K.p;return t!==0?t:(t=window.event,t===void 0?32:Iy(t.type))}function yt(t,s){var a=K.p;try{return K.p=t,s()}finally{K.p=a}}var je=Math.random().toString(36).slice(2),Ae="__reactFiber$"+je,Ge="__reactProps$"+je,Nt="__reactContainer$"+je,ts="__reactEvents$"+je,gi="__reactListeners$"+je,In="__reactHandles$"+je,js="__reactResources$"+je,ns="__reactMarker$"+je;function su(t){delete t[Ae],delete t[Ge],delete t[ts],delete t[gi],delete t[In]}function er(t){var s=t[Ae];if(s)return s;for(var a=t.parentNode;a;){if(s=a[Nt]||a[Ae]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=Ey(t);t!==null;){if(a=t[Ae])return a;t=Ey(t)}return s}t=a,a=t.parentNode}return null}function tr(t){if(t=t[Ae]||t[Nt]){var s=t.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return t}return null}function Sa(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(r(33))}function nr(t){var s=t[js];return s||(s=t[js]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function vt(t){t[ns]=!0}var lg=new Set,og={};function mi(t,s){sr(t,s),sr(t+"Capture",s)}function sr(t,s){for(og[t]=s,t=0;t<s.length;t++)lg.add(s[t])}var _w=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cg={},ug={};function Ew(t){return kt.call(ug,t)?!0:kt.call(cg,t)?!1:_w.test(t)?ug[t]=!0:(cg[t]=!0,!1)}function Zl(t,s,a){if(Ew(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var o=s.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Wl(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function ss(t,s,a,o){if(o===null)t.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+o)}}var iu,dg;function ir(t){if(iu===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);iu=s&&s[1]||"",dg=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+iu+t+dg}var ru=!1;function au(t,s){if(!t||ru)return"";ru=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(s){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(M){var N=M}Reflect.construct(t,[],Q)}else{try{Q.call()}catch(M){N=M}t.call(Q.prototype)}}else{try{throw Error()}catch(M){N=M}(Q=t())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(M){if(M&&N&&typeof M.stack=="string")return[M.stack,N.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],S=f[1];if(v&&S){var D=v.split(`
`),k=S.split(`
`);for(d=o=0;o<D.length&&!D[o].includes("DetermineComponentFrameRoot");)o++;for(;d<k.length&&!k[d].includes("DetermineComponentFrameRoot");)d++;if(o===D.length||d===k.length)for(o=D.length-1,d=k.length-1;1<=o&&0<=d&&D[o]!==k[d];)d--;for(;1<=o&&0<=d;o--,d--)if(D[o]!==k[d]){if(o!==1||d!==1)do if(o--,d--,0>d||D[o]!==k[d]){var q=`
`+D[o].replace(" at new "," at ");return t.displayName&&q.includes("<anonymous>")&&(q=q.replace("<anonymous>",t.displayName)),q}while(1<=o&&0<=d);break}}}finally{ru=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ir(a):""}function xw(t){switch(t.tag){case 26:case 27:case 5:return ir(t.type);case 16:return ir("Lazy");case 13:return ir("Suspense");case 19:return ir("SuspenseList");case 0:case 15:return au(t.type,!1);case 11:return au(t.type.render,!1);case 1:return au(t.type,!0);case 31:return ir("Activity");default:return""}}function hg(t){try{var s="";do s+=xw(t),t=t.return;while(t);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function fn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function fg(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Cw(t){var s=fg(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),o=""+t[s];if(!t.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,f=a.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return d.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(t,s,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function eo(t){t._valueTracker||(t._valueTracker=Cw(t))}function gg(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),o="";return t&&(o=fg(t)?t.checked?"true":"false":t.value),t=o,t!==a?(s.setValue(t),!0):!1}function to(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Tw=/[\n"\\]/g;function gn(t){return t.replace(Tw,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function lu(t,s,a,o,d,f,v,S){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),s!=null?v==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+fn(s)):t.value!==""+fn(s)&&(t.value=""+fn(s)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),s!=null?ou(t,v,fn(s)):a!=null?ou(t,v,fn(a)):o!=null&&t.removeAttribute("value"),d==null&&f!=null&&(t.defaultChecked=!!f),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+fn(S):t.removeAttribute("name")}function mg(t,s,a,o,d,f,v,S){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),s!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||s!=null))return;a=a!=null?""+fn(a):"",s=s!=null?""+fn(s):a,S||s===t.value||(t.value=s),t.defaultValue=s}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=S?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v)}function ou(t,s,a){s==="number"&&to(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function rr(t,s,a,o){if(t=t.options,s){s={};for(var d=0;d<a.length;d++)s["$"+a[d]]=!0;for(a=0;a<t.length;a++)d=s.hasOwnProperty("$"+t[a].value),t[a].selected!==d&&(t[a].selected=d),d&&o&&(t[a].defaultSelected=!0)}else{for(a=""+fn(a),s=null,d=0;d<t.length;d++){if(t[d].value===a){t[d].selected=!0,o&&(t[d].defaultSelected=!0);return}s!==null||t[d].disabled||(s=t[d])}s!==null&&(s.selected=!0)}}function pg(t,s,a){if(s!=null&&(s=""+fn(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+fn(a):""}function yg(t,s,a,o){if(s==null){if(o!=null){if(a!=null)throw Error(r(92));if(Ie(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),s=a}a=fn(s),t.defaultValue=a,o=t.textContent,o===a&&o!==""&&o!==null&&(t.value=o)}function ar(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var Dw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vg(t,s,a){var o=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":o?t.setProperty(s,a):typeof a!="number"||a===0||Dw.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function bg(t,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(t=t.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||s!=null&&s.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var d in s)o=s[d],s.hasOwnProperty(d)&&a[d]!==o&&vg(t,d,o)}else for(var f in s)s.hasOwnProperty(f)&&vg(t,f,s[f])}function cu(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Aw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function no(t){return Rw.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var uu=null;function du(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lr=null,or=null;function wg(t){var s=tr(t);if(s&&(t=s.stateNode)){var a=t[Ge]||null;e:switch(t=s.stateNode,s.type){case"input":if(lu(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+gn(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var o=a[s];if(o!==t&&o.form===t.form){var d=o[Ge]||null;if(!d)throw Error(r(90));lu(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<a.length;s++)o=a[s],o.form===t.form&&gg(o)}break e;case"textarea":pg(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&rr(t,!!a.multiple,s,!1)}}}var hu=!1;function Sg(t,s,a){if(hu)return t(s,a);hu=!0;try{var o=t(s);return o}finally{if(hu=!1,(lr!==null||or!==null)&&(Ho(),lr&&(s=lr,t=or,or=lr=null,wg(s),t)))for(s=0;s<t.length;s++)wg(t[s])}}function _a(t,s){var a=t.stateNode;if(a===null)return null;var o=a[Ge]||null;if(o===null)return null;a=o[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fu=!1;if(is)try{var Ea={};Object.defineProperty(Ea,"passive",{get:function(){fu=!0}}),window.addEventListener("test",Ea,Ea),window.removeEventListener("test",Ea,Ea)}catch{fu=!1}var Os=null,gu=null,so=null;function _g(){if(so)return so;var t,s=gu,a=s.length,o,d="value"in Os?Os.value:Os.textContent,f=d.length;for(t=0;t<a&&s[t]===d[t];t++);var v=a-t;for(o=1;o<=v&&s[a-o]===d[f-o];o++);return so=d.slice(t,1<o?1-o:void 0)}function io(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ro(){return!0}function Eg(){return!1}function Gt(t){function s(a,o,d,f,v){this._reactName=a,this._targetInst=d,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ro:Eg,this.isPropagationStopped=Eg,this}return p(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ro)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ro)},persist:function(){},isPersistent:ro}),s}var pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ao=Gt(pi),xa=p({},pi,{view:0,detail:0}),jw=Gt(xa),mu,pu,Ca,lo=p({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ca&&(Ca&&t.type==="mousemove"?(mu=t.screenX-Ca.screenX,pu=t.screenY-Ca.screenY):pu=mu=0,Ca=t),mu)},movementY:function(t){return"movementY"in t?t.movementY:pu}}),xg=Gt(lo),Ow=p({},lo,{dataTransfer:0}),Lw=Gt(Ow),kw=p({},xa,{relatedTarget:0}),yu=Gt(kw),Nw=p({},pi,{animationName:0,elapsedTime:0,pseudoElement:0}),Mw=Gt(Nw),Uw=p({},pi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$w=Gt(Uw),Iw=p({},pi,{data:0}),Cg=Gt(Iw),Bw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hw(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=qw[t])?!!s[t]:!1}function vu(){return Hw}var Yw=p({},xa,{key:function(t){if(t.key){var s=Bw[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=io(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vu,charCode:function(t){return t.type==="keypress"?io(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?io(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gw=Gt(Yw),Vw=p({},lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tg=Gt(Vw),Qw=p({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vu}),Pw=Gt(Qw),Xw=p({},pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kw=Gt(Xw),Fw=p({},lo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jw=Gt(Fw),Zw=p({},pi,{newState:0,oldState:0}),Ww=Gt(Zw),eS=[9,13,27,32],bu=is&&"CompositionEvent"in window,Ta=null;is&&"documentMode"in document&&(Ta=document.documentMode);var tS=is&&"TextEvent"in window&&!Ta,Dg=is&&(!bu||Ta&&8<Ta&&11>=Ta),Ag=" ",Rg=!1;function jg(t,s){switch(t){case"keyup":return eS.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Og(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cr=!1;function nS(t,s){switch(t){case"compositionend":return Og(s);case"keypress":return s.which!==32?null:(Rg=!0,Ag);case"textInput":return t=s.data,t===Ag&&Rg?null:t;default:return null}}function sS(t,s){if(cr)return t==="compositionend"||!bu&&jg(t,s)?(t=_g(),so=gu=Os=null,cr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Dg&&s.locale!=="ko"?null:s.data;default:return null}}var iS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lg(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!iS[t.type]:s==="textarea"}function kg(t,s,a,o){lr?or?or.push(o):or=[o]:lr=o,s=Xo(s,"onChange"),0<s.length&&(a=new ao("onChange","change",null,a,o),t.push({event:a,listeners:s}))}var Da=null,Aa=null;function rS(t){fy(t,0)}function oo(t){var s=Sa(t);if(gg(s))return t}function Ng(t,s){if(t==="change")return s}var Mg=!1;if(is){var wu;if(is){var Su="oninput"in document;if(!Su){var Ug=document.createElement("div");Ug.setAttribute("oninput","return;"),Su=typeof Ug.oninput=="function"}wu=Su}else wu=!1;Mg=wu&&(!document.documentMode||9<document.documentMode)}function $g(){Da&&(Da.detachEvent("onpropertychange",Ig),Aa=Da=null)}function Ig(t){if(t.propertyName==="value"&&oo(Aa)){var s=[];kg(s,Aa,t,du(t)),Sg(rS,s)}}function aS(t,s,a){t==="focusin"?($g(),Da=s,Aa=a,Da.attachEvent("onpropertychange",Ig)):t==="focusout"&&$g()}function lS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oo(Aa)}function oS(t,s){if(t==="click")return oo(s)}function cS(t,s){if(t==="input"||t==="change")return oo(s)}function uS(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Zt=typeof Object.is=="function"?Object.is:uS;function Ra(t,s){if(Zt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),o=Object.keys(s);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var d=a[o];if(!kt.call(s,d)||!Zt(t[d],s[d]))return!1}return!0}function Bg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zg(t,s){var a=Bg(t);t=0;for(var o;a;){if(a.nodeType===3){if(o=t+a.textContent.length,t<=s&&o>=s)return{node:a,offset:s-t};t=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Bg(a)}}function qg(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?qg(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Hg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=to(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=to(t.document)}return s}function _u(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var dS=is&&"documentMode"in document&&11>=document.documentMode,ur=null,Eu=null,ja=null,xu=!1;function Yg(t,s,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;xu||ur==null||ur!==to(o)||(o=ur,"selectionStart"in o&&_u(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ja&&Ra(ja,o)||(ja=o,o=Xo(Eu,"onSelect"),0<o.length&&(s=new ao("onSelect","select",null,s,a),t.push({event:s,listeners:o}),s.target=ur)))}function yi(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var dr={animationend:yi("Animation","AnimationEnd"),animationiteration:yi("Animation","AnimationIteration"),animationstart:yi("Animation","AnimationStart"),transitionrun:yi("Transition","TransitionRun"),transitionstart:yi("Transition","TransitionStart"),transitioncancel:yi("Transition","TransitionCancel"),transitionend:yi("Transition","TransitionEnd")},Cu={},Gg={};is&&(Gg=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);function vi(t){if(Cu[t])return Cu[t];if(!dr[t])return t;var s=dr[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Gg)return Cu[t]=s[a];return t}var Vg=vi("animationend"),Qg=vi("animationiteration"),Pg=vi("animationstart"),hS=vi("transitionrun"),fS=vi("transitionstart"),gS=vi("transitioncancel"),Xg=vi("transitionend"),Kg=new Map,Tu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tu.push("scrollEnd");function Dn(t,s){Kg.set(t,s),mi(s,[t])}var Fg=new WeakMap;function mn(t,s){if(typeof t=="object"&&t!==null){var a=Fg.get(t);return a!==void 0?a:(s={value:t,source:s,stack:hg(s)},Fg.set(t,s),s)}return{value:t,source:s,stack:hg(s)}}var pn=[],hr=0,Du=0;function co(){for(var t=hr,s=Du=hr=0;s<t;){var a=pn[s];pn[s++]=null;var o=pn[s];pn[s++]=null;var d=pn[s];pn[s++]=null;var f=pn[s];if(pn[s++]=null,o!==null&&d!==null){var v=o.pending;v===null?d.next=d:(d.next=v.next,v.next=d),o.pending=d}f!==0&&Jg(a,d,f)}}function uo(t,s,a,o){pn[hr++]=t,pn[hr++]=s,pn[hr++]=a,pn[hr++]=o,Du|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Au(t,s,a,o){return uo(t,s,a,o),ho(t)}function fr(t,s){return uo(t,null,null,s),ho(t)}function Jg(t,s,a){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a);for(var d=!1,f=t.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(d=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,d&&s!==null&&(d=31-Ke(a),t=f.hiddenUpdates,o=t[d],o===null?t[d]=[s]:o.push(s),s.lane=a|536870912),f):null}function ho(t){if(50<tl)throw tl=0,Nd=null,Error(r(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var gr={};function mS(t,s,a,o){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,s,a,o){return new mS(t,s,a,o)}function Ru(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rs(t,s){var a=t.alternate;return a===null?(a=Wt(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Zg(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function fo(t,s,a,o,d,f){var v=0;if(o=t,typeof t=="function")Ru(t)&&(v=1);else if(typeof t=="string")v=y_(t,a,J.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case fe:return t=Wt(31,a,s,d),t.elementType=fe,t.lanes=f,t;case C:return bi(a.children,d,f,s);case x:v=8,d|=24;break;case A:return t=Wt(12,a,s,d|2),t.elementType=A,t.lanes=f,t;case j:return t=Wt(13,a,s,d),t.elementType=j,t.lanes=f,t;case P:return t=Wt(19,a,s,d),t.elementType=P,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U:case $:v=10;break e;case z:v=9;break e;case H:v=11;break e;case F:v=14;break e;case W:v=16,o=null;break e}v=29,a=Error(r(130,t===null?"null":typeof t,"")),o=null}return s=Wt(v,a,s,d),s.elementType=t,s.type=o,s.lanes=f,s}function bi(t,s,a,o){return t=Wt(7,t,o,s),t.lanes=a,t}function ju(t,s,a){return t=Wt(6,t,null,s),t.lanes=a,t}function Ou(t,s,a){return s=Wt(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var mr=[],pr=0,go=null,mo=0,yn=[],vn=0,wi=null,as=1,ls="";function Si(t,s){mr[pr++]=mo,mr[pr++]=go,go=t,mo=s}function Wg(t,s,a){yn[vn++]=as,yn[vn++]=ls,yn[vn++]=wi,wi=t;var o=as;t=ls;var d=32-Ke(o)-1;o&=~(1<<d),a+=1;var f=32-Ke(s)+d;if(30<f){var v=d-d%5;f=(o&(1<<v)-1).toString(32),o>>=v,d-=v,as=1<<32-Ke(s)+d|a<<d|o,ls=f+t}else as=1<<f|a<<d|o,ls=t}function Lu(t){t.return!==null&&(Si(t,1),Wg(t,1,0))}function ku(t){for(;t===go;)go=mr[--pr],mr[pr]=null,mo=mr[--pr],mr[pr]=null;for(;t===wi;)wi=yn[--vn],yn[vn]=null,ls=yn[--vn],yn[vn]=null,as=yn[--vn],yn[vn]=null}var qt=null,Fe=null,Oe=!1,_i=null,Bn=!1,Nu=Error(r(519));function Ei(t){var s=Error(r(418,""));throw ka(mn(s,t)),Nu}function em(t){var s=t.stateNode,a=t.type,o=t.memoizedProps;switch(s[Ae]=t,s[Ge]=o,a){case"dialog":be("cancel",s),be("close",s);break;case"iframe":case"object":case"embed":be("load",s);break;case"video":case"audio":for(a=0;a<sl.length;a++)be(sl[a],s);break;case"source":be("error",s);break;case"img":case"image":case"link":be("error",s),be("load",s);break;case"details":be("toggle",s);break;case"input":be("invalid",s),mg(s,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),eo(s);break;case"select":be("invalid",s);break;case"textarea":be("invalid",s),yg(s,o.value,o.defaultValue,o.children),eo(s)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||o.suppressHydrationWarning===!0||yy(s.textContent,a)?(o.popover!=null&&(be("beforetoggle",s),be("toggle",s)),o.onScroll!=null&&be("scroll",s),o.onScrollEnd!=null&&be("scrollend",s),o.onClick!=null&&(s.onclick=Ko),s=!0):s=!1,s||Ei(t)}function tm(t){for(qt=t.return;qt;)switch(qt.tag){case 5:case 13:Bn=!1;return;case 27:case 3:Bn=!0;return;default:qt=qt.return}}function Oa(t){if(t!==qt)return!1;if(!Oe)return tm(t),Oe=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Fd(t.type,t.memoizedProps)),a=!a),a&&Fe&&Ei(t),tm(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(r(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(s===0){Fe=Rn(t.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;t=t.nextSibling}Fe=null}}else s===27?(s=Fe,Ps(t.type)?(t=eh,eh=null,Fe=t):Fe=s):Fe=qt?Rn(t.stateNode.nextSibling):null;return!0}function La(){Fe=qt=null,Oe=!1}function nm(){var t=_i;return t!==null&&(Pt===null?Pt=t:Pt.push.apply(Pt,t),_i=null),t}function ka(t){_i===null?_i=[t]:_i.push(t)}var Mu=B(null),xi=null,os=null;function Ls(t,s,a){Y(Mu,s._currentValue),s._currentValue=a}function cs(t){t._currentValue=Mu.current,V(Mu)}function Uu(t,s,a){for(;t!==null;){var o=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,o!==null&&(o.childLanes|=s)):o!==null&&(o.childLanes&s)!==s&&(o.childLanes|=s),t===a)break;t=t.return}}function $u(t,s,a,o){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var f=d.dependencies;if(f!==null){var v=d.child;f=f.firstContext;e:for(;f!==null;){var S=f;f=d;for(var D=0;D<s.length;D++)if(S.context===s[D]){f.lanes|=a,S=f.alternate,S!==null&&(S.lanes|=a),Uu(f.return,a,t),o||(v=null);break e}f=S.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(r(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),Uu(v,a,t),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===t){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function Na(t,s,a,o){t=null;for(var d=s,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(r(387));if(v=v.memoizedProps,v!==null){var S=d.type;Zt(d.pendingProps.value,v.value)||(t!==null?t.push(S):t=[S])}}else if(d===nt.current){if(v=d.alternate,v===null)throw Error(r(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(cl):t=[cl])}d=d.return}t!==null&&$u(s,t,a,o),s.flags|=262144}function po(t){for(t=t.firstContext;t!==null;){if(!Zt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ci(t){xi=t,os=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Mt(t){return sm(xi,t)}function yo(t,s){return xi===null&&Ci(t),sm(t,s)}function sm(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},os===null){if(t===null)throw Error(r(308));os=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else os=os.next=s;return a}var pS=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,o){t.push(o)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},yS=i.unstable_scheduleCallback,vS=i.unstable_NormalPriority,ot={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Iu(){return{controller:new pS,data:new Map,refCount:0}}function Ma(t){t.refCount--,t.refCount===0&&yS(vS,function(){t.controller.abort()})}var Ua=null,Bu=0,yr=0,vr=null;function bS(t,s){if(Ua===null){var a=Ua=[];Bu=0,yr=qd(),vr={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Bu++,s.then(im,im),s}function im(){if(--Bu===0&&Ua!==null){vr!==null&&(vr.status="fulfilled");var t=Ua;Ua=null,yr=0,vr=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function wS(t,s){var a=[],o={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return t.then(function(){o.status="fulfilled",o.value=s;for(var d=0;d<a.length;d++)(0,a[d])(s)},function(d){for(o.status="rejected",o.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),o}var rm=I.S;I.S=function(t,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&bS(t,s),rm!==null&&rm(t,s)};var Ti=B(null);function zu(){var t=Ti.current;return t!==null?t:qe.pooledCache}function vo(t,s){s===null?Y(Ti,Ti.current):Y(Ti,s.pool)}function am(){var t=zu();return t===null?null:{parent:ot._currentValue,pool:t}}var $a=Error(r(460)),lm=Error(r(474)),bo=Error(r(542)),qu={then:function(){}};function om(t){return t=t.status,t==="fulfilled"||t==="rejected"}function wo(){}function cm(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(wo,wo),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,dm(t),t;default:if(typeof s.status=="string")s.then(wo,wo);else{if(t=qe,t!==null&&100<t.shellSuspendCounter)throw Error(r(482));t=s,t.status="pending",t.then(function(o){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=o}},function(o){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=o}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,dm(t),t}throw Ia=s,$a}}var Ia=null;function um(){if(Ia===null)throw Error(r(459));var t=Ia;return Ia=null,t}function dm(t){if(t===$a||t===bo)throw Error(r(483))}var ks=!1;function Hu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Yu(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ns(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ms(t,s,a){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ke&2)!==0){var d=o.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),o.pending=s,s=ho(t),Jg(t,null,a),s}return uo(t,o,s,a),ho(t)}function Ba(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Jt(t,a)}}function Gu(t,s){var a=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var d=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?d=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?d=f=s:f=f.next=s}else d=f=s;a={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Vu=!1;function za(){if(Vu){var t=vr;if(t!==null)throw t}}function qa(t,s,a,o){Vu=!1;var d=t.updateQueue;ks=!1;var f=d.firstBaseUpdate,v=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var D=S,k=D.next;D.next=null,v===null?f=k:v.next=k,v=D;var q=t.alternate;q!==null&&(q=q.updateQueue,S=q.lastBaseUpdate,S!==v&&(S===null?q.firstBaseUpdate=k:S.next=k,q.lastBaseUpdate=D))}if(f!==null){var Q=d.baseState;v=0,q=k=D=null,S=f;do{var N=S.lane&-536870913,M=N!==S.lane;if(M?(Te&N)===N:(o&N)===N){N!==0&&N===yr&&(Vu=!0),q!==null&&(q=q.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var oe=t,re=S;N=s;var $e=a;switch(re.tag){case 1:if(oe=re.payload,typeof oe=="function"){Q=oe.call($e,Q,N);break e}Q=oe;break e;case 3:oe.flags=oe.flags&-65537|128;case 0:if(oe=re.payload,N=typeof oe=="function"?oe.call($e,Q,N):oe,N==null)break e;Q=p({},Q,N);break e;case 2:ks=!0}}N=S.callback,N!==null&&(t.flags|=64,M&&(t.flags|=8192),M=d.callbacks,M===null?d.callbacks=[N]:M.push(N))}else M={lane:N,tag:S.tag,payload:S.payload,callback:S.callback,next:null},q===null?(k=q=M,D=Q):q=q.next=M,v|=N;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;M=S,S=M.next,M.next=null,d.lastBaseUpdate=M,d.shared.pending=null}}while(!0);q===null&&(D=Q),d.baseState=D,d.firstBaseUpdate=k,d.lastBaseUpdate=q,f===null&&(d.shared.lanes=0),Ys|=v,t.lanes=v,t.memoizedState=Q}}function hm(t,s){if(typeof t!="function")throw Error(r(191,t));t.call(s)}function fm(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)hm(a[t],s)}var br=B(null),So=B(0);function gm(t,s){t=ps,Y(So,t),Y(br,s),ps=t|s.baseLanes}function Qu(){Y(So,ps),Y(br,br.current)}function Pu(){ps=So.current,V(br),V(So)}var Us=0,ge=null,Me=null,rt=null,_o=!1,wr=!1,Di=!1,Eo=0,Ha=0,Sr=null,SS=0;function We(){throw Error(r(321))}function Xu(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Zt(t[a],s[a]))return!1;return!0}function Ku(t,s,a,o,d,f){return Us=f,ge=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,I.H=t===null||t.memoizedState===null?Jm:Zm,Di=!1,f=a(o,d),Di=!1,wr&&(f=pm(s,a,o,d)),mm(t),f}function mm(t){I.H=Ro;var s=Me!==null&&Me.next!==null;if(Us=0,rt=Me=ge=null,_o=!1,Ha=0,Sr=null,s)throw Error(r(300));t===null||bt||(t=t.dependencies,t!==null&&po(t)&&(bt=!0))}function pm(t,s,a,o){ge=t;var d=0;do{if(wr&&(Sr=null),Ha=0,wr=!1,25<=d)throw Error(r(301));if(d+=1,rt=Me=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}I.H=AS,f=s(a,o)}while(wr);return f}function _S(){var t=I.H,s=t.useState()[0];return s=typeof s.then=="function"?Ya(s):s,t=t.useState()[0],(Me!==null?Me.memoizedState:null)!==t&&(ge.flags|=1024),s}function Fu(){var t=Eo!==0;return Eo=0,t}function Ju(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Zu(t){if(_o){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}_o=!1}Us=0,rt=Me=ge=null,wr=!1,Ha=Eo=0,Sr=null}function Vt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?ge.memoizedState=rt=t:rt=rt.next=t,rt}function at(){if(Me===null){var t=ge.alternate;t=t!==null?t.memoizedState:null}else t=Me.next;var s=rt===null?ge.memoizedState:rt.next;if(s!==null)rt=s,Me=t;else{if(t===null)throw ge.alternate===null?Error(r(467)):Error(r(310));Me=t,t={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},rt===null?ge.memoizedState=rt=t:rt=rt.next=t}return rt}function Wu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ya(t){var s=Ha;return Ha+=1,Sr===null&&(Sr=[]),t=cm(Sr,t,s),s=ge,(rt===null?s.memoizedState:rt.next)===null&&(s=s.alternate,I.H=s===null||s.memoizedState===null?Jm:Zm),t}function xo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ya(t);if(t.$$typeof===$)return Mt(t)}throw Error(r(438,String(t)))}function ed(t){var s=null,a=ge.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var o=ge.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(s={data:o.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=Wu(),ge.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),o=0;o<t;o++)a[o]=ee;return s.index++,a}function us(t,s){return typeof s=="function"?s(t):s}function Co(t){var s=at();return td(s,Me,t)}function td(t,s,a){var o=t.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var d=t.baseQueue,f=o.pending;if(f!==null){if(d!==null){var v=d.next;d.next=f.next,f.next=v}s.baseQueue=d=f,o.pending=null}if(f=t.baseState,d===null)t.memoizedState=f;else{s=d.next;var S=v=null,D=null,k=s,q=!1;do{var Q=k.lane&-536870913;if(Q!==k.lane?(Te&Q)===Q:(Us&Q)===Q){var N=k.revertLane;if(N===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),Q===yr&&(q=!0);else if((Us&N)===N){k=k.next,N===yr&&(q=!0);continue}else Q={lane:0,revertLane:k.revertLane,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},D===null?(S=D=Q,v=f):D=D.next=Q,ge.lanes|=N,Ys|=N;Q=k.action,Di&&a(f,Q),f=k.hasEagerState?k.eagerState:a(f,Q)}else N={lane:Q,revertLane:k.revertLane,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},D===null?(S=D=N,v=f):D=D.next=N,ge.lanes|=Q,Ys|=Q;k=k.next}while(k!==null&&k!==s);if(D===null?v=f:D.next=S,!Zt(f,t.memoizedState)&&(bt=!0,q&&(a=vr,a!==null)))throw a;t.memoizedState=f,t.baseState=v,t.baseQueue=D,o.lastRenderedState=f}return d===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function nd(t){var s=at(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=t;var o=a.dispatch,d=a.pending,f=s.memoizedState;if(d!==null){a.pending=null;var v=d=d.next;do f=t(f,v.action),v=v.next;while(v!==d);Zt(f,s.memoizedState)||(bt=!0),s.memoizedState=f,s.baseQueue===null&&(s.baseState=f),a.lastRenderedState=f}return[f,o]}function ym(t,s,a){var o=ge,d=at(),f=Oe;if(f){if(a===void 0)throw Error(r(407));a=a()}else a=s();var v=!Zt((Me||d).memoizedState,a);v&&(d.memoizedState=a,bt=!0),d=d.queue;var S=wm.bind(null,o,d,t);if(Ga(2048,8,S,[t]),d.getSnapshot!==s||v||rt!==null&&rt.memoizedState.tag&1){if(o.flags|=2048,_r(9,To(),bm.bind(null,o,d,a,s),null),qe===null)throw Error(r(349));f||(Us&124)!==0||vm(o,s,a)}return a}function vm(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=ge.updateQueue,s===null?(s=Wu(),ge.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function bm(t,s,a,o){s.value=a,s.getSnapshot=o,Sm(s)&&_m(t)}function wm(t,s,a){return a(function(){Sm(s)&&_m(t)})}function Sm(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Zt(t,a)}catch{return!0}}function _m(t){var s=fr(t,2);s!==null&&rn(s,t,2)}function sd(t){var s=Vt();if(typeof t=="function"){var a=t;if(t=a(),Di){lt(!0);try{a()}finally{lt(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:t},s}function Em(t,s,a,o){return t.baseState=a,td(t,Me,typeof o=="function"?o:us)}function ES(t,s,a,o,d){if(Ao(t))throw Error(r(485));if(t=s.action,t!==null){var f={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};I.T!==null?a(!0):f.isTransition=!1,o(f),a=s.pending,a===null?(f.next=s.pending=f,xm(s,f)):(f.next=a.next,s.pending=a.next=f)}}function xm(t,s){var a=s.action,o=s.payload,d=t.state;if(s.isTransition){var f=I.T,v={};I.T=v;try{var S=a(d,o),D=I.S;D!==null&&D(v,S),Cm(t,s,S)}catch(k){id(t,s,k)}finally{I.T=f}}else try{f=a(d,o),Cm(t,s,f)}catch(k){id(t,s,k)}}function Cm(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Tm(t,s,o)},function(o){return id(t,s,o)}):Tm(t,s,a)}function Tm(t,s,a){s.status="fulfilled",s.value=a,Dm(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,xm(t,a)))}function id(t,s,a){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do s.status="rejected",s.reason=a,Dm(s),s=s.next;while(s!==o)}t.action=null}function Dm(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Am(t,s){return s}function Rm(t,s){if(Oe){var a=qe.formState;if(a!==null){e:{var o=ge;if(Oe){if(Fe){t:{for(var d=Fe,f=Bn;d.nodeType!==8;){if(!f){d=null;break t}if(d=Rn(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){Fe=Rn(d.nextSibling),o=d.data==="F!";break e}}Ei(o)}o=!1}o&&(s=a[0])}}return a=Vt(),a.memoizedState=a.baseState=s,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Am,lastRenderedState:s},a.queue=o,a=Xm.bind(null,ge,o),o.dispatch=a,o=sd(!1),f=cd.bind(null,ge,!1,o.queue),o=Vt(),d={state:s,dispatch:null,action:t,pending:null},o.queue=d,a=ES.bind(null,ge,d,f,a),d.dispatch=a,o.memoizedState=t,[s,a,!1]}function jm(t){var s=at();return Om(s,Me,t)}function Om(t,s,a){if(s=td(t,s,Am)[0],t=Co(us)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var o=Ya(s)}catch(v){throw v===$a?bo:v}else o=s;s=at();var d=s.queue,f=d.dispatch;return a!==s.memoizedState&&(ge.flags|=2048,_r(9,To(),xS.bind(null,d,a),null)),[o,f,t]}function xS(t,s){t.action=s}function Lm(t){var s=at(),a=Me;if(a!==null)return Om(s,a,t);at(),s=s.memoizedState,a=at();var o=a.queue.dispatch;return a.memoizedState=t,[s,o,!1]}function _r(t,s,a,o){return t={tag:t,create:a,deps:o,inst:s,next:null},s=ge.updateQueue,s===null&&(s=Wu(),ge.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(o=a.next,a.next=t,t.next=o,s.lastEffect=t),t}function To(){return{destroy:void 0,resource:void 0}}function km(){return at().memoizedState}function Do(t,s,a,o){var d=Vt();o=o===void 0?null:o,ge.flags|=t,d.memoizedState=_r(1|s,To(),a,o)}function Ga(t,s,a,o){var d=at();o=o===void 0?null:o;var f=d.memoizedState.inst;Me!==null&&o!==null&&Xu(o,Me.memoizedState.deps)?d.memoizedState=_r(s,f,a,o):(ge.flags|=t,d.memoizedState=_r(1|s,f,a,o))}function Nm(t,s){Do(8390656,8,t,s)}function Mm(t,s){Ga(2048,8,t,s)}function Um(t,s){return Ga(4,2,t,s)}function $m(t,s){return Ga(4,4,t,s)}function Im(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Bm(t,s,a){a=a!=null?a.concat([t]):null,Ga(4,4,Im.bind(null,s,t),a)}function rd(){}function zm(t,s){var a=at();s=s===void 0?null:s;var o=a.memoizedState;return s!==null&&Xu(s,o[1])?o[0]:(a.memoizedState=[t,s],t)}function qm(t,s){var a=at();s=s===void 0?null:s;var o=a.memoizedState;if(s!==null&&Xu(s,o[1]))return o[0];if(o=t(),Di){lt(!0);try{t()}finally{lt(!1)}}return a.memoizedState=[o,s],o}function ad(t,s,a){return a===void 0||(Us&1073741824)!==0?t.memoizedState=s:(t.memoizedState=a,t=Gp(),ge.lanes|=t,Ys|=t,a)}function Hm(t,s,a,o){return Zt(a,s)?a:br.current!==null?(t=ad(t,a,o),Zt(t,s)||(bt=!0),t):(Us&42)===0?(bt=!0,t.memoizedState=a):(t=Gp(),ge.lanes|=t,Ys|=t,s)}function Ym(t,s,a,o,d){var f=K.p;K.p=f!==0&&8>f?f:8;var v=I.T,S={};I.T=S,cd(t,!1,s,a);try{var D=d(),k=I.S;if(k!==null&&k(S,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var q=wS(D,o);Va(t,s,q,sn(t))}else Va(t,s,o,sn(t))}catch(Q){Va(t,s,{then:function(){},status:"rejected",reason:Q},sn())}finally{K.p=f,I.T=v}}function CS(){}function ld(t,s,a,o){if(t.tag!==5)throw Error(r(476));var d=Gm(t).queue;Ym(t,d,s,se,a===null?CS:function(){return Vm(t),a(o)})}function Gm(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:se},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:us,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Vm(t){var s=Gm(t).next.queue;Va(t,s,{},sn())}function od(){return Mt(cl)}function Qm(){return at().memoizedState}function Pm(){return at().memoizedState}function TS(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=sn();t=Ns(a);var o=Ms(s,t,a);o!==null&&(rn(o,s,a),Ba(o,s,a)),s={cache:Iu()},t.payload=s;return}s=s.return}}function DS(t,s,a){var o=sn();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Ao(t)?Km(s,a):(a=Au(t,s,a,o),a!==null&&(rn(a,t,o),Fm(a,s,o)))}function Xm(t,s,a){var o=sn();Va(t,s,a,o)}function Va(t,s,a,o){var d={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Ao(t))Km(s,d);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=s.lastRenderedReducer,f!==null))try{var v=s.lastRenderedState,S=f(v,a);if(d.hasEagerState=!0,d.eagerState=S,Zt(S,v))return uo(t,s,d,0),qe===null&&co(),!1}catch{}finally{}if(a=Au(t,s,d,o),a!==null)return rn(a,t,o),Fm(a,s,o),!0}return!1}function cd(t,s,a,o){if(o={lane:2,revertLane:qd(),action:o,hasEagerState:!1,eagerState:null,next:null},Ao(t)){if(s)throw Error(r(479))}else s=Au(t,a,o,2),s!==null&&rn(s,t,2)}function Ao(t){var s=t.alternate;return t===ge||s!==null&&s===ge}function Km(t,s){wr=_o=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Fm(t,s,a){if((a&4194048)!==0){var o=s.lanes;o&=t.pendingLanes,a|=o,s.lanes=a,Jt(t,a)}}var Ro={readContext:Mt,use:xo,useCallback:We,useContext:We,useEffect:We,useImperativeHandle:We,useLayoutEffect:We,useInsertionEffect:We,useMemo:We,useReducer:We,useRef:We,useState:We,useDebugValue:We,useDeferredValue:We,useTransition:We,useSyncExternalStore:We,useId:We,useHostTransitionStatus:We,useFormState:We,useActionState:We,useOptimistic:We,useMemoCache:We,useCacheRefresh:We},Jm={readContext:Mt,use:xo,useCallback:function(t,s){return Vt().memoizedState=[t,s===void 0?null:s],t},useContext:Mt,useEffect:Nm,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,Do(4194308,4,Im.bind(null,s,t),a)},useLayoutEffect:function(t,s){return Do(4194308,4,t,s)},useInsertionEffect:function(t,s){Do(4,2,t,s)},useMemo:function(t,s){var a=Vt();s=s===void 0?null:s;var o=t();if(Di){lt(!0);try{t()}finally{lt(!1)}}return a.memoizedState=[o,s],o},useReducer:function(t,s,a){var o=Vt();if(a!==void 0){var d=a(s);if(Di){lt(!0);try{a(s)}finally{lt(!1)}}}else d=s;return o.memoizedState=o.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},o.queue=t,t=t.dispatch=DS.bind(null,ge,t),[o.memoizedState,t]},useRef:function(t){var s=Vt();return t={current:t},s.memoizedState=t},useState:function(t){t=sd(t);var s=t.queue,a=Xm.bind(null,ge,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:rd,useDeferredValue:function(t,s){var a=Vt();return ad(a,t,s)},useTransition:function(){var t=sd(!1);return t=Ym.bind(null,ge,t.queue,!0,!1),Vt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var o=ge,d=Vt();if(Oe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),qe===null)throw Error(r(349));(Te&124)!==0||vm(o,s,a)}d.memoizedState=a;var f={value:a,getSnapshot:s};return d.queue=f,Nm(wm.bind(null,o,f,t),[t]),o.flags|=2048,_r(9,To(),bm.bind(null,o,f,a,s),null),a},useId:function(){var t=Vt(),s=qe.identifierPrefix;if(Oe){var a=ls,o=as;a=(o&~(1<<32-Ke(o)-1)).toString(32)+a,s="«"+s+"R"+a,a=Eo++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=SS++,s="«"+s+"r"+a.toString(32)+"»";return t.memoizedState=s},useHostTransitionStatus:od,useFormState:Rm,useActionState:Rm,useOptimistic:function(t){var s=Vt();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=cd.bind(null,ge,!0,a),a.dispatch=s,[t,s]},useMemoCache:ed,useCacheRefresh:function(){return Vt().memoizedState=TS.bind(null,ge)}},Zm={readContext:Mt,use:xo,useCallback:zm,useContext:Mt,useEffect:Mm,useImperativeHandle:Bm,useInsertionEffect:Um,useLayoutEffect:$m,useMemo:qm,useReducer:Co,useRef:km,useState:function(){return Co(us)},useDebugValue:rd,useDeferredValue:function(t,s){var a=at();return Hm(a,Me.memoizedState,t,s)},useTransition:function(){var t=Co(us)[0],s=at().memoizedState;return[typeof t=="boolean"?t:Ya(t),s]},useSyncExternalStore:ym,useId:Qm,useHostTransitionStatus:od,useFormState:jm,useActionState:jm,useOptimistic:function(t,s){var a=at();return Em(a,Me,t,s)},useMemoCache:ed,useCacheRefresh:Pm},AS={readContext:Mt,use:xo,useCallback:zm,useContext:Mt,useEffect:Mm,useImperativeHandle:Bm,useInsertionEffect:Um,useLayoutEffect:$m,useMemo:qm,useReducer:nd,useRef:km,useState:function(){return nd(us)},useDebugValue:rd,useDeferredValue:function(t,s){var a=at();return Me===null?ad(a,t,s):Hm(a,Me.memoizedState,t,s)},useTransition:function(){var t=nd(us)[0],s=at().memoizedState;return[typeof t=="boolean"?t:Ya(t),s]},useSyncExternalStore:ym,useId:Qm,useHostTransitionStatus:od,useFormState:Lm,useActionState:Lm,useOptimistic:function(t,s){var a=at();return Me!==null?Em(a,Me,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:ed,useCacheRefresh:Pm},Er=null,Qa=0;function jo(t){var s=Qa;return Qa+=1,Er===null&&(Er=[]),cm(Er,t,s)}function Pa(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function Oo(t,s){throw s.$$typeof===y?Error(r(525)):(t=Object.prototype.toString.call(s),Error(r(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Wm(t){var s=t._init;return s(t._payload)}function ep(t){function s(O,R){if(t){var L=O.deletions;L===null?(O.deletions=[R],O.flags|=16):L.push(R)}}function a(O,R){if(!t)return null;for(;R!==null;)s(O,R),R=R.sibling;return null}function o(O){for(var R=new Map;O!==null;)O.key!==null?R.set(O.key,O):R.set(O.index,O),O=O.sibling;return R}function d(O,R){return O=rs(O,R),O.index=0,O.sibling=null,O}function f(O,R,L){return O.index=L,t?(L=O.alternate,L!==null?(L=L.index,L<R?(O.flags|=67108866,R):L):(O.flags|=67108866,R)):(O.flags|=1048576,R)}function v(O){return t&&O.alternate===null&&(O.flags|=67108866),O}function S(O,R,L,G){return R===null||R.tag!==6?(R=ju(L,O.mode,G),R.return=O,R):(R=d(R,L),R.return=O,R)}function D(O,R,L,G){var ne=L.type;return ne===C?q(O,R,L.props.children,G,L.key):R!==null&&(R.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===W&&Wm(ne)===R.type)?(R=d(R,L.props),Pa(R,L),R.return=O,R):(R=fo(L.type,L.key,L.props,null,O.mode,G),Pa(R,L),R.return=O,R)}function k(O,R,L,G){return R===null||R.tag!==4||R.stateNode.containerInfo!==L.containerInfo||R.stateNode.implementation!==L.implementation?(R=Ou(L,O.mode,G),R.return=O,R):(R=d(R,L.children||[]),R.return=O,R)}function q(O,R,L,G,ne){return R===null||R.tag!==7?(R=bi(L,O.mode,G,ne),R.return=O,R):(R=d(R,L),R.return=O,R)}function Q(O,R,L){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=ju(""+R,O.mode,L),R.return=O,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case w:return L=fo(R.type,R.key,R.props,null,O.mode,L),Pa(L,R),L.return=O,L;case _:return R=Ou(R,O.mode,L),R.return=O,R;case W:var G=R._init;return R=G(R._payload),Q(O,R,L)}if(Ie(R)||me(R))return R=bi(R,O.mode,L,null),R.return=O,R;if(typeof R.then=="function")return Q(O,jo(R),L);if(R.$$typeof===$)return Q(O,yo(O,R),L);Oo(O,R)}return null}function N(O,R,L,G){var ne=R!==null?R.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return ne!==null?null:S(O,R,""+L,G);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case w:return L.key===ne?D(O,R,L,G):null;case _:return L.key===ne?k(O,R,L,G):null;case W:return ne=L._init,L=ne(L._payload),N(O,R,L,G)}if(Ie(L)||me(L))return ne!==null?null:q(O,R,L,G,null);if(typeof L.then=="function")return N(O,R,jo(L),G);if(L.$$typeof===$)return N(O,R,yo(O,L),G);Oo(O,L)}return null}function M(O,R,L,G,ne){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return O=O.get(L)||null,S(R,O,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return O=O.get(G.key===null?L:G.key)||null,D(R,O,G,ne);case _:return O=O.get(G.key===null?L:G.key)||null,k(R,O,G,ne);case W:var pe=G._init;return G=pe(G._payload),M(O,R,L,G,ne)}if(Ie(G)||me(G))return O=O.get(L)||null,q(R,O,G,ne,null);if(typeof G.then=="function")return M(O,R,L,jo(G),ne);if(G.$$typeof===$)return M(O,R,L,yo(R,G),ne);Oo(R,G)}return null}function oe(O,R,L,G){for(var ne=null,pe=null,ie=R,le=R=0,St=null;ie!==null&&le<L.length;le++){ie.index>le?(St=ie,ie=null):St=ie.sibling;var Re=N(O,ie,L[le],G);if(Re===null){ie===null&&(ie=St);break}t&&ie&&Re.alternate===null&&s(O,ie),R=f(Re,R,le),pe===null?ne=Re:pe.sibling=Re,pe=Re,ie=St}if(le===L.length)return a(O,ie),Oe&&Si(O,le),ne;if(ie===null){for(;le<L.length;le++)ie=Q(O,L[le],G),ie!==null&&(R=f(ie,R,le),pe===null?ne=ie:pe.sibling=ie,pe=ie);return Oe&&Si(O,le),ne}for(ie=o(ie);le<L.length;le++)St=M(ie,O,le,L[le],G),St!==null&&(t&&St.alternate!==null&&ie.delete(St.key===null?le:St.key),R=f(St,R,le),pe===null?ne=St:pe.sibling=St,pe=St);return t&&ie.forEach(function(Zs){return s(O,Zs)}),Oe&&Si(O,le),ne}function re(O,R,L,G){if(L==null)throw Error(r(151));for(var ne=null,pe=null,ie=R,le=R=0,St=null,Re=L.next();ie!==null&&!Re.done;le++,Re=L.next()){ie.index>le?(St=ie,ie=null):St=ie.sibling;var Zs=N(O,ie,Re.value,G);if(Zs===null){ie===null&&(ie=St);break}t&&ie&&Zs.alternate===null&&s(O,ie),R=f(Zs,R,le),pe===null?ne=Zs:pe.sibling=Zs,pe=Zs,ie=St}if(Re.done)return a(O,ie),Oe&&Si(O,le),ne;if(ie===null){for(;!Re.done;le++,Re=L.next())Re=Q(O,Re.value,G),Re!==null&&(R=f(Re,R,le),pe===null?ne=Re:pe.sibling=Re,pe=Re);return Oe&&Si(O,le),ne}for(ie=o(ie);!Re.done;le++,Re=L.next())Re=M(ie,O,le,Re.value,G),Re!==null&&(t&&Re.alternate!==null&&ie.delete(Re.key===null?le:Re.key),R=f(Re,R,le),pe===null?ne=Re:pe.sibling=Re,pe=Re);return t&&ie.forEach(function(R_){return s(O,R_)}),Oe&&Si(O,le),ne}function $e(O,R,L,G){if(typeof L=="object"&&L!==null&&L.type===C&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case w:e:{for(var ne=L.key;R!==null;){if(R.key===ne){if(ne=L.type,ne===C){if(R.tag===7){a(O,R.sibling),G=d(R,L.props.children),G.return=O,O=G;break e}}else if(R.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===W&&Wm(ne)===R.type){a(O,R.sibling),G=d(R,L.props),Pa(G,L),G.return=O,O=G;break e}a(O,R);break}else s(O,R);R=R.sibling}L.type===C?(G=bi(L.props.children,O.mode,G,L.key),G.return=O,O=G):(G=fo(L.type,L.key,L.props,null,O.mode,G),Pa(G,L),G.return=O,O=G)}return v(O);case _:e:{for(ne=L.key;R!==null;){if(R.key===ne)if(R.tag===4&&R.stateNode.containerInfo===L.containerInfo&&R.stateNode.implementation===L.implementation){a(O,R.sibling),G=d(R,L.children||[]),G.return=O,O=G;break e}else{a(O,R);break}else s(O,R);R=R.sibling}G=Ou(L,O.mode,G),G.return=O,O=G}return v(O);case W:return ne=L._init,L=ne(L._payload),$e(O,R,L,G)}if(Ie(L))return oe(O,R,L,G);if(me(L)){if(ne=me(L),typeof ne!="function")throw Error(r(150));return L=ne.call(L),re(O,R,L,G)}if(typeof L.then=="function")return $e(O,R,jo(L),G);if(L.$$typeof===$)return $e(O,R,yo(O,L),G);Oo(O,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,R!==null&&R.tag===6?(a(O,R.sibling),G=d(R,L),G.return=O,O=G):(a(O,R),G=ju(L,O.mode,G),G.return=O,O=G),v(O)):a(O,R)}return function(O,R,L,G){try{Qa=0;var ne=$e(O,R,L,G);return Er=null,ne}catch(ie){if(ie===$a||ie===bo)throw ie;var pe=Wt(29,ie,null,O.mode);return pe.lanes=G,pe.return=O,pe}finally{}}}var xr=ep(!0),tp=ep(!1),bn=B(null),zn=null;function $s(t){var s=t.alternate;Y(ct,ct.current&1),Y(bn,t),zn===null&&(s===null||br.current!==null||s.memoizedState!==null)&&(zn=t)}function np(t){if(t.tag===22){if(Y(ct,ct.current),Y(bn,t),zn===null){var s=t.alternate;s!==null&&s.memoizedState!==null&&(zn=t)}}else Is()}function Is(){Y(ct,ct.current),Y(bn,bn.current)}function ds(t){V(bn),zn===t&&(zn=null),V(ct)}var ct=B(0);function Lo(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Wd(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function ud(t,s,a,o){s=t.memoizedState,a=a(o,s),a=a==null?s:p({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var dd={enqueueSetState:function(t,s,a){t=t._reactInternals;var o=sn(),d=Ns(o);d.payload=s,a!=null&&(d.callback=a),s=Ms(t,d,o),s!==null&&(rn(s,t,o),Ba(s,t,o))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var o=sn(),d=Ns(o);d.tag=1,d.payload=s,a!=null&&(d.callback=a),s=Ms(t,d,o),s!==null&&(rn(s,t,o),Ba(s,t,o))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=sn(),o=Ns(a);o.tag=2,s!=null&&(o.callback=s),s=Ms(t,o,a),s!==null&&(rn(s,t,a),Ba(s,t,a))}};function sp(t,s,a,o,d,f,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,f,v):s.prototype&&s.prototype.isPureReactComponent?!Ra(a,o)||!Ra(d,f):!0}function ip(t,s,a,o){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,o),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,o),s.state!==t&&dd.enqueueReplaceState(s,s.state,null)}function Ai(t,s){var a=s;if("ref"in s){a={};for(var o in s)o!=="ref"&&(a[o]=s[o])}if(t=t.defaultProps){a===s&&(a=p({},a));for(var d in t)a[d]===void 0&&(a[d]=t[d])}return a}var ko=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function rp(t){ko(t)}function ap(t){console.error(t)}function lp(t){ko(t)}function No(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(o){setTimeout(function(){throw o})}}function op(t,s,a){try{var o=t.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function hd(t,s,a){return a=Ns(a),a.tag=3,a.payload={element:null},a.callback=function(){No(t,s)},a}function cp(t){return t=Ns(t),t.tag=3,t}function up(t,s,a,o){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var f=o.value;t.payload=function(){return d(f)},t.callback=function(){op(s,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){op(s,a,o),typeof d!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})})}function RS(t,s,a,o,d){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(s=a.alternate,s!==null&&Na(s,a,d,!0),a=bn.current,a!==null){switch(a.tag){case 13:return zn===null?Ud():a.alternate===null&&Je===0&&(Je=3),a.flags&=-257,a.flags|=65536,a.lanes=d,o===qu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([o]):s.add(o),Id(t,o,d)),!1;case 22:return a.flags|=65536,o===qu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([o]):a.add(o)),Id(t,o,d)),!1}throw Error(r(435,a.tag))}return Id(t,o,d),Ud(),!1}if(Oe)return s=bn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,o!==Nu&&(t=Error(r(422),{cause:o}),ka(mn(t,a)))):(o!==Nu&&(s=Error(r(423),{cause:o}),ka(mn(s,a))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,o=mn(o,a),d=hd(t.stateNode,o,d),Gu(t,d),Je!==4&&(Je=2)),!1;var f=Error(r(520),{cause:o});if(f=mn(f,a),el===null?el=[f]:el.push(f),Je!==4&&(Je=2),s===null)return!0;o=mn(o,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=d&-d,a.lanes|=t,t=hd(a.stateNode,o,t),Gu(a,t),!1;case 1:if(s=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Gs===null||!Gs.has(f))))return a.flags|=65536,d&=-d,a.lanes|=d,d=cp(d),up(d,t,a,o),Gu(a,d),!1}a=a.return}while(a!==null);return!1}var dp=Error(r(461)),bt=!1;function Dt(t,s,a,o){s.child=t===null?tp(s,null,a,o):xr(s,t.child,a,o)}function hp(t,s,a,o,d){a=a.render;var f=s.ref;if("ref"in o){var v={};for(var S in o)S!=="ref"&&(v[S]=o[S])}else v=o;return Ci(s),o=Ku(t,s,a,v,f,d),S=Fu(),t!==null&&!bt?(Ju(t,s,d),hs(t,s,d)):(Oe&&S&&Lu(s),s.flags|=1,Dt(t,s,o,d),s.child)}function fp(t,s,a,o,d){if(t===null){var f=a.type;return typeof f=="function"&&!Ru(f)&&f.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=f,gp(t,s,f,o,d)):(t=fo(a.type,null,o,s,s.mode,d),t.ref=s.ref,t.return=s,s.child=t)}if(f=t.child,!wd(t,d)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Ra,a(v,o)&&t.ref===s.ref)return hs(t,s,d)}return s.flags|=1,t=rs(f,o),t.ref=s.ref,t.return=s,s.child=t}function gp(t,s,a,o,d){if(t!==null){var f=t.memoizedProps;if(Ra(f,o)&&t.ref===s.ref)if(bt=!1,s.pendingProps=o=f,wd(t,d))(t.flags&131072)!==0&&(bt=!0);else return s.lanes=t.lanes,hs(t,s,d)}return fd(t,s,a,o,d)}function mp(t,s,a){var o=s.pendingProps,d=o.children,f=t!==null?t.memoizedState:null;if(o.mode==="hidden"){if((s.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,t!==null){for(d=s.child=t.child,f=0;d!==null;)f=f|d.lanes|d.childLanes,d=d.sibling;s.childLanes=f&~o}else s.childLanes=0,s.child=null;return pp(t,s,o,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&vo(s,f!==null?f.cachePool:null),f!==null?gm(s,f):Qu(),np(s);else return s.lanes=s.childLanes=536870912,pp(t,s,f!==null?f.baseLanes|a:a,a)}else f!==null?(vo(s,f.cachePool),gm(s,f),Is(),s.memoizedState=null):(t!==null&&vo(s,null),Qu(),Is());return Dt(t,s,d,a),s.child}function pp(t,s,a,o){var d=zu();return d=d===null?null:{parent:ot._currentValue,pool:d},s.memoizedState={baseLanes:a,cachePool:d},t!==null&&vo(s,null),Qu(),np(s),t!==null&&Na(t,s,o,!0),null}function Mo(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function fd(t,s,a,o,d){return Ci(s),a=Ku(t,s,a,o,void 0,d),o=Fu(),t!==null&&!bt?(Ju(t,s,d),hs(t,s,d)):(Oe&&o&&Lu(s),s.flags|=1,Dt(t,s,a,d),s.child)}function yp(t,s,a,o,d,f){return Ci(s),s.updateQueue=null,a=pm(s,o,a,d),mm(t),o=Fu(),t!==null&&!bt?(Ju(t,s,f),hs(t,s,f)):(Oe&&o&&Lu(s),s.flags|=1,Dt(t,s,a,f),s.child)}function vp(t,s,a,o,d){if(Ci(s),s.stateNode===null){var f=gr,v=a.contextType;typeof v=="object"&&v!==null&&(f=Mt(v)),f=new a(o,f),s.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=dd,s.stateNode=f,f._reactInternals=s,f=s.stateNode,f.props=o,f.state=s.memoizedState,f.refs={},Hu(s),v=a.contextType,f.context=typeof v=="object"&&v!==null?Mt(v):gr,f.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(ud(s,a,v,o),f.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&dd.enqueueReplaceState(f,f.state,null),qa(s,o,f,d),za(),f.state=s.memoizedState),typeof f.componentDidMount=="function"&&(s.flags|=4194308),o=!0}else if(t===null){f=s.stateNode;var S=s.memoizedProps,D=Ai(a,S);f.props=D;var k=f.context,q=a.contextType;v=gr,typeof q=="object"&&q!==null&&(v=Mt(q));var Q=a.getDerivedStateFromProps;q=typeof Q=="function"||typeof f.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,q||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S||k!==v)&&ip(s,f,o,v),ks=!1;var N=s.memoizedState;f.state=N,qa(s,o,f,d),za(),k=s.memoizedState,S||N!==k||ks?(typeof Q=="function"&&(ud(s,a,Q,o),k=s.memoizedState),(D=ks||sp(s,a,D,o,N,k,v))?(q||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(s.flags|=4194308)):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=o,s.memoizedState=k),f.props=o,f.state=k,f.context=v,o=D):(typeof f.componentDidMount=="function"&&(s.flags|=4194308),o=!1)}else{f=s.stateNode,Yu(t,s),v=s.memoizedProps,q=Ai(a,v),f.props=q,Q=s.pendingProps,N=f.context,k=a.contextType,D=gr,typeof k=="object"&&k!==null&&(D=Mt(k)),S=a.getDerivedStateFromProps,(k=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==Q||N!==D)&&ip(s,f,o,D),ks=!1,N=s.memoizedState,f.state=N,qa(s,o,f,d),za();var M=s.memoizedState;v!==Q||N!==M||ks||t!==null&&t.dependencies!==null&&po(t.dependencies)?(typeof S=="function"&&(ud(s,a,S,o),M=s.memoizedState),(q=ks||sp(s,a,q,o,N,M,D)||t!==null&&t.dependencies!==null&&po(t.dependencies))?(k||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,M,D),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,M,D)),typeof f.componentDidUpdate=="function"&&(s.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&N===t.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&N===t.memoizedState||(s.flags|=1024),s.memoizedProps=o,s.memoizedState=M),f.props=o,f.state=M,f.context=D,o=q):(typeof f.componentDidUpdate!="function"||v===t.memoizedProps&&N===t.memoizedState||(s.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&N===t.memoizedState||(s.flags|=1024),o=!1)}return f=o,Mo(t,s),o=(s.flags&128)!==0,f||o?(f=s.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),s.flags|=1,t!==null&&o?(s.child=xr(s,t.child,null,d),s.child=xr(s,null,a,d)):Dt(t,s,a,d),s.memoizedState=f.state,t=s.child):t=hs(t,s,d),t}function bp(t,s,a,o){return La(),s.flags|=256,Dt(t,s,a,o),s.child}var gd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function md(t){return{baseLanes:t,cachePool:am()}}function pd(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=wn),t}function wp(t,s,a){var o=s.pendingProps,d=!1,f=(s.flags&128)!==0,v;if((v=f)||(v=t!==null&&t.memoizedState===null?!1:(ct.current&2)!==0),v&&(d=!0,s.flags&=-129),v=(s.flags&32)!==0,s.flags&=-33,t===null){if(Oe){if(d?$s(s):Is(),Oe){var S=Fe,D;if(D=S){e:{for(D=S,S=Bn;D.nodeType!==8;){if(!S){S=null;break e}if(D=Rn(D.nextSibling),D===null){S=null;break e}}S=D}S!==null?(s.memoizedState={dehydrated:S,treeContext:wi!==null?{id:as,overflow:ls}:null,retryLane:536870912,hydrationErrors:null},D=Wt(18,null,null,0),D.stateNode=S,D.return=s,s.child=D,qt=s,Fe=null,D=!0):D=!1}D||Ei(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return Wd(S)?s.lanes=32:s.lanes=536870912,null;ds(s)}return S=o.children,o=o.fallback,d?(Is(),d=s.mode,S=Uo({mode:"hidden",children:S},d),o=bi(o,d,a,null),S.return=s,o.return=s,S.sibling=o,s.child=S,d=s.child,d.memoizedState=md(a),d.childLanes=pd(t,v,a),s.memoizedState=gd,o):($s(s),yd(s,S))}if(D=t.memoizedState,D!==null&&(S=D.dehydrated,S!==null)){if(f)s.flags&256?($s(s),s.flags&=-257,s=vd(t,s,a)):s.memoizedState!==null?(Is(),s.child=t.child,s.flags|=128,s=null):(Is(),d=o.fallback,S=s.mode,o=Uo({mode:"visible",children:o.children},S),d=bi(d,S,a,null),d.flags|=2,o.return=s,d.return=s,o.sibling=d,s.child=o,xr(s,t.child,null,a),o=s.child,o.memoizedState=md(a),o.childLanes=pd(t,v,a),s.memoizedState=gd,s=d);else if($s(s),Wd(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var k=v.dgst;v=k,o=Error(r(419)),o.stack="",o.digest=v,ka({value:o,source:null,stack:null}),s=vd(t,s,a)}else if(bt||Na(t,s,a,!1),v=(a&t.childLanes)!==0,bt||v){if(v=qe,v!==null&&(o=a&-a,o=(o&42)!==0?1:pt(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==D.retryLane))throw D.retryLane=o,fr(t,o),rn(v,t,o),dp;S.data==="$?"||Ud(),s=vd(t,s,a)}else S.data==="$?"?(s.flags|=192,s.child=t.child,s=null):(t=D.treeContext,Fe=Rn(S.nextSibling),qt=s,Oe=!0,_i=null,Bn=!1,t!==null&&(yn[vn++]=as,yn[vn++]=ls,yn[vn++]=wi,as=t.id,ls=t.overflow,wi=s),s=yd(s,o.children),s.flags|=4096);return s}return d?(Is(),d=o.fallback,S=s.mode,D=t.child,k=D.sibling,o=rs(D,{mode:"hidden",children:o.children}),o.subtreeFlags=D.subtreeFlags&65011712,k!==null?d=rs(k,d):(d=bi(d,S,a,null),d.flags|=2),d.return=s,o.return=s,o.sibling=d,s.child=o,o=d,d=s.child,S=t.child.memoizedState,S===null?S=md(a):(D=S.cachePool,D!==null?(k=ot._currentValue,D=D.parent!==k?{parent:k,pool:k}:D):D=am(),S={baseLanes:S.baseLanes|a,cachePool:D}),d.memoizedState=S,d.childLanes=pd(t,v,a),s.memoizedState=gd,o):($s(s),a=t.child,t=a.sibling,a=rs(a,{mode:"visible",children:o.children}),a.return=s,a.sibling=null,t!==null&&(v=s.deletions,v===null?(s.deletions=[t],s.flags|=16):v.push(t)),s.child=a,s.memoizedState=null,a)}function yd(t,s){return s=Uo({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function Uo(t,s){return t=Wt(22,t,null,s),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function vd(t,s,a){return xr(s,t.child,null,a),t=yd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Sp(t,s,a){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s),Uu(t.return,s,a)}function bd(t,s,a,o,d){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:d}:(f.isBackwards=s,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=d)}function _p(t,s,a){var o=s.pendingProps,d=o.revealOrder,f=o.tail;if(Dt(t,s,o.children,a),o=ct.current,(o&2)!==0)o=o&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Sp(t,a,s);else if(t.tag===19)Sp(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}switch(Y(ct,o),d){case"forwards":for(a=s.child,d=null;a!==null;)t=a.alternate,t!==null&&Lo(t)===null&&(d=a),a=a.sibling;a=d,a===null?(d=s.child,s.child=null):(d=a.sibling,a.sibling=null),bd(s,!1,d,a,f);break;case"backwards":for(a=null,d=s.child,s.child=null;d!==null;){if(t=d.alternate,t!==null&&Lo(t)===null){s.child=d;break}t=d.sibling,d.sibling=a,a=d,d=t}bd(s,!0,a,null,f);break;case"together":bd(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function hs(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),Ys|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Na(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(r(153));if(s.child!==null){for(t=s.child,a=rs(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=rs(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function wd(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&po(t)))}function jS(t,s,a){switch(s.tag){case 3:Se(s,s.stateNode.containerInfo),Ls(s,ot,t.memoizedState.cache),La();break;case 27:case 5:Ce(s);break;case 4:Se(s,s.stateNode.containerInfo);break;case 10:Ls(s,s.type,s.memoizedProps.value);break;case 13:var o=s.memoizedState;if(o!==null)return o.dehydrated!==null?($s(s),s.flags|=128,null):(a&s.child.childLanes)!==0?wp(t,s,a):($s(s),t=hs(t,s,a),t!==null?t.sibling:null);$s(s);break;case 19:var d=(t.flags&128)!==0;if(o=(a&s.childLanes)!==0,o||(Na(t,s,a,!1),o=(a&s.childLanes)!==0),d){if(o)return _p(t,s,a);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Y(ct,ct.current),o)break;return null;case 22:case 23:return s.lanes=0,mp(t,s,a);case 24:Ls(s,ot,t.memoizedState.cache)}return hs(t,s,a)}function Ep(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)bt=!0;else{if(!wd(t,a)&&(s.flags&128)===0)return bt=!1,jS(t,s,a);bt=(t.flags&131072)!==0}else bt=!1,Oe&&(s.flags&1048576)!==0&&Wg(s,mo,s.index);switch(s.lanes=0,s.tag){case 16:e:{t=s.pendingProps;var o=s.elementType,d=o._init;if(o=d(o._payload),s.type=o,typeof o=="function")Ru(o)?(t=Ai(o,t),s.tag=1,s=vp(null,s,o,t,a)):(s.tag=0,s=fd(null,s,o,t,a));else{if(o!=null){if(d=o.$$typeof,d===H){s.tag=11,s=hp(null,s,o,t,a);break e}else if(d===F){s.tag=14,s=fp(null,s,o,t,a);break e}}throw s=Xe(o)||o,Error(r(306,s,""))}}return s;case 0:return fd(t,s,s.type,s.pendingProps,a);case 1:return o=s.type,d=Ai(o,s.pendingProps),vp(t,s,o,d,a);case 3:e:{if(Se(s,s.stateNode.containerInfo),t===null)throw Error(r(387));o=s.pendingProps;var f=s.memoizedState;d=f.element,Yu(t,s),qa(s,o,null,a);var v=s.memoizedState;if(o=v.cache,Ls(s,ot,o),o!==f.cache&&$u(s,[ot],a,!0),za(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},s.updateQueue.baseState=f,s.memoizedState=f,s.flags&256){s=bp(t,s,o,a);break e}else if(o!==d){d=mn(Error(r(424)),s),ka(d),s=bp(t,s,o,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Fe=Rn(t.firstChild),qt=s,Oe=!0,_i=null,Bn=!0,a=tp(s,null,o,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(La(),o===d){s=hs(t,s,a);break e}Dt(t,s,o,a)}s=s.child}return s;case 26:return Mo(t,s),t===null?(a=Dy(s.type,null,s.pendingProps,null))?s.memoizedState=a:Oe||(a=s.type,t=s.pendingProps,o=Fo(te.current).createElement(a),o[Ae]=s,o[Ge]=t,Rt(o,a,t),vt(o),s.stateNode=o):s.memoizedState=Dy(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Ce(s),t===null&&Oe&&(o=s.stateNode=xy(s.type,s.pendingProps,te.current),qt=s,Bn=!0,d=Fe,Ps(s.type)?(eh=d,Fe=Rn(o.firstChild)):Fe=d),Dt(t,s,s.pendingProps.children,a),Mo(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Oe&&((d=o=Fe)&&(o=i_(o,s.type,s.pendingProps,Bn),o!==null?(s.stateNode=o,qt=s,Fe=Rn(o.firstChild),Bn=!1,d=!0):d=!1),d||Ei(s)),Ce(s),d=s.type,f=s.pendingProps,v=t!==null?t.memoizedProps:null,o=f.children,Fd(d,f)?o=null:v!==null&&Fd(d,v)&&(s.flags|=32),s.memoizedState!==null&&(d=Ku(t,s,_S,null,null,a),cl._currentValue=d),Mo(t,s),Dt(t,s,o,a),s.child;case 6:return t===null&&Oe&&((t=a=Fe)&&(a=r_(a,s.pendingProps,Bn),a!==null?(s.stateNode=a,qt=s,Fe=null,t=!0):t=!1),t||Ei(s)),null;case 13:return wp(t,s,a);case 4:return Se(s,s.stateNode.containerInfo),o=s.pendingProps,t===null?s.child=xr(s,null,o,a):Dt(t,s,o,a),s.child;case 11:return hp(t,s,s.type,s.pendingProps,a);case 7:return Dt(t,s,s.pendingProps,a),s.child;case 8:return Dt(t,s,s.pendingProps.children,a),s.child;case 12:return Dt(t,s,s.pendingProps.children,a),s.child;case 10:return o=s.pendingProps,Ls(s,s.type,o.value),Dt(t,s,o.children,a),s.child;case 9:return d=s.type._context,o=s.pendingProps.children,Ci(s),d=Mt(d),o=o(d),s.flags|=1,Dt(t,s,o,a),s.child;case 14:return fp(t,s,s.type,s.pendingProps,a);case 15:return gp(t,s,s.type,s.pendingProps,a);case 19:return _p(t,s,a);case 31:return o=s.pendingProps,a=s.mode,o={mode:o.mode,children:o.children},t===null?(a=Uo(o,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=rs(t.child,o),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return mp(t,s,a);case 24:return Ci(s),o=Mt(ot),t===null?(d=zu(),d===null&&(d=qe,f=Iu(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=a),d=f),s.memoizedState={parent:o,cache:d},Hu(s),Ls(s,ot,d)):((t.lanes&a)!==0&&(Yu(t,s),qa(s,null,null,a),za()),d=t.memoizedState,f=s.memoizedState,d.parent!==o?(d={parent:o,cache:o},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),Ls(s,ot,o)):(o=f.cache,Ls(s,ot,o),o!==d.cache&&$u(s,[ot],a,!0))),Dt(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function fs(t){t.flags|=4}function xp(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ly(s)){if(s=bn.current,s!==null&&((Te&4194048)===Te?zn!==null:(Te&62914560)!==Te&&(Te&536870912)===0||s!==zn))throw Ia=qu,lm;t.flags|=8192}}function $o(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Wi():536870912,t.lanes|=s,Ar|=s)}function Xa(t,s){if(!Oe)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Pe(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,o=0;if(s)for(var d=t.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=o,t.childLanes=a,s}function OS(t,s,a){var o=s.pendingProps;switch(ku(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pe(s),null;case 1:return Pe(s),null;case 3:return a=s.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),cs(ot),st(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Oa(s)?fs(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,nm())),Pe(s),null;case 26:return a=s.memoizedState,t===null?(fs(s),a!==null?(Pe(s),xp(s,a)):(Pe(s),s.flags&=-16777217)):a?a!==t.memoizedState?(fs(s),Pe(s),xp(s,a)):(Pe(s),s.flags&=-16777217):(t.memoizedProps!==o&&fs(s),Pe(s),s.flags&=-16777217),null;case 27:un(s),a=te.current;var d=s.type;if(t!==null&&s.stateNode!=null)t.memoizedProps!==o&&fs(s);else{if(!o){if(s.stateNode===null)throw Error(r(166));return Pe(s),null}t=J.current,Oa(s)?em(s):(t=xy(d,o,a),s.stateNode=t,fs(s))}return Pe(s),null;case 5:if(un(s),a=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==o&&fs(s);else{if(!o){if(s.stateNode===null)throw Error(r(166));return Pe(s),null}if(t=J.current,Oa(s))em(s);else{switch(d=Fo(te.current),t){case 1:t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof o.is=="string"?d.createElement("select",{is:o.is}):d.createElement("select"),o.multiple?t.multiple=!0:o.size&&(t.size=o.size);break;default:t=typeof o.is=="string"?d.createElement(a,{is:o.is}):d.createElement(a)}}t[Ae]=s,t[Ge]=o;e:for(d=s.child;d!==null;){if(d.tag===5||d.tag===6)t.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}s.stateNode=t;e:switch(Rt(t,a,o),a){case"button":case"input":case"select":case"textarea":t=!!o.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&fs(s)}}return Pe(s),s.flags&=-16777217,null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==o&&fs(s);else{if(typeof o!="string"&&s.stateNode===null)throw Error(r(166));if(t=te.current,Oa(s)){if(t=s.stateNode,a=s.memoizedProps,o=null,d=qt,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}t[Ae]=s,t=!!(t.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||yy(t.nodeValue,a)),t||Ei(s)}else t=Fo(t).createTextNode(o),t[Ae]=s,s.stateNode=t}return Pe(s),null;case 13:if(o=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Oa(s),o!==null&&o.dehydrated!==null){if(t===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Ae]=s}else La(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Pe(s),d=!1}else d=nm(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(ds(s),s):(ds(s),null)}if(ds(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=o!==null,t=t!==null&&t.memoizedState!==null,a){o=s.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==d&&(o.flags|=2048)}return a!==t&&a&&(s.child.flags|=8192),$o(s,s.updateQueue),Pe(s),null;case 4:return st(),t===null&&Vd(s.stateNode.containerInfo),Pe(s),null;case 10:return cs(s.type),Pe(s),null;case 19:if(V(ct),d=s.memoizedState,d===null)return Pe(s),null;if(o=(s.flags&128)!==0,f=d.rendering,f===null)if(o)Xa(d,!1);else{if(Je!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(f=Lo(t),f!==null){for(s.flags|=128,Xa(d,!1),t=f.updateQueue,s.updateQueue=t,$o(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Zg(a,t),a=a.sibling;return Y(ct,ct.current&1|2),s.child}t=t.sibling}d.tail!==null&&zt()>zo&&(s.flags|=128,o=!0,Xa(d,!1),s.lanes=4194304)}else{if(!o)if(t=Lo(f),t!==null){if(s.flags|=128,o=!0,t=t.updateQueue,s.updateQueue=t,$o(s,t),Xa(d,!0),d.tail===null&&d.tailMode==="hidden"&&!f.alternate&&!Oe)return Pe(s),null}else 2*zt()-d.renderingStartTime>zo&&a!==536870912&&(s.flags|=128,o=!0,Xa(d,!1),s.lanes=4194304);d.isBackwards?(f.sibling=s.child,s.child=f):(t=d.last,t!==null?t.sibling=f:s.child=f,d.last=f)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=zt(),s.sibling=null,t=ct.current,Y(ct,o?t&1|2:t&1),s):(Pe(s),null);case 22:case 23:return ds(s),Pu(),o=s.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(s.flags|=8192):o&&(s.flags|=8192),o?(a&536870912)!==0&&(s.flags&128)===0&&(Pe(s),s.subtreeFlags&6&&(s.flags|=8192)):Pe(s),a=s.updateQueue,a!==null&&$o(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==a&&(s.flags|=2048),t!==null&&V(Ti),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),cs(ot),Pe(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function LS(t,s){switch(ku(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return cs(ot),st(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return un(s),null;case 13:if(ds(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(r(340));La()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return V(ct),null;case 4:return st(),null;case 10:return cs(s.type),null;case 22:case 23:return ds(s),Pu(),t!==null&&V(Ti),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return cs(ot),null;case 25:return null;default:return null}}function Cp(t,s){switch(ku(s),s.tag){case 3:cs(ot),st();break;case 26:case 27:case 5:un(s);break;case 4:st();break;case 13:ds(s);break;case 19:V(ct);break;case 10:cs(s.type);break;case 22:case 23:ds(s),Pu(),t!==null&&V(Ti);break;case 24:cs(ot)}}function Ka(t,s){try{var a=s.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var d=o.next;a=d;do{if((a.tag&t)===t){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==d)}}catch(S){ze(s,s.return,S)}}function Bs(t,s,a){try{var o=s.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var f=d.next;o=f;do{if((o.tag&t)===t){var v=o.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,d=s;var D=a,k=S;try{k()}catch(q){ze(d,D,q)}}}o=o.next}while(o!==f)}}catch(q){ze(s,s.return,q)}}function Tp(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{fm(s,a)}catch(o){ze(t,t.return,o)}}}function Dp(t,s,a){a.props=Ai(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(o){ze(t,s,o)}}function Fa(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof a=="function"?t.refCleanup=a(o):a.current=o}}catch(d){ze(t,s,d)}}function qn(t,s){var a=t.ref,o=t.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(d){ze(t,s,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){ze(t,s,d)}else a.current=null}function Ap(t){var s=t.type,a=t.memoizedProps,o=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(d){ze(t,t.return,d)}}function Sd(t,s,a){try{var o=t.stateNode;WS(o,t.type,a,s),o[Ge]=s}catch(d){ze(t,t.return,d)}}function Rp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ps(t.type)||t.tag===4}function _d(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ps(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ed(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Ko));else if(o!==4&&(o===27&&Ps(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(Ed(t,s,a),t=t.sibling;t!==null;)Ed(t,s,a),t=t.sibling}function Io(t,s,a){var o=t.tag;if(o===5||o===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(o!==4&&(o===27&&Ps(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Io(t,s,a),t=t.sibling;t!==null;)Io(t,s,a),t=t.sibling}function jp(t){var s=t.stateNode,a=t.memoizedProps;try{for(var o=t.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);Rt(s,o,a),s[Ae]=t,s[Ge]=a}catch(f){ze(t,t.return,f)}}var gs=!1,et=!1,xd=!1,Op=typeof WeakSet=="function"?WeakSet:Set,wt=null;function kS(t,s){if(t=t.containerInfo,Xd=nc,t=Hg(t),_u(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var d=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var v=0,S=-1,D=-1,k=0,q=0,Q=t,N=null;t:for(;;){for(var M;Q!==a||d!==0&&Q.nodeType!==3||(S=v+d),Q!==f||o!==0&&Q.nodeType!==3||(D=v+o),Q.nodeType===3&&(v+=Q.nodeValue.length),(M=Q.firstChild)!==null;)N=Q,Q=M;for(;;){if(Q===t)break t;if(N===a&&++k===d&&(S=v),N===f&&++q===o&&(D=v),(M=Q.nextSibling)!==null)break;Q=N,N=Q.parentNode}Q=M}a=S===-1||D===-1?null:{start:S,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Kd={focusedElem:t,selectionRange:a},nc=!1,wt=s;wt!==null;)if(s=wt,t=s.child,(s.subtreeFlags&1024)!==0&&t!==null)t.return=s,wt=t;else for(;wt!==null;){switch(s=wt,f=s.alternate,t=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=s,d=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var oe=Ai(a.type,d,a.elementType===a.type);t=o.getSnapshotBeforeUpdate(oe,f),o.__reactInternalSnapshotBeforeUpdate=t}catch(re){ze(a,a.return,re)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Zd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Zd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(r(163))}if(t=s.sibling,t!==null){t.return=s.return,wt=t;break}wt=s.return}}function Lp(t,s,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:zs(t,a),o&4&&Ka(5,a);break;case 1:if(zs(t,a),o&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(v){ze(a,a.return,v)}else{var d=Ai(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(d,s,t.__reactInternalSnapshotBeforeUpdate)}catch(v){ze(a,a.return,v)}}o&64&&Tp(a),o&512&&Fa(a,a.return);break;case 3:if(zs(t,a),o&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{fm(t,s)}catch(v){ze(a,a.return,v)}}break;case 27:s===null&&o&4&&jp(a);case 26:case 5:zs(t,a),s===null&&o&4&&Ap(a),o&512&&Fa(a,a.return);break;case 12:zs(t,a);break;case 13:zs(t,a),o&4&&Mp(t,a),o&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=HS.bind(null,a),a_(t,a))));break;case 22:if(o=a.memoizedState!==null||gs,!o){s=s!==null&&s.memoizedState!==null||et,d=gs;var f=et;gs=o,(et=s)&&!f?qs(t,a,(a.subtreeFlags&8772)!==0):zs(t,a),gs=d,et=f}break;case 30:break;default:zs(t,a)}}function kp(t){var s=t.alternate;s!==null&&(t.alternate=null,kp(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&su(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Qe=null,Qt=!1;function ms(t,s,a){for(a=a.child;a!==null;)Np(t,s,a),a=a.sibling}function Np(t,s,a){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(Yt,a)}catch{}switch(a.tag){case 26:et||qn(a,s),ms(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:et||qn(a,s);var o=Qe,d=Qt;Ps(a.type)&&(Qe=a.stateNode,Qt=!1),ms(t,s,a),rl(a.stateNode),Qe=o,Qt=d;break;case 5:et||qn(a,s);case 6:if(o=Qe,d=Qt,Qe=null,ms(t,s,a),Qe=o,Qt=d,Qe!==null)if(Qt)try{(Qe.nodeType===9?Qe.body:Qe.nodeName==="HTML"?Qe.ownerDocument.body:Qe).removeChild(a.stateNode)}catch(f){ze(a,s,f)}else try{Qe.removeChild(a.stateNode)}catch(f){ze(a,s,f)}break;case 18:Qe!==null&&(Qt?(t=Qe,_y(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),fl(t)):_y(Qe,a.stateNode));break;case 4:o=Qe,d=Qt,Qe=a.stateNode.containerInfo,Qt=!0,ms(t,s,a),Qe=o,Qt=d;break;case 0:case 11:case 14:case 15:et||Bs(2,a,s),et||Bs(4,a,s),ms(t,s,a);break;case 1:et||(qn(a,s),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Dp(a,s,o)),ms(t,s,a);break;case 21:ms(t,s,a);break;case 22:et=(o=et)||a.memoizedState!==null,ms(t,s,a),et=o;break;default:ms(t,s,a)}}function Mp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{fl(t)}catch(a){ze(s,s.return,a)}}function NS(t){switch(t.tag){case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Op),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Op),s;default:throw Error(r(435,t.tag))}}function Cd(t,s){var a=NS(t);s.forEach(function(o){var d=YS.bind(null,t,o);a.has(o)||(a.add(o),o.then(d,d))})}function en(t,s){var a=s.deletions;if(a!==null)for(var o=0;o<a.length;o++){var d=a[o],f=t,v=s,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(Ps(S.type)){Qe=S.stateNode,Qt=!1;break e}break;case 5:Qe=S.stateNode,Qt=!1;break e;case 3:case 4:Qe=S.stateNode.containerInfo,Qt=!0;break e}S=S.return}if(Qe===null)throw Error(r(160));Np(f,v,d),Qe=null,Qt=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)Up(s,t),s=s.sibling}var An=null;function Up(t,s){var a=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:en(s,t),tn(t),o&4&&(Bs(3,t,t.return),Ka(3,t),Bs(5,t,t.return));break;case 1:en(s,t),tn(t),o&512&&(et||a===null||qn(a,a.return)),o&64&&gs&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var d=An;if(en(s,t),tn(t),o&512&&(et||a===null||qn(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=t.memoizedState,a===null)if(o===null)if(t.stateNode===null){e:{o=t.type,a=t.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":f=d.getElementsByTagName("title")[0],(!f||f[ns]||f[Ae]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(o),d.head.insertBefore(f,d.querySelector("head > title"))),Rt(f,o,a),f[Ae]=t,vt(f),o=f;break e;case"link":var v=jy("link","href",d).get(o+(a.href||""));if(v){for(var S=0;S<v.length;S++)if(f=v[S],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(S,1);break t}}f=d.createElement(o),Rt(f,o,a),d.head.appendChild(f);break;case"meta":if(v=jy("meta","content",d).get(o+(a.content||""))){for(S=0;S<v.length;S++)if(f=v[S],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(S,1);break t}}f=d.createElement(o),Rt(f,o,a),d.head.appendChild(f);break;default:throw Error(r(468,o))}f[Ae]=t,vt(f),o=f}t.stateNode=o}else Oy(d,t.type,t.stateNode);else t.stateNode=Ry(d,o,t.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?Oy(d,t.type,t.stateNode):Ry(d,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Sd(t,t.memoizedProps,a.memoizedProps)}break;case 27:en(s,t),tn(t),o&512&&(et||a===null||qn(a,a.return)),a!==null&&o&4&&Sd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(en(s,t),tn(t),o&512&&(et||a===null||qn(a,a.return)),t.flags&32){d=t.stateNode;try{ar(d,"")}catch(M){ze(t,t.return,M)}}o&4&&t.stateNode!=null&&(d=t.memoizedProps,Sd(t,d,a!==null?a.memoizedProps:d)),o&1024&&(xd=!0);break;case 6:if(en(s,t),tn(t),o&4){if(t.stateNode===null)throw Error(r(162));o=t.memoizedProps,a=t.stateNode;try{a.nodeValue=o}catch(M){ze(t,t.return,M)}}break;case 3:if(Wo=null,d=An,An=Jo(s.containerInfo),en(s,t),An=d,tn(t),o&4&&a!==null&&a.memoizedState.isDehydrated)try{fl(s.containerInfo)}catch(M){ze(t,t.return,M)}xd&&(xd=!1,$p(t));break;case 4:o=An,An=Jo(t.stateNode.containerInfo),en(s,t),tn(t),An=o;break;case 12:en(s,t),tn(t);break;case 13:en(s,t),tn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Od=zt()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Cd(t,o)));break;case 22:d=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,k=gs,q=et;if(gs=k||d,et=q||D,en(s,t),et=q,gs=k,tn(t),o&8192)e:for(s=t.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(a===null||D||gs||et||Ri(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){D=a=s;try{if(f=D.stateNode,d)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=D.stateNode;var Q=D.memoizedProps.style,N=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;S.style.display=N==null||typeof N=="boolean"?"":(""+N).trim()}}catch(M){ze(D,D.return,M)}}}else if(s.tag===6){if(a===null){D=s;try{D.stateNode.nodeValue=d?"":D.memoizedProps}catch(M){ze(D,D.return,M)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}o&4&&(o=t.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Cd(t,a))));break;case 19:en(s,t),tn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Cd(t,o)));break;case 30:break;case 21:break;default:en(s,t),tn(t)}}function tn(t){var s=t.flags;if(s&2){try{for(var a,o=t.return;o!==null;){if(Rp(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,f=_d(t);Io(t,f,d);break;case 5:var v=a.stateNode;a.flags&32&&(ar(v,""),a.flags&=-33);var S=_d(t);Io(t,S,v);break;case 3:case 4:var D=a.stateNode.containerInfo,k=_d(t);Ed(t,k,D);break;default:throw Error(r(161))}}catch(q){ze(t,t.return,q)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function $p(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;$p(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function zs(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Lp(t,s.alternate,s),s=s.sibling}function Ri(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Bs(4,s,s.return),Ri(s);break;case 1:qn(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&Dp(s,s.return,a),Ri(s);break;case 27:rl(s.stateNode);case 26:case 5:qn(s,s.return),Ri(s);break;case 22:s.memoizedState===null&&Ri(s);break;case 30:Ri(s);break;default:Ri(s)}t=t.sibling}}function qs(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var o=s.alternate,d=t,f=s,v=f.flags;switch(f.tag){case 0:case 11:case 15:qs(d,f,a),Ka(4,f);break;case 1:if(qs(d,f,a),o=f,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(k){ze(o,o.return,k)}if(o=f,d=o.updateQueue,d!==null){var S=o.stateNode;try{var D=d.shared.hiddenCallbacks;if(D!==null)for(d.shared.hiddenCallbacks=null,d=0;d<D.length;d++)hm(D[d],S)}catch(k){ze(o,o.return,k)}}a&&v&64&&Tp(f),Fa(f,f.return);break;case 27:jp(f);case 26:case 5:qs(d,f,a),a&&o===null&&v&4&&Ap(f),Fa(f,f.return);break;case 12:qs(d,f,a);break;case 13:qs(d,f,a),a&&v&4&&Mp(d,f);break;case 22:f.memoizedState===null&&qs(d,f,a),Fa(f,f.return);break;case 30:break;default:qs(d,f,a)}s=s.sibling}}function Td(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Ma(a))}function Dd(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Ma(t))}function Hn(t,s,a,o){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ip(t,s,a,o),s=s.sibling}function Ip(t,s,a,o){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Hn(t,s,a,o),d&2048&&Ka(9,s);break;case 1:Hn(t,s,a,o);break;case 3:Hn(t,s,a,o),d&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Ma(t)));break;case 12:if(d&2048){Hn(t,s,a,o),t=s.stateNode;try{var f=s.memoizedProps,v=f.id,S=f.onPostCommit;typeof S=="function"&&S(v,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){ze(s,s.return,D)}}else Hn(t,s,a,o);break;case 13:Hn(t,s,a,o);break;case 23:break;case 22:f=s.stateNode,v=s.alternate,s.memoizedState!==null?f._visibility&2?Hn(t,s,a,o):Ja(t,s):f._visibility&2?Hn(t,s,a,o):(f._visibility|=2,Cr(t,s,a,o,(s.subtreeFlags&10256)!==0)),d&2048&&Td(v,s);break;case 24:Hn(t,s,a,o),d&2048&&Dd(s.alternate,s);break;default:Hn(t,s,a,o)}}function Cr(t,s,a,o,d){for(d=d&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var f=t,v=s,S=a,D=o,k=v.flags;switch(v.tag){case 0:case 11:case 15:Cr(f,v,S,D,d),Ka(8,v);break;case 23:break;case 22:var q=v.stateNode;v.memoizedState!==null?q._visibility&2?Cr(f,v,S,D,d):Ja(f,v):(q._visibility|=2,Cr(f,v,S,D,d)),d&&k&2048&&Td(v.alternate,v);break;case 24:Cr(f,v,S,D,d),d&&k&2048&&Dd(v.alternate,v);break;default:Cr(f,v,S,D,d)}s=s.sibling}}function Ja(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,o=s,d=o.flags;switch(o.tag){case 22:Ja(a,o),d&2048&&Td(o.alternate,o);break;case 24:Ja(a,o),d&2048&&Dd(o.alternate,o);break;default:Ja(a,o)}s=s.sibling}}var Za=8192;function Tr(t){if(t.subtreeFlags&Za)for(t=t.child;t!==null;)Bp(t),t=t.sibling}function Bp(t){switch(t.tag){case 26:Tr(t),t.flags&Za&&t.memoizedState!==null&&b_(An,t.memoizedState,t.memoizedProps);break;case 5:Tr(t);break;case 3:case 4:var s=An;An=Jo(t.stateNode.containerInfo),Tr(t),An=s;break;case 22:t.memoizedState===null&&(s=t.alternate,s!==null&&s.memoizedState!==null?(s=Za,Za=16777216,Tr(t),Za=s):Tr(t));break;default:Tr(t)}}function zp(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Wa(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];wt=o,Hp(o,t)}zp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)qp(t),t=t.sibling}function qp(t){switch(t.tag){case 0:case 11:case 15:Wa(t),t.flags&2048&&Bs(9,t,t.return);break;case 3:Wa(t);break;case 12:Wa(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Bo(t)):Wa(t);break;default:Wa(t)}}function Bo(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var o=s[a];wt=o,Hp(o,t)}zp(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Bs(8,s,s.return),Bo(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,Bo(s));break;default:Bo(s)}t=t.sibling}}function Hp(t,s){for(;wt!==null;){var a=wt;switch(a.tag){case 0:case 11:case 15:Bs(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ma(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,wt=o;else e:for(a=t;wt!==null;){o=wt;var d=o.sibling,f=o.return;if(kp(o),o===a){wt=null;break e}if(d!==null){d.return=f,wt=d;break e}wt=f}}}var MS={getCacheForType:function(t){var s=Mt(ot),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a}},US=typeof WeakMap=="function"?WeakMap:Map,ke=0,qe=null,ve=null,Te=0,Ne=0,nn=null,Hs=!1,Dr=!1,Ad=!1,ps=0,Je=0,Ys=0,ji=0,Rd=0,wn=0,Ar=0,el=null,Pt=null,jd=!1,Od=0,zo=1/0,qo=null,Gs=null,At=0,Vs=null,Rr=null,jr=0,Ld=0,kd=null,Yp=null,tl=0,Nd=null;function sn(){if((ke&2)!==0&&Te!==0)return Te&-Te;if(I.T!==null){var t=yr;return t!==0?t:qd()}return it()}function Gp(){wn===0&&(wn=(Te&536870912)===0||Oe?Zi():536870912);var t=bn.current;return t!==null&&(t.flags|=32),wn}function rn(t,s,a){(t===qe&&(Ne===2||Ne===9)||t.cancelPendingCommit!==null)&&(Or(t,0),Qs(t,Te,wn,!1)),Ve(t,a),((ke&2)===0||t!==qe)&&(t===qe&&((ke&2)===0&&(ji|=a),Je===4&&Qs(t,Te,wn,!1)),Yn(t))}function Vp(t,s,a){if((ke&6)!==0)throw Error(r(327));var o=!a&&(s&124)===0&&(s&t.expiredLanes)===0||es(t,s),d=o?BS(t,s):$d(t,s,!0),f=o;do{if(d===0){Dr&&!o&&Qs(t,s,0,!1);break}else{if(a=t.current.alternate,f&&!$S(a)){d=$d(t,s,!1),f=!1;continue}if(d===2){if(f=s,t.errorRecoveryDisabledLanes&f)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){s=v;e:{var S=t;d=el;var D=S.current.memoizedState.isDehydrated;if(D&&(Or(S,v).flags|=256),v=$d(S,v,!1),v!==2){if(Ad&&!D){S.errorRecoveryDisabledLanes|=f,ji|=f,d=4;break e}f=Pt,Pt=d,f!==null&&(Pt===null?Pt=f:Pt.push.apply(Pt,f))}d=v}if(f=!1,d!==2)continue}}if(d===1){Or(t,0),Qs(t,s,0,!0);break}e:{switch(o=t,f=d,f){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Qs(o,s,wn,!Hs);break e;case 2:Pt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=Od+300-zt(),10<d)){if(Qs(o,s,wn,!Hs),Wn(o,0,!0)!==0)break e;o.timeoutHandle=wy(Qp.bind(null,o,a,Pt,qo,jd,s,wn,ji,Ar,Hs,f,2,-0,0),d);break e}Qp(o,a,Pt,qo,jd,s,wn,ji,Ar,Hs,f,0,-0,0)}}break}while(!0);Yn(t)}function Qp(t,s,a,o,d,f,v,S,D,k,q,Q,N,M){if(t.timeoutHandle=-1,Q=s.subtreeFlags,(Q&8192||(Q&16785408)===16785408)&&(ol={stylesheets:null,count:0,unsuspend:v_},Bp(s),Q=w_(),Q!==null)){t.cancelPendingCommit=Q(Wp.bind(null,t,s,f,a,o,d,v,S,D,q,1,N,M)),Qs(t,f,v,!k);return}Wp(t,s,f,a,o,d,v,S,D)}function $S(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var d=a[o],f=d.getSnapshot;d=d.value;try{if(!Zt(f(),d))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Qs(t,s,a,o){s&=~Rd,s&=~ji,t.suspendedLanes|=s,t.pingedLanes&=~s,o&&(t.warmLanes|=s),o=t.expirationTimes;for(var d=s;0<d;){var f=31-Ke(d),v=1<<f;o[f]=-1,d&=~v}a!==0&&mt(t,a,s)}function Ho(){return(ke&6)===0?(nl(0),!1):!0}function Md(){if(ve!==null){if(Ne===0)var t=ve.return;else t=ve,os=xi=null,Zu(t),Er=null,Qa=0,t=ve;for(;t!==null;)Cp(t.alternate,t),t=t.return;ve=null}}function Or(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,t_(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Md(),qe=t,ve=a=rs(t.current,null),Te=s,Ne=0,nn=null,Hs=!1,Dr=es(t,s),Ad=!1,Ar=wn=Rd=ji=Ys=Je=0,Pt=el=null,jd=!1,(s&8)!==0&&(s|=s&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=s;0<o;){var d=31-Ke(o),f=1<<d;s|=t[d],o&=~f}return ps=s,co(),a}function Pp(t,s){ge=null,I.H=Ro,s===$a||s===bo?(s=um(),Ne=3):s===lm?(s=um(),Ne=4):Ne=s===dp?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,nn=s,ve===null&&(Je=1,No(t,mn(s,t.current)))}function Xp(){var t=I.H;return I.H=Ro,t===null?Ro:t}function Kp(){var t=I.A;return I.A=MS,t}function Ud(){Je=4,Hs||(Te&4194048)!==Te&&bn.current!==null||(Dr=!0),(Ys&134217727)===0&&(ji&134217727)===0||qe===null||Qs(qe,Te,wn,!1)}function $d(t,s,a){var o=ke;ke|=2;var d=Xp(),f=Kp();(qe!==t||Te!==s)&&(qo=null,Or(t,s)),s=!1;var v=Je;e:do try{if(Ne!==0&&ve!==null){var S=ve,D=nn;switch(Ne){case 8:Md(),v=6;break e;case 3:case 2:case 9:case 6:bn.current===null&&(s=!0);var k=Ne;if(Ne=0,nn=null,Lr(t,S,D,k),a&&Dr){v=0;break e}break;default:k=Ne,Ne=0,nn=null,Lr(t,S,D,k)}}IS(),v=Je;break}catch(q){Pp(t,q)}while(!0);return s&&t.shellSuspendCounter++,os=xi=null,ke=o,I.H=d,I.A=f,ve===null&&(qe=null,Te=0,co()),v}function IS(){for(;ve!==null;)Fp(ve)}function BS(t,s){var a=ke;ke|=2;var o=Xp(),d=Kp();qe!==t||Te!==s?(qo=null,zo=zt()+500,Or(t,s)):Dr=es(t,s);e:do try{if(Ne!==0&&ve!==null){s=ve;var f=nn;t:switch(Ne){case 1:Ne=0,nn=null,Lr(t,s,f,1);break;case 2:case 9:if(om(f)){Ne=0,nn=null,Jp(s);break}s=function(){Ne!==2&&Ne!==9||qe!==t||(Ne=7),Yn(t)},f.then(s,s);break e;case 3:Ne=7;break e;case 4:Ne=5;break e;case 7:om(f)?(Ne=0,nn=null,Jp(s)):(Ne=0,nn=null,Lr(t,s,f,7));break;case 5:var v=null;switch(ve.tag){case 26:v=ve.memoizedState;case 5:case 27:var S=ve;if(!v||Ly(v)){Ne=0,nn=null;var D=S.sibling;if(D!==null)ve=D;else{var k=S.return;k!==null?(ve=k,Yo(k)):ve=null}break t}}Ne=0,nn=null,Lr(t,s,f,5);break;case 6:Ne=0,nn=null,Lr(t,s,f,6);break;case 8:Md(),Je=6;break e;default:throw Error(r(462))}}zS();break}catch(q){Pp(t,q)}while(!0);return os=xi=null,I.H=o,I.A=d,ke=a,ve!==null?0:(qe=null,Te=0,co(),Je)}function zS(){for(;ve!==null&&!Un();)Fp(ve)}function Fp(t){var s=Ep(t.alternate,t,ps);t.memoizedProps=t.pendingProps,s===null?Yo(t):ve=s}function Jp(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=yp(a,s,s.pendingProps,s.type,void 0,Te);break;case 11:s=yp(a,s,s.pendingProps,s.type.render,s.ref,Te);break;case 5:Zu(s);default:Cp(a,s),s=ve=Zg(s,ps),s=Ep(a,s,ps)}t.memoizedProps=t.pendingProps,s===null?Yo(t):ve=s}function Lr(t,s,a,o){os=xi=null,Zu(s),Er=null,Qa=0;var d=s.return;try{if(RS(t,d,s,a,Te)){Je=1,No(t,mn(a,t.current)),ve=null;return}}catch(f){if(d!==null)throw ve=d,f;Je=1,No(t,mn(a,t.current)),ve=null;return}s.flags&32768?(Oe||o===1?t=!0:Dr||(Te&536870912)!==0?t=!1:(Hs=t=!0,(o===2||o===9||o===3||o===6)&&(o=bn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Zp(s,t)):Yo(s)}function Yo(t){var s=t;do{if((s.flags&32768)!==0){Zp(s,Hs);return}t=s.return;var a=OS(s.alternate,s,ps);if(a!==null){ve=a;return}if(s=s.sibling,s!==null){ve=s;return}ve=s=t}while(s!==null);Je===0&&(Je=5)}function Zp(t,s){do{var a=LS(t.alternate,t);if(a!==null){a.flags&=32767,ve=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){ve=t;return}ve=t=a}while(t!==null);Je=6,ve=null}function Wp(t,s,a,o,d,f,v,S,D){t.cancelPendingCommit=null;do Go();while(At!==0);if((ke&6)!==0)throw Error(r(327));if(s!==null){if(s===t.current)throw Error(r(177));if(f=s.lanes|s.childLanes,f|=Du,Tt(t,a,f,v,S,D),t===qe&&(ve=qe=null,Te=0),Rr=s,Vs=t,jr=a,Ld=f,kd=d,Yp=o,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,GS(Tn,function(){return iy(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||o){o=I.T,I.T=null,d=K.p,K.p=2,v=ke,ke|=4;try{kS(t,s,a)}finally{ke=v,K.p=d,I.T=o}}At=1,ey(),ty(),ny()}}function ey(){if(At===1){At=0;var t=Vs,s=Rr,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=I.T,I.T=null;var o=K.p;K.p=2;var d=ke;ke|=4;try{Up(s,t);var f=Kd,v=Hg(t.containerInfo),S=f.focusedElem,D=f.selectionRange;if(v!==S&&S&&S.ownerDocument&&qg(S.ownerDocument.documentElement,S)){if(D!==null&&_u(S)){var k=D.start,q=D.end;if(q===void 0&&(q=k),"selectionStart"in S)S.selectionStart=k,S.selectionEnd=Math.min(q,S.value.length);else{var Q=S.ownerDocument||document,N=Q&&Q.defaultView||window;if(N.getSelection){var M=N.getSelection(),oe=S.textContent.length,re=Math.min(D.start,oe),$e=D.end===void 0?re:Math.min(D.end,oe);!M.extend&&re>$e&&(v=$e,$e=re,re=v);var O=zg(S,re),R=zg(S,$e);if(O&&R&&(M.rangeCount!==1||M.anchorNode!==O.node||M.anchorOffset!==O.offset||M.focusNode!==R.node||M.focusOffset!==R.offset)){var L=Q.createRange();L.setStart(O.node,O.offset),M.removeAllRanges(),re>$e?(M.addRange(L),M.extend(R.node,R.offset)):(L.setEnd(R.node,R.offset),M.addRange(L))}}}}for(Q=[],M=S;M=M.parentNode;)M.nodeType===1&&Q.push({element:M,left:M.scrollLeft,top:M.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<Q.length;S++){var G=Q[S];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}nc=!!Xd,Kd=Xd=null}finally{ke=d,K.p=o,I.T=a}}t.current=s,At=2}}function ty(){if(At===2){At=0;var t=Vs,s=Rr,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=I.T,I.T=null;var o=K.p;K.p=2;var d=ke;ke|=4;try{Lp(t,s.alternate,s)}finally{ke=d,K.p=o,I.T=a}}At=3}}function ny(){if(At===4||At===3){At=0,$n();var t=Vs,s=Rr,a=jr,o=Yp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?At=5:(At=0,Rr=Vs=null,sy(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Gs=null),Z(a),s=s.stateNode,Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(Yt,s,void 0,(s.current.flags&128)===128)}catch{}if(o!==null){s=I.T,d=K.p,K.p=2,I.T=null;try{for(var f=t.onRecoverableError,v=0;v<o.length;v++){var S=o[v];f(S.value,{componentStack:S.stack})}}finally{I.T=s,K.p=d}}(jr&3)!==0&&Go(),Yn(t),d=t.pendingLanes,(a&4194090)!==0&&(d&42)!==0?t===Nd?tl++:(tl=0,Nd=t):tl=0,nl(0)}}function sy(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Ma(s)))}function Go(t){return ey(),ty(),ny(),iy()}function iy(){if(At!==5)return!1;var t=Vs,s=Ld;Ld=0;var a=Z(jr),o=I.T,d=K.p;try{K.p=32>a?32:a,I.T=null,a=kd,kd=null;var f=Vs,v=jr;if(At=0,Rr=Vs=null,jr=0,(ke&6)!==0)throw Error(r(331));var S=ke;if(ke|=4,qp(f.current),Ip(f,f.current,v,a),ke=S,nl(0,!1),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(Yt,f)}catch{}return!0}finally{K.p=d,I.T=o,sy(t,s)}}function ry(t,s,a){s=mn(a,s),s=hd(t.stateNode,s,2),t=Ms(t,s,2),t!==null&&(Ve(t,2),Yn(t))}function ze(t,s,a){if(t.tag===3)ry(t,t,a);else for(;s!==null;){if(s.tag===3){ry(s,t,a);break}else if(s.tag===1){var o=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Gs===null||!Gs.has(o))){t=mn(a,t),a=cp(2),o=Ms(s,a,2),o!==null&&(up(a,o,s,t),Ve(o,2),Yn(o));break}}s=s.return}}function Id(t,s,a){var o=t.pingCache;if(o===null){o=t.pingCache=new US;var d=new Set;o.set(s,d)}else d=o.get(s),d===void 0&&(d=new Set,o.set(s,d));d.has(a)||(Ad=!0,d.add(a),t=qS.bind(null,t,s,a),s.then(t,t))}function qS(t,s,a){var o=t.pingCache;o!==null&&o.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,qe===t&&(Te&a)===a&&(Je===4||Je===3&&(Te&62914560)===Te&&300>zt()-Od?(ke&2)===0&&Or(t,0):Rd|=a,Ar===Te&&(Ar=0)),Yn(t)}function ay(t,s){s===0&&(s=Wi()),t=fr(t,s),t!==null&&(Ve(t,s),Yn(t))}function HS(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),ay(t,a)}function YS(t,s){var a=0;switch(t.tag){case 13:var o=t.stateNode,d=t.memoizedState;d!==null&&(a=d.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(s),ay(t,a)}function GS(t,s){return dn(t,s)}var Vo=null,kr=null,Bd=!1,Qo=!1,zd=!1,Oi=0;function Yn(t){t!==kr&&t.next===null&&(kr===null?Vo=kr=t:kr=kr.next=t),Qo=!0,Bd||(Bd=!0,QS())}function nl(t,s){if(!zd&&Qo){zd=!0;do for(var a=!1,o=Vo;o!==null;){if(t!==0){var d=o.pendingLanes;if(d===0)var f=0;else{var v=o.suspendedLanes,S=o.pingedLanes;f=(1<<31-Ke(42|t)+1)-1,f&=d&~(v&~S),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,uy(o,f))}else f=Te,f=Wn(o,o===qe?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||es(o,f)||(a=!0,uy(o,f));o=o.next}while(a);zd=!1}}function VS(){ly()}function ly(){Qo=Bd=!1;var t=0;Oi!==0&&(e_()&&(t=Oi),Oi=0);for(var s=zt(),a=null,o=Vo;o!==null;){var d=o.next,f=oy(o,s);f===0?(o.next=null,a===null?Vo=d:a.next=d,d===null&&(kr=a)):(a=o,(t!==0||(f&3)!==0)&&(Qo=!0)),o=d}nl(t)}function oy(t,s){for(var a=t.suspendedLanes,o=t.pingedLanes,d=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var v=31-Ke(f),S=1<<v,D=d[v];D===-1?((S&a)===0||(S&o)!==0)&&(d[v]=Ji(S,s)):D<=s&&(t.expiredLanes|=S),f&=~S}if(s=qe,a=Te,a=Wn(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,a===0||t===s&&(Ne===2||Ne===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Bt(o),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||es(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(o!==null&&Bt(o),Z(a)){case 2:case 8:a=Kt;break;case 32:a=Tn;break;case 268435456:a=Ds;break;default:a=Tn}return o=cy.bind(null,t),a=dn(a,o),t.callbackPriority=s,t.callbackNode=a,s}return o!==null&&o!==null&&Bt(o),t.callbackPriority=2,t.callbackNode=null,2}function cy(t,s){if(At!==0&&At!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Go()&&t.callbackNode!==a)return null;var o=Te;return o=Wn(t,t===qe?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Vp(t,o,s),oy(t,zt()),t.callbackNode!=null&&t.callbackNode===a?cy.bind(null,t):null)}function uy(t,s){if(Go())return null;Vp(t,s,!0)}function QS(){n_(function(){(ke&6)!==0?dn(Ts,VS):ly()})}function qd(){return Oi===0&&(Oi=Zi()),Oi}function dy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:no(""+t)}function hy(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function PS(t,s,a,o,d){if(s==="submit"&&a&&a.stateNode===d){var f=dy((d[Ge]||null).action),v=o.submitter;v&&(s=(s=v[Ge]||null)?dy(s.formAction):v.getAttribute("formAction"),s!==null&&(f=s,v=null));var S=new ao("action","action",null,o,d);t.push({event:S,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Oi!==0){var D=v?hy(d,v):new FormData(d);ld(a,{pending:!0,data:D,method:d.method,action:f},null,D)}}else typeof f=="function"&&(S.preventDefault(),D=v?hy(d,v):new FormData(d),ld(a,{pending:!0,data:D,method:d.method,action:f},f,D))},currentTarget:d}]})}}for(var Hd=0;Hd<Tu.length;Hd++){var Yd=Tu[Hd],XS=Yd.toLowerCase(),KS=Yd[0].toUpperCase()+Yd.slice(1);Dn(XS,"on"+KS)}Dn(Vg,"onAnimationEnd"),Dn(Qg,"onAnimationIteration"),Dn(Pg,"onAnimationStart"),Dn("dblclick","onDoubleClick"),Dn("focusin","onFocus"),Dn("focusout","onBlur"),Dn(hS,"onTransitionRun"),Dn(fS,"onTransitionStart"),Dn(gS,"onTransitionCancel"),Dn(Xg,"onTransitionEnd"),sr("onMouseEnter",["mouseout","mouseover"]),sr("onMouseLeave",["mouseout","mouseover"]),sr("onPointerEnter",["pointerout","pointerover"]),sr("onPointerLeave",["pointerout","pointerover"]),mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sl));function fy(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var o=t[a],d=o.event;o=o.listeners;e:{var f=void 0;if(s)for(var v=o.length-1;0<=v;v--){var S=o[v],D=S.instance,k=S.currentTarget;if(S=S.listener,D!==f&&d.isPropagationStopped())break e;f=S,d.currentTarget=k;try{f(d)}catch(q){ko(q)}d.currentTarget=null,f=D}else for(v=0;v<o.length;v++){if(S=o[v],D=S.instance,k=S.currentTarget,S=S.listener,D!==f&&d.isPropagationStopped())break e;f=S,d.currentTarget=k;try{f(d)}catch(q){ko(q)}d.currentTarget=null,f=D}}}}function be(t,s){var a=s[ts];a===void 0&&(a=s[ts]=new Set);var o=t+"__bubble";a.has(o)||(gy(s,t,2,!1),a.add(o))}function Gd(t,s,a){var o=0;s&&(o|=4),gy(a,t,o,s)}var Po="_reactListening"+Math.random().toString(36).slice(2);function Vd(t){if(!t[Po]){t[Po]=!0,lg.forEach(function(a){a!=="selectionchange"&&(FS.has(a)||Gd(a,!1,t),Gd(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Po]||(s[Po]=!0,Gd("selectionchange",!1,s))}}function gy(t,s,a,o){switch(Iy(s)){case 2:var d=E_;break;case 8:d=x_;break;default:d=rh}a=d.bind(null,s,a,t),d=void 0,!fu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),o?d!==void 0?t.addEventListener(s,a,{capture:!0,passive:d}):t.addEventListener(s,a,!0):d!==void 0?t.addEventListener(s,a,{passive:d}):t.addEventListener(s,a,!1)}function Qd(t,s,a,o,d){var f=o;if((s&1)===0&&(s&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var S=o.stateNode.containerInfo;if(S===d)break;if(v===4)for(v=o.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;S!==null;){if(v=er(S),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){o=f=v;continue e}S=S.parentNode}}o=o.return}Sg(function(){var k=f,q=du(a),Q=[];e:{var N=Kg.get(t);if(N!==void 0){var M=ao,oe=t;switch(t){case"keypress":if(io(a)===0)break e;case"keydown":case"keyup":M=Gw;break;case"focusin":oe="focus",M=yu;break;case"focusout":oe="blur",M=yu;break;case"beforeblur":case"afterblur":M=yu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=xg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=Lw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=Pw;break;case Vg:case Qg:case Pg:M=Mw;break;case Xg:M=Kw;break;case"scroll":case"scrollend":M=jw;break;case"wheel":M=Jw;break;case"copy":case"cut":case"paste":M=$w;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=Tg;break;case"toggle":case"beforetoggle":M=Ww}var re=(s&4)!==0,$e=!re&&(t==="scroll"||t==="scrollend"),O=re?N!==null?N+"Capture":null:N;re=[];for(var R=k,L;R!==null;){var G=R;if(L=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||L===null||O===null||(G=_a(R,O),G!=null&&re.push(il(R,G,L))),$e)break;R=R.return}0<re.length&&(N=new M(N,oe,null,a,q),Q.push({event:N,listeners:re}))}}if((s&7)===0){e:{if(N=t==="mouseover"||t==="pointerover",M=t==="mouseout"||t==="pointerout",N&&a!==uu&&(oe=a.relatedTarget||a.fromElement)&&(er(oe)||oe[Nt]))break e;if((M||N)&&(N=q.window===q?q:(N=q.ownerDocument)?N.defaultView||N.parentWindow:window,M?(oe=a.relatedTarget||a.toElement,M=k,oe=oe?er(oe):null,oe!==null&&($e=c(oe),re=oe.tag,oe!==$e||re!==5&&re!==27&&re!==6)&&(oe=null)):(M=null,oe=k),M!==oe)){if(re=xg,G="onMouseLeave",O="onMouseEnter",R="mouse",(t==="pointerout"||t==="pointerover")&&(re=Tg,G="onPointerLeave",O="onPointerEnter",R="pointer"),$e=M==null?N:Sa(M),L=oe==null?N:Sa(oe),N=new re(G,R+"leave",M,a,q),N.target=$e,N.relatedTarget=L,G=null,er(q)===k&&(re=new re(O,R+"enter",oe,a,q),re.target=L,re.relatedTarget=$e,G=re),$e=G,M&&oe)t:{for(re=M,O=oe,R=0,L=re;L;L=Nr(L))R++;for(L=0,G=O;G;G=Nr(G))L++;for(;0<R-L;)re=Nr(re),R--;for(;0<L-R;)O=Nr(O),L--;for(;R--;){if(re===O||O!==null&&re===O.alternate)break t;re=Nr(re),O=Nr(O)}re=null}else re=null;M!==null&&my(Q,N,M,re,!1),oe!==null&&$e!==null&&my(Q,$e,oe,re,!0)}}e:{if(N=k?Sa(k):window,M=N.nodeName&&N.nodeName.toLowerCase(),M==="select"||M==="input"&&N.type==="file")var ne=Ng;else if(Lg(N))if(Mg)ne=cS;else{ne=lS;var pe=aS}else M=N.nodeName,!M||M.toLowerCase()!=="input"||N.type!=="checkbox"&&N.type!=="radio"?k&&cu(k.elementType)&&(ne=Ng):ne=oS;if(ne&&(ne=ne(t,k))){kg(Q,ne,a,q);break e}pe&&pe(t,N,k),t==="focusout"&&k&&N.type==="number"&&k.memoizedProps.value!=null&&ou(N,"number",N.value)}switch(pe=k?Sa(k):window,t){case"focusin":(Lg(pe)||pe.contentEditable==="true")&&(ur=pe,Eu=k,ja=null);break;case"focusout":ja=Eu=ur=null;break;case"mousedown":xu=!0;break;case"contextmenu":case"mouseup":case"dragend":xu=!1,Yg(Q,a,q);break;case"selectionchange":if(dS)break;case"keydown":case"keyup":Yg(Q,a,q)}var ie;if(bu)e:{switch(t){case"compositionstart":var le="onCompositionStart";break e;case"compositionend":le="onCompositionEnd";break e;case"compositionupdate":le="onCompositionUpdate";break e}le=void 0}else cr?jg(t,a)&&(le="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(le="onCompositionStart");le&&(Dg&&a.locale!=="ko"&&(cr||le!=="onCompositionStart"?le==="onCompositionEnd"&&cr&&(ie=_g()):(Os=q,gu="value"in Os?Os.value:Os.textContent,cr=!0)),pe=Xo(k,le),0<pe.length&&(le=new Cg(le,t,null,a,q),Q.push({event:le,listeners:pe}),ie?le.data=ie:(ie=Og(a),ie!==null&&(le.data=ie)))),(ie=tS?nS(t,a):sS(t,a))&&(le=Xo(k,"onBeforeInput"),0<le.length&&(pe=new Cg("onBeforeInput","beforeinput",null,a,q),Q.push({event:pe,listeners:le}),pe.data=ie)),PS(Q,t,k,a,q)}fy(Q,s)})}function il(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Xo(t,s){for(var a=s+"Capture",o=[];t!==null;){var d=t,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=_a(t,a),d!=null&&o.unshift(il(t,d,f)),d=_a(t,s),d!=null&&o.push(il(t,d,f))),t.tag===3)return o;t=t.return}return[]}function Nr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function my(t,s,a,o,d){for(var f=s._reactName,v=[];a!==null&&a!==o;){var S=a,D=S.alternate,k=S.stateNode;if(S=S.tag,D!==null&&D===o)break;S!==5&&S!==26&&S!==27||k===null||(D=k,d?(k=_a(a,f),k!=null&&v.unshift(il(a,k,D))):d||(k=_a(a,f),k!=null&&v.push(il(a,k,D)))),a=a.return}v.length!==0&&t.push({event:s,listeners:v})}var JS=/\r\n?/g,ZS=/\u0000|\uFFFD/g;function py(t){return(typeof t=="string"?t:""+t).replace(JS,`
`).replace(ZS,"")}function yy(t,s){return s=py(s),py(t)===s}function Ko(){}function Ue(t,s,a,o,d,f){switch(a){case"children":typeof o=="string"?s==="body"||s==="textarea"&&o===""||ar(t,o):(typeof o=="number"||typeof o=="bigint")&&s!=="body"&&ar(t,""+o);break;case"className":Wl(t,"class",o);break;case"tabIndex":Wl(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Wl(t,a,o);break;case"style":bg(t,o,f);break;case"data":if(s!=="object"){Wl(t,"data",o);break}case"src":case"href":if(o===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=no(""+o),t.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(s!=="input"&&Ue(t,s,"name",d.name,d,null),Ue(t,s,"formEncType",d.formEncType,d,null),Ue(t,s,"formMethod",d.formMethod,d,null),Ue(t,s,"formTarget",d.formTarget,d,null)):(Ue(t,s,"encType",d.encType,d,null),Ue(t,s,"method",d.method,d,null),Ue(t,s,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(a);break}o=no(""+o),t.setAttribute(a,o);break;case"onClick":o!=null&&(t.onclick=Ko);break;case"onScroll":o!=null&&be("scroll",t);break;case"onScrollEnd":o!=null&&be("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}a=no(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""+o):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":o===!0?t.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(a,o):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(a,o):t.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(a):t.setAttribute(a,o);break;case"popover":be("beforetoggle",t),be("toggle",t),Zl(t,"popover",o);break;case"xlinkActuate":ss(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ss(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ss(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ss(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ss(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ss(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ss(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ss(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ss(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Zl(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Aw.get(a)||a,Zl(t,a,o))}}function Pd(t,s,a,o,d,f){switch(a){case"style":bg(t,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(r(60));t.innerHTML=a}}break;case"children":typeof o=="string"?ar(t,o):(typeof o=="number"||typeof o=="bigint")&&ar(t,""+o);break;case"onScroll":o!=null&&be("scroll",t);break;case"onScrollEnd":o!=null&&be("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Ko);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!og.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),s=a.slice(2,d?a.length-7:void 0),f=t[Ge]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(s,f,d),typeof o=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,o,d);break e}a in t?t[a]=o:o===!0?t.setAttribute(a,""):Zl(t,a,o)}}}function Rt(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":be("error",t),be("load",t);var o=!1,d=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ue(t,s,f,v,a,null)}}d&&Ue(t,s,"srcSet",a.srcSet,a,null),o&&Ue(t,s,"src",a.src,a,null);return;case"input":be("invalid",t);var S=f=v=d=null,D=null,k=null;for(o in a)if(a.hasOwnProperty(o)){var q=a[o];if(q!=null)switch(o){case"name":d=q;break;case"type":v=q;break;case"checked":D=q;break;case"defaultChecked":k=q;break;case"value":f=q;break;case"defaultValue":S=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(137,s));break;default:Ue(t,s,o,q,a,null)}}mg(t,f,S,D,k,v,d,!1),eo(t);return;case"select":be("invalid",t),o=v=f=null;for(d in a)if(a.hasOwnProperty(d)&&(S=a[d],S!=null))switch(d){case"value":f=S;break;case"defaultValue":v=S;break;case"multiple":o=S;default:Ue(t,s,d,S,a,null)}s=f,a=v,t.multiple=!!o,s!=null?rr(t,!!o,s,!1):a!=null&&rr(t,!!o,a,!0);return;case"textarea":be("invalid",t),f=d=o=null;for(v in a)if(a.hasOwnProperty(v)&&(S=a[v],S!=null))switch(v){case"value":o=S;break;case"defaultValue":d=S;break;case"children":f=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:Ue(t,s,v,S,a,null)}yg(t,o,d,f),eo(t);return;case"option":for(D in a)if(a.hasOwnProperty(D)&&(o=a[D],o!=null))switch(D){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Ue(t,s,D,o,a,null)}return;case"dialog":be("beforetoggle",t),be("toggle",t),be("cancel",t),be("close",t);break;case"iframe":case"object":be("load",t);break;case"video":case"audio":for(o=0;o<sl.length;o++)be(sl[o],t);break;case"image":be("error",t),be("load",t);break;case"details":be("toggle",t);break;case"embed":case"source":case"link":be("error",t),be("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in a)if(a.hasOwnProperty(k)&&(o=a[k],o!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:Ue(t,s,k,o,a,null)}return;default:if(cu(s)){for(q in a)a.hasOwnProperty(q)&&(o=a[q],o!==void 0&&Pd(t,s,q,o,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(o=a[S],o!=null&&Ue(t,s,S,o,a,null))}function WS(t,s,a,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,v=null,S=null,D=null,k=null,q=null;for(M in a){var Q=a[M];if(a.hasOwnProperty(M)&&Q!=null)switch(M){case"checked":break;case"value":break;case"defaultValue":D=Q;default:o.hasOwnProperty(M)||Ue(t,s,M,null,o,Q)}}for(var N in o){var M=o[N];if(Q=a[N],o.hasOwnProperty(N)&&(M!=null||Q!=null))switch(N){case"type":f=M;break;case"name":d=M;break;case"checked":k=M;break;case"defaultChecked":q=M;break;case"value":v=M;break;case"defaultValue":S=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(137,s));break;default:M!==Q&&Ue(t,s,N,M,o,Q)}}lu(t,v,S,D,k,q,f,d);return;case"select":M=v=S=N=null;for(f in a)if(D=a[f],a.hasOwnProperty(f)&&D!=null)switch(f){case"value":break;case"multiple":M=D;default:o.hasOwnProperty(f)||Ue(t,s,f,null,o,D)}for(d in o)if(f=o[d],D=a[d],o.hasOwnProperty(d)&&(f!=null||D!=null))switch(d){case"value":N=f;break;case"defaultValue":S=f;break;case"multiple":v=f;default:f!==D&&Ue(t,s,d,f,o,D)}s=S,a=v,o=M,N!=null?rr(t,!!a,N,!1):!!o!=!!a&&(s!=null?rr(t,!!a,s,!0):rr(t,!!a,a?[]:"",!1));return;case"textarea":M=N=null;for(S in a)if(d=a[S],a.hasOwnProperty(S)&&d!=null&&!o.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Ue(t,s,S,null,o,d)}for(v in o)if(d=o[v],f=a[v],o.hasOwnProperty(v)&&(d!=null||f!=null))switch(v){case"value":N=d;break;case"defaultValue":M=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==f&&Ue(t,s,v,d,o,f)}pg(t,N,M);return;case"option":for(var oe in a)if(N=a[oe],a.hasOwnProperty(oe)&&N!=null&&!o.hasOwnProperty(oe))switch(oe){case"selected":t.selected=!1;break;default:Ue(t,s,oe,null,o,N)}for(D in o)if(N=o[D],M=a[D],o.hasOwnProperty(D)&&N!==M&&(N!=null||M!=null))switch(D){case"selected":t.selected=N&&typeof N!="function"&&typeof N!="symbol";break;default:Ue(t,s,D,N,o,M)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var re in a)N=a[re],a.hasOwnProperty(re)&&N!=null&&!o.hasOwnProperty(re)&&Ue(t,s,re,null,o,N);for(k in o)if(N=o[k],M=a[k],o.hasOwnProperty(k)&&N!==M&&(N!=null||M!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(137,s));break;default:Ue(t,s,k,N,o,M)}return;default:if(cu(s)){for(var $e in a)N=a[$e],a.hasOwnProperty($e)&&N!==void 0&&!o.hasOwnProperty($e)&&Pd(t,s,$e,void 0,o,N);for(q in o)N=o[q],M=a[q],!o.hasOwnProperty(q)||N===M||N===void 0&&M===void 0||Pd(t,s,q,N,o,M);return}}for(var O in a)N=a[O],a.hasOwnProperty(O)&&N!=null&&!o.hasOwnProperty(O)&&Ue(t,s,O,null,o,N);for(Q in o)N=o[Q],M=a[Q],!o.hasOwnProperty(Q)||N===M||N==null&&M==null||Ue(t,s,Q,N,o,M)}var Xd=null,Kd=null;function Fo(t){return t.nodeType===9?t:t.ownerDocument}function vy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function by(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Fd(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Jd=null;function e_(){var t=window.event;return t&&t.type==="popstate"?t===Jd?!1:(Jd=t,!0):(Jd=null,!1)}var wy=typeof setTimeout=="function"?setTimeout:void 0,t_=typeof clearTimeout=="function"?clearTimeout:void 0,Sy=typeof Promise=="function"?Promise:void 0,n_=typeof queueMicrotask=="function"?queueMicrotask:typeof Sy<"u"?function(t){return Sy.resolve(null).then(t).catch(s_)}:wy;function s_(t){setTimeout(function(){throw t})}function Ps(t){return t==="head"}function _y(t,s){var a=s,o=0,d=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=t.ownerDocument;if(a&1&&rl(v.documentElement),a&2&&rl(v.body),a&4)for(a=v.head,rl(a),v=a.firstChild;v;){var S=v.nextSibling,D=v.nodeName;v[ns]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=S}}if(d===0){t.removeChild(f),fl(s);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);fl(s)}function Zd(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Zd(a),su(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function i_(t,s,a,o){for(;t.nodeType===1;){var d=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[ns])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Rn(t.nextSibling),t===null)break}return null}function r_(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Rn(t.nextSibling),t===null))return null;return t}function Wd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function a_(t,s){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")s();else{var o=function(){s(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Rn(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return t}var eh=null;function Ey(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return t;s--}else a==="/$"&&s++}t=t.previousSibling}return null}function xy(t,s,a){switch(s=Fo(a),t){case"html":if(t=s.documentElement,!t)throw Error(r(452));return t;case"head":if(t=s.head,!t)throw Error(r(453));return t;case"body":if(t=s.body,!t)throw Error(r(454));return t;default:throw Error(r(451))}}function rl(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);su(t)}var Sn=new Map,Cy=new Set;function Jo(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ys=K.d;K.d={f:l_,r:o_,D:c_,C:u_,L:d_,m:h_,X:g_,S:f_,M:m_};function l_(){var t=ys.f(),s=Ho();return t||s}function o_(t){var s=tr(t);s!==null&&s.tag===5&&s.type==="form"?Vm(s):ys.r(t)}var Mr=typeof document>"u"?null:document;function Ty(t,s,a){var o=Mr;if(o&&typeof s=="string"&&s){var d=gn(s);d='link[rel="'+t+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),Cy.has(d)||(Cy.add(d),t={rel:t,crossOrigin:a,href:s},o.querySelector(d)===null&&(s=o.createElement("link"),Rt(s,"link",t),vt(s),o.head.appendChild(s)))}}function c_(t){ys.D(t),Ty("dns-prefetch",t,null)}function u_(t,s){ys.C(t,s),Ty("preconnect",t,s)}function d_(t,s,a){ys.L(t,s,a);var o=Mr;if(o&&t&&s){var d='link[rel="preload"][as="'+gn(s)+'"]';s==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+gn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+gn(a.imageSizes)+'"]')):d+='[href="'+gn(t)+'"]';var f=d;switch(s){case"style":f=Ur(t);break;case"script":f=$r(t)}Sn.has(f)||(t=p({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),Sn.set(f,t),o.querySelector(d)!==null||s==="style"&&o.querySelector(al(f))||s==="script"&&o.querySelector(ll(f))||(s=o.createElement("link"),Rt(s,"link",t),vt(s),o.head.appendChild(s)))}}function h_(t,s){ys.m(t,s);var a=Mr;if(a&&t){var o=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+gn(o)+'"][href="'+gn(t)+'"]',f=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=$r(t)}if(!Sn.has(f)&&(t=p({rel:"modulepreload",href:t},s),Sn.set(f,t),a.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ll(f)))return}o=a.createElement("link"),Rt(o,"link",t),vt(o),a.head.appendChild(o)}}}function f_(t,s,a){ys.S(t,s,a);var o=Mr;if(o&&t){var d=nr(o).hoistableStyles,f=Ur(t);s=s||"default";var v=d.get(f);if(!v){var S={loading:0,preload:null};if(v=o.querySelector(al(f)))S.loading=5;else{t=p({rel:"stylesheet",href:t,"data-precedence":s},a),(a=Sn.get(f))&&th(t,a);var D=v=o.createElement("link");vt(D),Rt(D,"link",t),D._p=new Promise(function(k,q){D.onload=k,D.onerror=q}),D.addEventListener("load",function(){S.loading|=1}),D.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Zo(v,s,o)}v={type:"stylesheet",instance:v,count:1,state:S},d.set(f,v)}}}function g_(t,s){ys.X(t,s);var a=Mr;if(a&&t){var o=nr(a).hoistableScripts,d=$r(t),f=o.get(d);f||(f=a.querySelector(ll(d)),f||(t=p({src:t,async:!0},s),(s=Sn.get(d))&&nh(t,s),f=a.createElement("script"),vt(f),Rt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function m_(t,s){ys.M(t,s);var a=Mr;if(a&&t){var o=nr(a).hoistableScripts,d=$r(t),f=o.get(d);f||(f=a.querySelector(ll(d)),f||(t=p({src:t,async:!0,type:"module"},s),(s=Sn.get(d))&&nh(t,s),f=a.createElement("script"),vt(f),Rt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(d,f))}}function Dy(t,s,a,o){var d=(d=te.current)?Jo(d):null;if(!d)throw Error(r(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Ur(a.href),a=nr(d).hoistableStyles,o=a.get(s),o||(o={type:"style",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Ur(a.href);var f=nr(d).hoistableStyles,v=f.get(t);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,v),(f=d.querySelector(al(t)))&&!f._p&&(v.instance=f,v.state.loading=5),Sn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Sn.set(t,a),f||p_(d,t,a,v.state))),s&&o===null)throw Error(r(528,""));return v}if(s&&o!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=$r(a),a=nr(d).hoistableScripts,o=a.get(s),o||(o={type:"script",instance:null,count:0,state:null},a.set(s,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,t))}}function Ur(t){return'href="'+gn(t)+'"'}function al(t){return'link[rel="stylesheet"]['+t+"]"}function Ay(t){return p({},t,{"data-precedence":t.precedence,precedence:null})}function p_(t,s,a,o){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?o.loading=1:(s=t.createElement("link"),o.preload=s,s.addEventListener("load",function(){return o.loading|=1}),s.addEventListener("error",function(){return o.loading|=2}),Rt(s,"link",a),vt(s),t.head.appendChild(s))}function $r(t){return'[src="'+gn(t)+'"]'}function ll(t){return"script[async]"+t}function Ry(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var o=t.querySelector('style[data-href~="'+gn(a.href)+'"]');if(o)return s.instance=o,vt(o),o;var d=p({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),vt(o),Rt(o,"style",d),Zo(o,a.precedence,t),s.instance=o;case"stylesheet":d=Ur(a.href);var f=t.querySelector(al(d));if(f)return s.state.loading|=4,s.instance=f,vt(f),f;o=Ay(a),(d=Sn.get(d))&&th(o,d),f=(t.ownerDocument||t).createElement("link"),vt(f);var v=f;return v._p=new Promise(function(S,D){v.onload=S,v.onerror=D}),Rt(f,"link",o),s.state.loading|=4,Zo(f,a.precedence,t),s.instance=f;case"script":return f=$r(a.src),(d=t.querySelector(ll(f)))?(s.instance=d,vt(d),d):(o=a,(d=Sn.get(f))&&(o=p({},a),nh(o,d)),t=t.ownerDocument||t,d=t.createElement("script"),vt(d),Rt(d,"link",o),t.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(o=s.instance,s.state.loading|=4,Zo(o,a.precedence,t));return s.instance}function Zo(t,s,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,f=d,v=0;v<o.length;v++){var S=o[v];if(S.dataset.precedence===s)f=S;else if(f!==d)break}f?f.parentNode.insertBefore(t,f.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function th(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function nh(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Wo=null;function jy(t,s,a){if(Wo===null){var o=new Map,d=Wo=new Map;d.set(a,o)}else d=Wo,o=d.get(a),o||(o=new Map,d.set(a,o));if(o.has(t))return o;for(o.set(t,null),a=a.getElementsByTagName(t),d=0;d<a.length;d++){var f=a[d];if(!(f[ns]||f[Ae]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(s)||"";v=t+v;var S=o.get(v);S?S.push(f):o.set(v,[f])}}return o}function Oy(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function y_(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Ly(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var ol=null;function v_(){}function b_(t,s,a){if(ol===null)throw Error(r(475));var o=ol;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=Ur(a.href),f=t.querySelector(al(d));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(o.count++,o=ec.bind(o),t.then(o,o)),s.state.loading|=4,s.instance=f,vt(f);return}f=t.ownerDocument||t,a=Ay(a),(d=Sn.get(d))&&th(a,d),f=f.createElement("link"),vt(f);var v=f;v._p=new Promise(function(S,D){v.onload=S,v.onerror=D}),Rt(f,"link",a),s.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(o.count++,s=ec.bind(o),t.addEventListener("load",s),t.addEventListener("error",s))}}function w_(){if(ol===null)throw Error(r(475));var t=ol;return t.stylesheets&&t.count===0&&sh(t,t.stylesheets),0<t.count?function(s){var a=setTimeout(function(){if(t.stylesheets&&sh(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(a)}}:null}function ec(){if(this.count--,this.count===0){if(this.stylesheets)sh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var tc=null;function sh(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,tc=new Map,s.forEach(S_,t),tc=null,ec.call(t))}function S_(t,s){if(!(s.state.loading&4)){var a=tc.get(t);if(a)var o=a.get(null);else{a=new Map,tc.set(t,a);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var v=d[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}d=s.instance,v=d.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,d),a.set(v,d),this.count++,o=ec.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),f?f.parentNode.insertBefore(d,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),s.state.loading|=4}}var cl={$$typeof:$,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function __(t,s,a,o,d,f,v,S){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function ky(t,s,a,o,d,f,v,S,D,k,q,Q){return t=new __(t,s,a,v,S,D,k,Q),s=1,f===!0&&(s|=24),f=Wt(3,null,null,s),t.current=f,f.stateNode=t,s=Iu(),s.refCount++,t.pooledCache=s,s.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:s},Hu(f),t}function Ny(t){return t?(t=gr,t):gr}function My(t,s,a,o,d,f){d=Ny(d),o.context===null?o.context=d:o.pendingContext=d,o=Ns(s),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=Ms(t,o,s),a!==null&&(rn(a,t,s),Ba(a,t,s))}function Uy(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function ih(t,s){Uy(t,s),(t=t.alternate)&&Uy(t,s)}function $y(t){if(t.tag===13){var s=fr(t,67108864);s!==null&&rn(s,t,67108864),ih(t,67108864)}}var nc=!0;function E_(t,s,a,o){var d=I.T;I.T=null;var f=K.p;try{K.p=2,rh(t,s,a,o)}finally{K.p=f,I.T=d}}function x_(t,s,a,o){var d=I.T;I.T=null;var f=K.p;try{K.p=8,rh(t,s,a,o)}finally{K.p=f,I.T=d}}function rh(t,s,a,o){if(nc){var d=ah(o);if(d===null)Qd(t,s,o,sc,a),By(t,o);else if(T_(d,t,s,a,o))o.stopPropagation();else if(By(t,o),s&4&&-1<C_.indexOf(t)){for(;d!==null;){var f=tr(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Ft(f.pendingLanes);if(v!==0){var S=f;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var D=1<<31-Ke(v);S.entanglements[1]|=D,v&=~D}Yn(f),(ke&6)===0&&(zo=zt()+500,nl(0))}}break;case 13:S=fr(f,2),S!==null&&rn(S,f,2),Ho(),ih(f,2)}if(f=ah(o),f===null&&Qd(t,s,o,sc,a),f===d)break;d=f}d!==null&&o.stopPropagation()}else Qd(t,s,o,null,a)}}function ah(t){return t=du(t),lh(t)}var sc=null;function lh(t){if(sc=null,t=er(t),t!==null){var s=c(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=u(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return sc=t,null}function Iy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pi()){case Ts:return 2;case Kt:return 8;case Tn:case Zn:return 32;case Ds:return 268435456;default:return 32}default:return 32}}var oh=!1,Xs=null,Ks=null,Fs=null,ul=new Map,dl=new Map,Js=[],C_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function By(t,s){switch(t){case"focusin":case"focusout":Xs=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":ul.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":dl.delete(s.pointerId)}}function hl(t,s,a,o,d,f){return t===null||t.nativeEvent!==f?(t={blockedOn:s,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[d]},s!==null&&(s=tr(s),s!==null&&$y(s)),t):(t.eventSystemFlags|=o,s=t.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),t)}function T_(t,s,a,o,d){switch(s){case"focusin":return Xs=hl(Xs,t,s,a,o,d),!0;case"dragenter":return Ks=hl(Ks,t,s,a,o,d),!0;case"mouseover":return Fs=hl(Fs,t,s,a,o,d),!0;case"pointerover":var f=d.pointerId;return ul.set(f,hl(ul.get(f)||null,t,s,a,o,d)),!0;case"gotpointercapture":return f=d.pointerId,dl.set(f,hl(dl.get(f)||null,t,s,a,o,d)),!0}return!1}function zy(t){var s=er(t.target);if(s!==null){var a=c(s);if(a!==null){if(s=a.tag,s===13){if(s=u(a),s!==null){t.blockedOn=s,yt(t.priority,function(){if(a.tag===13){var o=sn();o=pt(o);var d=fr(a,o);d!==null&&rn(d,a,o),ih(a,o)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ic(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=ah(t.nativeEvent);if(a===null){a=t.nativeEvent;var o=new a.constructor(a.type,a);uu=o,a.target.dispatchEvent(o),uu=null}else return s=tr(a),s!==null&&$y(s),t.blockedOn=a,!1;s.shift()}return!0}function qy(t,s,a){ic(t)&&a.delete(s)}function D_(){oh=!1,Xs!==null&&ic(Xs)&&(Xs=null),Ks!==null&&ic(Ks)&&(Ks=null),Fs!==null&&ic(Fs)&&(Fs=null),ul.forEach(qy),dl.forEach(qy)}function rc(t,s){t.blockedOn===s&&(t.blockedOn=null,oh||(oh=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,D_)))}var ac=null;function Hy(t){ac!==t&&(ac=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){ac===t&&(ac=null);for(var s=0;s<t.length;s+=3){var a=t[s],o=t[s+1],d=t[s+2];if(typeof o!="function"){if(lh(o||a)===null)continue;break}var f=tr(a);f!==null&&(t.splice(s,3),s-=3,ld(f,{pending:!0,data:d,method:a.method,action:o},o,d))}}))}function fl(t){function s(D){return rc(D,t)}Xs!==null&&rc(Xs,t),Ks!==null&&rc(Ks,t),Fs!==null&&rc(Fs,t),ul.forEach(s),dl.forEach(s);for(var a=0;a<Js.length;a++){var o=Js[a];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Js.length&&(a=Js[0],a.blockedOn===null);)zy(a),a.blockedOn===null&&Js.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var d=a[o],f=a[o+1],v=d[Ge]||null;if(typeof f=="function")v||Hy(a);else if(v){var S=null;if(f&&f.hasAttribute("formAction")){if(d=f,v=f[Ge]||null)S=v.formAction;else if(lh(d)!==null)continue}else S=v.action;typeof S=="function"?a[o+1]=S:(a.splice(o,3),o-=3),Hy(a)}}}function ch(t){this._internalRoot=t}lc.prototype.render=ch.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,o=sn();My(a,o,t,s,null,null)},lc.prototype.unmount=ch.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;My(t.current,2,null,t,null,null),Ho(),s[Nt]=null}};function lc(t){this._internalRoot=t}lc.prototype.unstable_scheduleHydration=function(t){if(t){var s=it();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Js.length&&s!==0&&s<Js[a].priority;a++);Js.splice(a,0,t),a===0&&zy(t)}};var Yy=e.version;if(Yy!=="19.1.1")throw Error(r(527,Yy,"19.1.1"));K.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(r(188)):(t=Object.keys(t).join(","),Error(r(268,t)));return t=g(s),t=t!==null?m(t):null,t=t===null?null:t.stateNode,t};var A_={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:I,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{Yt=oc.inject(A_),Be=oc}catch{}}return ml.createRoot=function(t,s){if(!l(t))throw Error(r(299));var a=!1,o="",d=rp,f=ap,v=lp,S=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(o=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(f=s.onCaughtError),s.onRecoverableError!==void 0&&(v=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=ky(t,1,!1,null,null,a,o,d,f,v,S,null),t[Nt]=s.current,Vd(t),new ch(s)},ml.hydrateRoot=function(t,s,a){if(!l(t))throw Error(r(299));var o=!1,d="",f=rp,v=ap,S=lp,D=null,k=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(D=a.unstable_transitionCallbacks),a.formState!==void 0&&(k=a.formState)),s=ky(t,1,!0,s,a??null,o,d,f,v,S,D,k),s.context=Ny(null),a=s.current,o=sn(),o=pt(o),d=Ns(o),d.callback=null,Ms(a,d,o),a=o,s.current.lanes=a,Ve(s,a),Yn(s),t[Nt]=s.current,Vd(t),new lc(s)},ml.version="19.1.1",ml}var Wy;function z_(){if(Wy)return hh.exports;Wy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),hh.exports=B_(),hh.exports}var q_=z_();const H_=Sf(q_);var yl=xb();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dl(){return Dl=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Dl.apply(this,arguments)}var ii;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(ii||(ii={}));const ev="popstate";function Y_(i){i===void 0&&(i={});function e(l,c){let{pathname:u="/",search:h="",hash:g=""}=Yi(l.location.hash.substr(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),qh("",{pathname:u,search:h,hash:g},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function n(l,c){let u=l.document.querySelector("base"),h="";if(u&&u.getAttribute("href")){let g=l.location.href,m=g.indexOf("#");h=m===-1?g:g.slice(0,m)}return h+"#"+(typeof c=="string"?c:xc(c))}function r(l,c){Ef(l.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(c)+")")}return V_(e,n,r,i)}function tt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Ef(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function G_(){return Math.random().toString(36).substr(2,8)}function tv(i,e){return{usr:i.state,key:i.key,idx:e}}function qh(i,e,n,r){return n===void 0&&(n=null),Dl({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?Yi(e):e,{state:n,key:e&&e.key||r||G_()})}function xc(i){let{pathname:e="/",search:n="",hash:r=""}=i;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Yi(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substr(n),i=i.substr(0,n));let r=i.indexOf("?");r>=0&&(e.search=i.substr(r),i=i.substr(0,r)),i&&(e.pathname=i)}return e}function V_(i,e,n,r){r===void 0&&(r={});let{window:l=document.defaultView,v5Compat:c=!1}=r,u=l.history,h=ii.Pop,g=null,m=p();m==null&&(m=0,u.replaceState(Dl({},u.state,{idx:m}),""));function p(){return(u.state||{idx:null}).idx}function y(){h=ii.Pop;let A=p(),U=A==null?null:A-m;m=A,g&&g({action:h,location:x.location,delta:U})}function w(A,U){h=ii.Push;let z=qh(x.location,A,U);n&&n(z,A),m=p()+1;let $=tv(z,m),H=x.createHref(z);try{u.pushState($,"",H)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;l.location.assign(H)}c&&g&&g({action:h,location:x.location,delta:1})}function _(A,U){h=ii.Replace;let z=qh(x.location,A,U);n&&n(z,A),m=p();let $=tv(z,m),H=x.createHref(z);u.replaceState($,"",H),c&&g&&g({action:h,location:x.location,delta:0})}function C(A){let U=l.location.origin!=="null"?l.location.origin:l.location.href,z=typeof A=="string"?A:xc(A);return z=z.replace(/ $/,"%20"),tt(U,"No window.location.(origin|href) available to create URL for href: "+z),new URL(z,U)}let x={get action(){return h},get location(){return i(l,u)},listen(A){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(ev,y),g=A,()=>{l.removeEventListener(ev,y),g=null}},createHref(A){return e(l,A)},createURL:C,encodeLocation(A){let U=C(A);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:w,replace:_,go(A){return u.go(A)}};return x}var nv;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(nv||(nv={}));function Q_(i,e,n){return n===void 0&&(n="/"),P_(i,e,n)}function P_(i,e,n,r){let l=typeof e=="string"?Yi(e):e,c=xf(l.pathname||"/",n);if(c==null)return null;let u=Cb(i);X_(u);let h=null;for(let g=0;h==null&&g<u.length;++g){let m=aE(c);h=sE(u[g],m)}return h}function Cb(i,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let l=(c,u,h)=>{let g={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};g.relativePath.startsWith("/")&&(tt(g.relativePath.startsWith(r),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(r.length));let m=ai([r,g.relativePath]),p=n.concat(g);c.children&&c.children.length>0&&(tt(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Cb(c.children,e,p,m)),!(c.path==null&&!c.index)&&e.push({path:m,score:tE(m,c.index),routesMeta:p})};return i.forEach((c,u)=>{var h;if(c.path===""||!((h=c.path)!=null&&h.includes("?")))l(c,u);else for(let g of Tb(c.path))l(c,u,g)}),e}function Tb(i){let e=i.split("/");if(e.length===0)return[];let[n,...r]=e,l=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return l?[c,""]:[c];let u=Tb(r.join("/")),h=[];return h.push(...u.map(g=>g===""?c:[c,g].join("/"))),l&&h.push(...u),h.map(g=>i.startsWith("/")&&g===""?"/":g)}function X_(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:nE(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const K_=/^:[\w-]+$/,F_=3,J_=2,Z_=1,W_=10,eE=-2,sv=i=>i==="*";function tE(i,e){let n=i.split("/"),r=n.length;return n.some(sv)&&(r+=eE),e&&(r+=J_),n.filter(l=>!sv(l)).reduce((l,c)=>l+(K_.test(c)?F_:c===""?Z_:W_),r)}function nE(i,e){return i.length===e.length&&i.slice(0,-1).every((r,l)=>r===e[l])?i[i.length-1]-e[e.length-1]:0}function sE(i,e,n){let{routesMeta:r}=i,l={},c="/",u=[];for(let h=0;h<r.length;++h){let g=r[h],m=h===r.length-1,p=c==="/"?e:e.slice(c.length)||"/",y=iE({path:g.relativePath,caseSensitive:g.caseSensitive,end:m},p),w=g.route;if(!y)return null;Object.assign(l,y.params),u.push({params:l,pathname:ai([c,y.pathname]),pathnameBase:uE(ai([c,y.pathnameBase])),route:w}),y.pathnameBase!=="/"&&(c=ai([c,y.pathnameBase]))}return u}function iE(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,r]=rE(i.path,i.caseSensitive,i.end),l=e.match(n);if(!l)return null;let c=l[0],u=c.replace(/(.)\/+$/,"$1"),h=l.slice(1);return{params:r.reduce((m,p,y)=>{let{paramName:w,isOptional:_}=p;if(w==="*"){let x=h[y]||"";u=c.slice(0,c.length-x.length).replace(/(.)\/+$/,"$1")}const C=h[y];return _&&!C?m[w]=void 0:m[w]=(C||"").replace(/%2F/g,"/"),m},{}),pathname:c,pathnameBase:u,pattern:i}}function rE(i,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ef(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let r=[],l="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,g)=>(r.push({paramName:h,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(r.push({paramName:"*"}),l+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":i!==""&&i!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,e?void 0:"i"),r]}function aE(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ef(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function xf(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=i.charAt(n);return r&&r!=="/"?null:i.slice(n)||"/"}function lE(i,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:l=""}=typeof i=="string"?Yi(i):i;return{pathname:n?n.startsWith("/")?n:oE(n,e):e,search:dE(r),hash:hE(l)}}function oE(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function ph(i,e,n,r){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cE(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Cf(i,e){let n=cE(i);return e?n.map((r,l)=>l===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Tf(i,e,n,r){r===void 0&&(r=!1);let l;typeof i=="string"?l=Yi(i):(l=Dl({},i),tt(!l.pathname||!l.pathname.includes("?"),ph("?","pathname","search",l)),tt(!l.pathname||!l.pathname.includes("#"),ph("#","pathname","hash",l)),tt(!l.search||!l.search.includes("#"),ph("#","search","hash",l)));let c=i===""||l.pathname==="",u=c?"/":l.pathname,h;if(u==null)h=n;else{let y=e.length-1;if(!r&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),y-=1;l.pathname=w.join("/")}h=y>=0?e[y]:"/"}let g=lE(l,h),m=u&&u!=="/"&&u.endsWith("/"),p=(c||u===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(m||p)&&(g.pathname+="/"),g}const ai=i=>i.join("/").replace(/\/\/+/g,"/"),uE=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),dE=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,hE=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function fE(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const Db=["post","put","patch","delete"];new Set(Db);const gE=["get",...Db];new Set(gE);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Al(){return Al=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Al.apply(this,arguments)}const Df=E.createContext(null),mE=E.createContext(null),ui=E.createContext(null),Hc=E.createContext(null),Es=E.createContext({outlet:null,matches:[],isDataRoute:!1}),Ab=E.createContext(null);function pE(i,e){let{relative:n}=e===void 0?{}:e;da()||tt(!1);let{basename:r,navigator:l}=E.useContext(ui),{hash:c,pathname:u,search:h}=Ob(i,{relative:n}),g=u;return r!=="/"&&(g=u==="/"?r:ai([r,u])),l.createHref({pathname:g,search:h,hash:c})}function da(){return E.useContext(Hc)!=null}function Hl(){return da()||tt(!1),E.useContext(Hc).location}function Rb(i){E.useContext(ui).static||E.useLayoutEffect(i)}function Cn(){let{isDataRoute:i}=E.useContext(Es);return i?RE():yE()}function yE(){da()||tt(!1);let i=E.useContext(Df),{basename:e,future:n,navigator:r}=E.useContext(ui),{matches:l}=E.useContext(Es),{pathname:c}=Hl(),u=JSON.stringify(Cf(l,n.v7_relativeSplatPath)),h=E.useRef(!1);return Rb(()=>{h.current=!0}),E.useCallback(function(m,p){if(p===void 0&&(p={}),!h.current)return;if(typeof m=="number"){r.go(m);return}let y=Tf(m,JSON.parse(u),c,p.relative==="path");i==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:ai([e,y.pathname])),(p.replace?r.replace:r.push)(y,p.state,p)},[e,r,u,c,i])}function jb(){let{matches:i}=E.useContext(Es),e=i[i.length-1];return e?e.params:{}}function Ob(i,e){let{relative:n}=e===void 0?{}:e,{future:r}=E.useContext(ui),{matches:l}=E.useContext(Es),{pathname:c}=Hl(),u=JSON.stringify(Cf(l,r.v7_relativeSplatPath));return E.useMemo(()=>Tf(i,JSON.parse(u),c,n==="path"),[i,u,c,n])}function vE(i,e){return bE(i,e)}function bE(i,e,n,r){da()||tt(!1);let{navigator:l}=E.useContext(ui),{matches:c}=E.useContext(Es),u=c[c.length-1],h=u?u.params:{};u&&u.pathname;let g=u?u.pathnameBase:"/";u&&u.route;let m=Hl(),p;if(e){var y;let A=typeof e=="string"?Yi(e):e;g==="/"||(y=A.pathname)!=null&&y.startsWith(g)||tt(!1),p=A}else p=m;let w=p.pathname||"/",_=w;if(g!=="/"){let A=g.replace(/^\//,"").split("/");_="/"+w.replace(/^\//,"").split("/").slice(A.length).join("/")}let C=Q_(i,{pathname:_}),x=xE(C&&C.map(A=>Object.assign({},A,{params:Object.assign({},h,A.params),pathname:ai([g,l.encodeLocation?l.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?g:ai([g,l.encodeLocation?l.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),c,n,r);return e&&x?E.createElement(Hc.Provider,{value:{location:Al({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:ii.Pop}},x):x}function wE(){let i=AE(),e=fE(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,l={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},e),n?E.createElement("pre",{style:l},n):null,null)}const SE=E.createElement(wE,null);class _E extends E.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?E.createElement(Es.Provider,{value:this.props.routeContext},E.createElement(Ab.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function EE(i){let{routeContext:e,match:n,children:r}=i,l=E.useContext(Df);return l&&l.static&&l.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=n.route.id),E.createElement(Es.Provider,{value:e},r)}function xE(i,e,n,r){var l;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),i==null){var c;if(!n)return null;if(n.errors)i=n.matches;else if((c=r)!=null&&c.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let u=i,h=(l=n)==null?void 0:l.errors;if(h!=null){let p=u.findIndex(y=>y.route.id&&h?.[y.route.id]!==void 0);p>=0||tt(!1),u=u.slice(0,Math.min(u.length,p+1))}let g=!1,m=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<u.length;p++){let y=u[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(m=p),y.route.id){let{loaderData:w,errors:_}=n,C=y.route.loader&&w[y.route.id]===void 0&&(!_||_[y.route.id]===void 0);if(y.route.lazy||C){g=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}return u.reduceRight((p,y,w)=>{let _,C=!1,x=null,A=null;n&&(_=h&&y.route.id?h[y.route.id]:void 0,x=y.route.errorElement||SE,g&&(m<0&&w===0?(jE("route-fallback"),C=!0,A=null):m===w&&(C=!0,A=y.route.hydrateFallbackElement||null)));let U=e.concat(u.slice(0,w+1)),z=()=>{let $;return _?$=x:C?$=A:y.route.Component?$=E.createElement(y.route.Component,null):y.route.element?$=y.route.element:$=p,E.createElement(EE,{match:y,routeContext:{outlet:p,matches:U,isDataRoute:n!=null},children:$})};return n&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?E.createElement(_E,{location:n.location,revalidation:n.revalidation,component:x,error:_,children:z(),routeContext:{outlet:null,matches:U,isDataRoute:!0}}):z()},null)}var Lb=(function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i})(Lb||{}),kb=(function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i})(kb||{});function CE(i){let e=E.useContext(Df);return e||tt(!1),e}function TE(i){let e=E.useContext(mE);return e||tt(!1),e}function DE(i){let e=E.useContext(Es);return e||tt(!1),e}function Nb(i){let e=DE(),n=e.matches[e.matches.length-1];return n.route.id||tt(!1),n.route.id}function AE(){var i;let e=E.useContext(Ab),n=TE(),r=Nb();return e!==void 0?e:(i=n.errors)==null?void 0:i[r]}function RE(){let{router:i}=CE(Lb.UseNavigateStable),e=Nb(kb.UseNavigateStable),n=E.useRef(!1);return Rb(()=>{n.current=!0}),E.useCallback(function(l,c){c===void 0&&(c={}),n.current&&(typeof l=="number"?i.navigate(l):i.navigate(l,Al({fromRouteId:e},c)))},[i,e])}const iv={};function jE(i,e,n){iv[i]||(iv[i]=!0)}function OE(i,e){i?.v7_startTransition,i?.v7_relativeSplatPath}function LE(i){let{to:e,replace:n,state:r,relative:l}=i;da()||tt(!1);let{future:c,static:u}=E.useContext(ui),{matches:h}=E.useContext(Es),{pathname:g}=Hl(),m=Cn(),p=Tf(e,Cf(h,c.v7_relativeSplatPath),g,l==="path"),y=JSON.stringify(p);return E.useEffect(()=>m(JSON.parse(y),{replace:n,state:r,relative:l}),[m,y,l,n,r]),null}function bs(i){tt(!1)}function kE(i){let{basename:e="/",children:n=null,location:r,navigationType:l=ii.Pop,navigator:c,static:u=!1,future:h}=i;da()&&tt(!1);let g=e.replace(/^\/*/,"/"),m=E.useMemo(()=>({basename:g,navigator:c,static:u,future:Al({v7_relativeSplatPath:!1},h)}),[g,h,c,u]);typeof r=="string"&&(r=Yi(r));let{pathname:p="/",search:y="",hash:w="",state:_=null,key:C="default"}=r,x=E.useMemo(()=>{let A=xf(p,g);return A==null?null:{location:{pathname:A,search:y,hash:w,state:_,key:C},navigationType:l}},[g,p,y,w,_,C,l]);return x==null?null:E.createElement(ui.Provider,{value:m},E.createElement(Hc.Provider,{children:n,value:x}))}function NE(i){let{children:e,location:n}=i;return vE(Hh(e),n)}new Promise(()=>{});function Hh(i,e){e===void 0&&(e=[]);let n=[];return E.Children.forEach(i,(r,l)=>{if(!E.isValidElement(r))return;let c=[...e,l];if(r.type===E.Fragment){n.push.apply(n,Hh(r.props.children,c));return}r.type!==bs&&tt(!1),!r.props.index||!r.props.children||tt(!1);let u={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Hh(r.props.children,c)),n.push(u)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yh(){return Yh=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])}return i},Yh.apply(this,arguments)}function ME(i,e){if(i==null)return{};var n={},r=Object.keys(i),l,c;for(c=0;c<r.length;c++)l=r[c],!(e.indexOf(l)>=0)&&(n[l]=i[l]);return n}function UE(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function $E(i,e){return i.button===0&&(!e||e==="_self")&&!UE(i)}const IE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],BE="6";try{window.__reactRouterVersion=BE}catch{}const zE="startTransition",rv=M_[zE];function qE(i){let{basename:e,children:n,future:r,window:l}=i,c=E.useRef();c.current==null&&(c.current=Y_({window:l,v5Compat:!0}));let u=c.current,[h,g]=E.useState({action:u.action,location:u.location}),{v7_startTransition:m}=r||{},p=E.useCallback(y=>{m&&rv?rv(()=>g(y)):g(y)},[g,m]);return E.useLayoutEffect(()=>u.listen(p),[u,p]),E.useEffect(()=>OE(r),[r]),E.createElement(kE,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:u,future:r})}const HE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,av=E.forwardRef(function(e,n){let{onClick:r,relative:l,reloadDocument:c,replace:u,state:h,target:g,to:m,preventScrollReset:p,viewTransition:y}=e,w=ME(e,IE),{basename:_}=E.useContext(ui),C,x=!1;if(typeof m=="string"&&YE.test(m)&&(C=m,HE))try{let $=new URL(window.location.href),H=m.startsWith("//")?new URL($.protocol+m):new URL(m),j=xf(H.pathname,_);H.origin===$.origin&&j!=null?m=j+H.search+H.hash:x=!0}catch{}let A=pE(m,{relative:l}),U=GE(m,{replace:u,state:h,target:g,preventScrollReset:p,relative:l,viewTransition:y});function z($){r&&r($),$.defaultPrevented||U($)}return E.createElement("a",Yh({},w,{href:C||A,onClick:x||c?r:z,ref:n,target:g}))});var lv;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(lv||(lv={}));var ov;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(ov||(ov={}));function GE(i,e){let{target:n,replace:r,state:l,preventScrollReset:c,relative:u,viewTransition:h}=e===void 0?{}:e,g=Cn(),m=Hl(),p=Ob(i,{relative:u});return E.useCallback(y=>{if($E(y,n)){y.preventDefault();let w=r!==void 0?r:xc(m)===xc(p);g(i,{replace:w,state:l,preventScrollReset:c,relative:u,viewTransition:h})}},[m,g,p,r,l,n,i,c,u,h])}const kn=()=>new Map,Gh=i=>{const e=kn();return i.forEach((n,r)=>{e.set(r,n)}),e},di=(i,e,n)=>{let r=i.get(e);return r===void 0&&i.set(e,r=n()),r},VE=(i,e)=>{const n=[];for(const[r,l]of i)n.push(e(l,r));return n},QE=(i,e)=>{for(const[n,r]of i)if(e(r,n))return!0;return!1},ia=()=>new Set,yh=i=>i[i.length-1],PE=(i,e)=>{for(let n=0;n<e.length;n++)i.push(e[n])},Ii=Array.from,XE=Array.isArray;class KE{constructor(){this._observers=kn()}on(e,n){return di(this._observers,e,ia).add(n),n}once(e,n){const r=(...l)=>{this.off(e,r),n(...l)};this.on(e,r)}off(e,n){const r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Ii((this._observers.get(e)||kn()).values()).forEach(r=>r(...n))}destroy(){this._observers=kn()}}const li=Math.floor,bc=Math.abs,Mb=(i,e)=>i<e?i:e,Gi=(i,e)=>i>e?i:e,Ub=i=>i!==0?i<0:1/i<0,cv=1,uv=2,vh=4,bh=8,Rl=32,_s=64,cn=128,Yc=31,Vh=63,Ui=127,FE=2147483647,$b=Number.MAX_SAFE_INTEGER,JE=Number.isInteger||(i=>typeof i=="number"&&isFinite(i)&&li(i)===i),ZE=i=>i.toLowerCase(),WE=/^\s*/g,ex=i=>i.replace(WE,""),tx=/([A-Z])/g,dv=(i,e)=>ex(i.replace(tx,n=>`${e}${ZE(n)}`)),nx=i=>{const e=unescape(encodeURIComponent(i)),n=e.length,r=new Uint8Array(n);for(let l=0;l<n;l++)r[l]=e.codePointAt(l);return r},jl=typeof TextEncoder<"u"?new TextEncoder:null,sx=i=>jl.encode(i),ix=jl?sx:nx;let wl=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});wl&&wl.decode(new Uint8Array).length===1&&(wl=null);class Yl{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Gc=()=>new Yl,rx=i=>{let e=i.cpos;for(let n=0;n<i.bufs.length;n++)e+=i.bufs[n].length;return e},Qn=i=>{const e=new Uint8Array(rx(i));let n=0;for(let r=0;r<i.bufs.length;r++){const l=i.bufs[r];e.set(l,n),n+=l.length}return e.set(new Uint8Array(i.cbuf.buffer,0,i.cpos),n),e},ax=(i,e)=>{const n=i.cbuf.length;n-i.cpos<e&&(i.bufs.push(new Uint8Array(i.cbuf.buffer,0,i.cpos)),i.cbuf=new Uint8Array(Gi(n,e)*2),i.cpos=0)},Et=(i,e)=>{const n=i.cbuf.length;i.cpos===n&&(i.bufs.push(i.cbuf),i.cbuf=new Uint8Array(n*2),i.cpos=0),i.cbuf[i.cpos++]=e},Qh=Et,De=(i,e)=>{for(;e>Ui;)Et(i,cn|Ui&e),e=li(e/128);Et(i,Ui&e)},Af=(i,e)=>{const n=Ub(e);for(n&&(e=-e),Et(i,(e>Vh?cn:0)|(n?_s:0)|Vh&e),e=li(e/64);e>0;)Et(i,(e>Ui?cn:0)|Ui&e),e=li(e/128)},Ph=new Uint8Array(3e4),lx=Ph.length/3,ox=(i,e)=>{if(e.length<lx){const n=jl.encodeInto(e,Ph).written||0;De(i,n);for(let r=0;r<n;r++)Et(i,Ph[r])}else an(i,ix(e))},cx=(i,e)=>{const n=unescape(encodeURIComponent(e)),r=n.length;De(i,r);for(let l=0;l<r;l++)Et(i,n.codePointAt(l))},Wr=jl&&jl.encodeInto?ox:cx,Vc=(i,e)=>{const n=i.cbuf.length,r=i.cpos,l=Mb(n-r,e.length),c=e.length-l;i.cbuf.set(e.subarray(0,l),r),i.cpos+=l,c>0&&(i.bufs.push(i.cbuf),i.cbuf=new Uint8Array(Gi(n*2,c)),i.cbuf.set(e.subarray(l)),i.cpos=c)},an=(i,e)=>{De(i,e.byteLength),Vc(i,e)},Rf=(i,e)=>{ax(i,e);const n=new DataView(i.cbuf.buffer,i.cpos,e);return i.cpos+=e,n},ux=(i,e)=>Rf(i,4).setFloat32(0,e,!1),dx=(i,e)=>Rf(i,8).setFloat64(0,e,!1),hx=(i,e)=>Rf(i,8).setBigInt64(0,e,!1),hv=new DataView(new ArrayBuffer(4)),fx=i=>(hv.setFloat32(0,i),hv.getFloat32(0)===i),Ol=(i,e)=>{switch(typeof e){case"string":Et(i,119),Wr(i,e);break;case"number":JE(e)&&bc(e)<=FE?(Et(i,125),Af(i,e)):fx(e)?(Et(i,124),ux(i,e)):(Et(i,123),dx(i,e));break;case"bigint":Et(i,122),hx(i,e);break;case"object":if(e===null)Et(i,126);else if(XE(e)){Et(i,117),De(i,e.length);for(let n=0;n<e.length;n++)Ol(i,e[n])}else if(e instanceof Uint8Array)Et(i,116),an(i,e);else{Et(i,118);const n=Object.keys(e);De(i,n.length);for(let r=0;r<n.length;r++){const l=n[r];Wr(i,l),Ol(i,e[l])}}break;case"boolean":Et(i,e?120:121);break;default:Et(i,127)}};class fv extends Yl{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&De(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}}const gv=i=>{i.count>0&&(Af(i.encoder,i.count===1?i.s:-i.s),i.count>1&&De(i.encoder,i.count-2))};class wc{constructor(){this.encoder=new Yl,this.s=0,this.count=0}write(e){this.s===e?this.count++:(gv(this),this.count=1,this.s=e)}toUint8Array(){return gv(this),Qn(this.encoder)}}const mv=i=>{if(i.count>0){const e=i.diff*2+(i.count===1?0:1);Af(i.encoder,e),i.count>1&&De(i.encoder,i.count-2)}};class wh{constructor(){this.encoder=new Yl,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(mv(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return mv(this),Qn(this.encoder)}}class gx{constructor(){this.sarr=[],this.s="",this.lensE=new wc}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){const e=new Yl;return this.sarr.push(this.s),this.s="",Wr(e,this.sarr.join("")),Vc(e,this.lensE.toUint8Array()),Qn(e)}}const oi=i=>new Error(i),Pn=()=>{throw oi("Method unimplemented")},Xn=()=>{throw oi("Unexpected case")},Ib=oi("Unexpected end of array"),Bb=oi("Integer out of Range");class Qc{constructor(e){this.arr=e,this.pos=0}}const ha=i=>new Qc(i),mx=i=>i.pos!==i.arr.length,px=(i,e)=>{const n=new Uint8Array(i.arr.buffer,i.pos+i.arr.byteOffset,e);return i.pos+=e,n},ln=i=>px(i,ye(i)),ra=i=>i.arr[i.pos++],ye=i=>{let e=0,n=1;const r=i.arr.length;for(;i.pos<r;){const l=i.arr[i.pos++];if(e=e+(l&Ui)*n,n*=128,l<cn)return e;if(e>$b)throw Bb}throw Ib},jf=i=>{let e=i.arr[i.pos++],n=e&Vh,r=64;const l=(e&_s)>0?-1:1;if((e&cn)===0)return l*n;const c=i.arr.length;for(;i.pos<c;){if(e=i.arr[i.pos++],n=n+(e&Ui)*r,r*=128,e<cn)return l*n;if(n>$b)throw Bb}throw Ib},yx=i=>{let e=ye(i);if(e===0)return"";{let n=String.fromCodePoint(ra(i));if(--e<100)for(;e--;)n+=String.fromCodePoint(ra(i));else for(;e>0;){const r=e<1e4?e:1e4,l=i.arr.subarray(i.pos,i.pos+r);i.pos+=r,n+=String.fromCodePoint.apply(null,l),e-=r}return decodeURIComponent(escape(n))}},vx=i=>wl.decode(ln(i)),ea=wl?vx:yx,Of=(i,e)=>{const n=new DataView(i.arr.buffer,i.arr.byteOffset+i.pos,e);return i.pos+=e,n},bx=i=>Of(i,4).getFloat32(0,!1),wx=i=>Of(i,8).getFloat64(0,!1),Sx=i=>Of(i,8).getBigInt64(0,!1),_x=[i=>{},i=>null,jf,bx,wx,Sx,i=>!1,i=>!0,ea,i=>{const e=ye(i),n={};for(let r=0;r<e;r++){const l=ea(i);n[l]=Ll(i)}return n},i=>{const e=ye(i),n=[];for(let r=0;r<e;r++)n.push(Ll(i));return n},ln],Ll=i=>_x[127-ra(i)](i);class pv extends Qc{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),mx(this)?this.count=ye(this)+1:this.count=-1),this.count--,this.s}}class Sc extends Qc{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=jf(this);const e=Ub(this.s);this.count=1,e&&(this.s=-this.s,this.count=ye(this)+2)}return this.count--,this.s}}class Sh extends Qc{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const e=jf(this),n=e&1;this.diff=li(e/2),this.count=1,n&&(this.count=ye(this)+2)}return this.s+=this.diff,this.count--,this.s}}class Ex{constructor(e){this.decoder=new Sc(e),this.str=ea(this.decoder),this.spos=0}read(){const e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}}const xx=crypto.getRandomValues.bind(crypto),zb=()=>xx(new Uint32Array(1))[0],Cx="10000000-1000-4000-8000"+-1e11,Tx=()=>Cx.replace(/[018]/g,i=>(i^zb()&15>>i/4).toString(16)),yv=i=>new Promise(i);Promise.all.bind(Promise);const vv=i=>i===void 0?null:i;class Dx{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}}let qb=new Dx,Ax=!0;try{typeof localStorage<"u"&&localStorage&&(qb=localStorage,Ax=!1)}catch{}const Rx=qb,jx=Object.assign,Ox=Object.keys,Lx=(i,e)=>{for(const n in i)e(i[n],n)},bv=i=>Ox(i).length,kx=i=>{for(const e in i)return!1;return!0},Nx=(i,e)=>{for(const n in i)if(!e(i[n],n))return!1;return!0},Mx=(i,e)=>Object.prototype.hasOwnProperty.call(i,e),Ux=(i,e)=>i===e||bv(i)===bv(e)&&Nx(i,(n,r)=>(n!==void 0||Mx(e,r))&&e[r]===n),$x=Object.freeze,Hb=i=>{for(const e in i){const n=i[e];(typeof n=="object"||typeof n=="function")&&Hb(i[e])}return $x(i)},Lf=(i,e,n=0)=>{try{for(;n<i.length;n++)i[n](...e)}finally{n<i.length&&Lf(i,e,n+1)}},Ix=i=>i,Bx=(i,e)=>e.includes(i);var Yb={};const kl=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let Gn;const zx=()=>{if(Gn===void 0)if(kl){Gn=kn();const i=process.argv;let e=null;for(let n=0;n<i.length;n++){const r=i[n];r[0]==="-"?(e!==null&&Gn.set(e,""),e=r):e!==null&&(Gn.set(e,r),e=null)}e!==null&&Gn.set(e,"")}else typeof location=="object"?(Gn=kn(),(location.search||"?").slice(1).split("&").forEach(i=>{if(i.length!==0){const[e,n]=i.split("=");Gn.set(`--${dv(e,"-")}`,n),Gn.set(`-${dv(e,"-")}`,n)}})):Gn=kn();return Gn},Xh=i=>zx().has(i),Cc=i=>vv(kl?Yb[i.toUpperCase().replaceAll("-","_")]:Rx.getItem(i)),Gb=i=>Xh("--"+i)||Cc(i)!==null;Gb("production");const qx=kl&&Bx(Yb.FORCE_COLOR,["true","1","2"]),Hx=qx||!Xh("--no-colors")&&!Gb("no-color")&&(!kl||process.stdout.isTTY)&&(!kl||Xh("--color")||Cc("COLORTERM")!==null||(Cc("TERM")||"").includes("color")),Yx=i=>new Uint8Array(i),Gx=i=>{const e=Yx(i.byteLength);return e.set(i),e};class Vx{constructor(e,n){this.left=e,this.right=n}}const vs=(i,e)=>new Vx(i,e);typeof DOMParser<"u"&&new DOMParser;const Qx=i=>VE(i,(e,n)=>`${n}:${e};`).join(""),xs=Symbol,Vb=xs(),Qb=xs(),Px=xs(),Xx=xs(),Kx=xs(),Pb=xs(),Fx=xs(),kf=xs(),Jx=xs(),Zx=i=>{i.length===1&&i[0]?.constructor===Function&&(i=i[0]());const e=[],n=[];let r=0;for(;r<i.length;r++){const l=i[r];if(l===void 0)break;if(l.constructor===String||l.constructor===Number)e.push(l);else if(l.constructor===Object)break}for(r>0&&n.push(e.join(""));r<i.length;r++){const l=i[r];l instanceof Symbol||n.push(l)}return n},Wx={[Vb]:vs("font-weight","bold"),[Qb]:vs("font-weight","normal"),[Px]:vs("color","blue"),[Kx]:vs("color","green"),[Xx]:vs("color","grey"),[Pb]:vs("color","red"),[Fx]:vs("color","purple"),[kf]:vs("color","orange"),[Jx]:vs("color","black")},eC=i=>{i.length===1&&i[0]?.constructor===Function&&(i=i[0]());const e=[],n=[],r=kn();let l=[],c=0;for(;c<i.length;c++){const u=i[c],h=Wx[u];if(h!==void 0)r.set(h.left,h.right);else{if(u===void 0)break;if(u.constructor===String||u.constructor===Number){const g=Qx(r);c>0||g.length>0?(e.push("%c"+u),n.push(g)):e.push(u)}else break}}for(c>0&&(l=n,l.unshift(e.join("")));c<i.length;c++){const u=i[c];u instanceof Symbol||l.push(u)}return l},Xb=Hx?eC:Zx,tC=(...i)=>{console.log(...Xb(i)),Kb.forEach(e=>e.print(i))},nC=(...i)=>{console.warn(...Xb(i)),i.unshift(kf),Kb.forEach(e=>e.print(i))},Kb=ia(),Fb=i=>({[Symbol.iterator](){return this},next:i}),sC=(i,e)=>Fb(()=>{let n;do n=i.next();while(!n.done&&!e(n.value));return n}),_h=(i,e)=>Fb(()=>{const{done:n,value:r}=i.next();return{done:n,value:n?void 0:e(r)}});class Nf{constructor(e,n){this.clock=e,this.len=n}}class Gl{constructor(){this.clients=new Map}}const Jb=(i,e,n)=>e.clients.forEach((r,l)=>{const c=i.doc.store.clients.get(l);if(c!=null){const u=c[c.length-1],h=u.id.clock+u.length;for(let g=0,m=r[g];g<r.length&&m.clock<h;m=r[++g])l0(i,c,m.clock,m.len,n)}}),iC=(i,e)=>{let n=0,r=i.length-1;for(;n<=r;){const l=li((n+r)/2),c=i[l],u=c.clock;if(u<=e){if(e<u+c.len)return l;n=l+1}else r=l-1}return null},Zb=(i,e)=>{const n=i.clients.get(e.client);return n!==void 0&&iC(n,e.clock)!==null},Mf=i=>{i.clients.forEach(e=>{e.sort((l,c)=>l.clock-c.clock);let n,r;for(n=1,r=1;n<e.length;n++){const l=e[r-1],c=e[n];l.clock+l.len>=c.clock?l.len=Gi(l.len,c.clock+c.len-l.clock):(r<n&&(e[r]=c),r++)}e.length=r})},rC=i=>{const e=new Gl;for(let n=0;n<i.length;n++)i[n].clients.forEach((r,l)=>{if(!e.clients.has(l)){const c=r.slice();for(let u=n+1;u<i.length;u++)PE(c,i[u].clients.get(l)||[]);e.clients.set(l,c)}});return Mf(e),e},Tc=(i,e,n,r)=>{di(i.clients,e,()=>[]).push(new Nf(n,r))},aC=()=>new Gl,lC=i=>{const e=aC();return i.clients.forEach((n,r)=>{const l=[];for(let c=0;c<n.length;c++){const u=n[c];if(u.deleted){const h=u.id.clock;let g=u.length;if(c+1<n.length)for(let m=n[c+1];c+1<n.length&&m.deleted;m=n[++c+1])g+=m.length;l.push(new Nf(h,g))}}l.length>0&&e.clients.set(r,l)}),e},fa=(i,e)=>{De(i.restEncoder,e.clients.size),Ii(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{i.resetDsCurVal(),De(i.restEncoder,n);const l=r.length;De(i.restEncoder,l);for(let c=0;c<l;c++){const u=r[c];i.writeDsClock(u.clock),i.writeDsLen(u.len)}})},Uf=i=>{const e=new Gl,n=ye(i.restDecoder);for(let r=0;r<n;r++){i.resetDsCurVal();const l=ye(i.restDecoder),c=ye(i.restDecoder);if(c>0){const u=di(e.clients,l,()=>[]);for(let h=0;h<c;h++)u.push(new Nf(i.readDsClock(),i.readDsLen()))}}return e},wv=(i,e,n)=>{const r=new Gl,l=ye(i.restDecoder);for(let c=0;c<l;c++){i.resetDsCurVal();const u=ye(i.restDecoder),h=ye(i.restDecoder),g=n.clients.get(u)||[],m=Ct(n,u);for(let p=0;p<h;p++){const y=i.readDsClock(),w=y+i.readDsLen();if(y<m){m<w&&Tc(r,u,m,w-m);let _=Kn(g,y),C=g[_];for(!C.deleted&&C.id.clock<y&&(g.splice(_+1,0,kc(e,C,y-C.id.clock)),_++);_<g.length&&(C=g[_++],C.id.clock<w);)C.deleted||(w<C.id.clock+C.length&&g.splice(_,0,kc(e,C,w-C.id.clock)),C.delete(e))}else Tc(r,u,y,w-y)}}if(r.clients.size>0){const c=new zi;return De(c.restEncoder,0),fa(c,r),c.toUint8Array()}return null},Wb=zb;class Bi extends KE{constructor({guid:e=Tx(),collectionid:n=null,gc:r=!0,gcFilter:l=()=>!0,meta:c=null,autoLoad:u=!1,shouldLoad:h=!0}={}){super(),this.gc=r,this.gcFilter=l,this.clientID=Wb(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new r0,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=h,this.autoLoad=u,this.meta=c,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=yv(m=>{this.on("load",()=>{this.isLoaded=!0,m(this)})});const g=()=>yv(m=>{const p=y=>{(y===void 0||y===!0)&&(this.off("sync",p),m())};this.on("sync",p)});this.on("sync",m=>{m===!1&&this.isSynced&&(this.whenSynced=g()),this.isSynced=m===void 0||m===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=g()}load(){const e=this._item;e!==null&&!this.shouldLoad&&Ye(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Ii(this.subdocs).map(e=>e.guid))}transact(e,n=null){return Ye(this,e,n)}get(e,n=Lt){const r=di(this.share,e,()=>{const c=new n;return c._integrate(this,null),c}),l=r.constructor;if(n!==Lt&&l!==n)if(l===Lt){const c=new n;c._map=r._map,r._map.forEach(u=>{for(;u!==null;u=u.left)u.parent=c}),c._start=r._start;for(let u=c._start;u!==null;u=u.right)u.parent=c;return c._length=r._length,this.share.set(e,c),c._integrate(this,null),c}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,na)}getText(e=""){return this.get(e,oa)}getMap(e=""){return this.get(e,la)}getXmlElement(e=""){return this.get(e,ca)}getXmlFragment(e=""){return this.get(e,qi)}toJSON(){const e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,Ii(this.subdocs).forEach(n=>n.destroy());const e=this._item;if(e!==null){this._item=null;const n=e.content;n.doc=new Bi({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,Ye(e.parent.doc,r=>{const l=n.doc;e.deleted||r.subdocsAdded.add(l),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class e0{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return ye(this.restDecoder)}readDsLen(){return ye(this.restDecoder)}}class t0 extends e0{readLeftID(){return xe(ye(this.restDecoder),ye(this.restDecoder))}readRightID(){return xe(ye(this.restDecoder),ye(this.restDecoder))}readClient(){return ye(this.restDecoder)}readInfo(){return ra(this.restDecoder)}readString(){return ea(this.restDecoder)}readParentInfo(){return ye(this.restDecoder)===1}readTypeRef(){return ye(this.restDecoder)}readLen(){return ye(this.restDecoder)}readAny(){return Ll(this.restDecoder)}readBuf(){return Gx(ln(this.restDecoder))}readJSON(){return JSON.parse(ea(this.restDecoder))}readKey(){return ea(this.restDecoder)}}class oC{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=ye(this.restDecoder),this.dsCurrVal}readDsLen(){const e=ye(this.restDecoder)+1;return this.dsCurrVal+=e,e}}class aa extends oC{constructor(e){super(e),this.keys=[],ye(e),this.keyClockDecoder=new Sh(ln(e)),this.clientDecoder=new Sc(ln(e)),this.leftClockDecoder=new Sh(ln(e)),this.rightClockDecoder=new Sh(ln(e)),this.infoDecoder=new pv(ln(e),ra),this.stringDecoder=new Ex(ln(e)),this.parentInfoDecoder=new pv(ln(e),ra),this.typeRefDecoder=new Sc(ln(e)),this.lenDecoder=new Sc(ln(e))}readLeftID(){return new ta(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new ta(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Ll(this.restDecoder)}readBuf(){return ln(this.restDecoder)}readJSON(){return Ll(this.restDecoder)}readKey(){const e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class cC{constructor(){this.restEncoder=Gc()}toUint8Array(){return Qn(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){De(this.restEncoder,e)}writeDsLen(e){De(this.restEncoder,e)}}class Vl extends cC{writeLeftID(e){De(this.restEncoder,e.client),De(this.restEncoder,e.clock)}writeRightID(e){De(this.restEncoder,e.client),De(this.restEncoder,e.clock)}writeClient(e){De(this.restEncoder,e)}writeInfo(e){Qh(this.restEncoder,e)}writeString(e){Wr(this.restEncoder,e)}writeParentInfo(e){De(this.restEncoder,e?1:0)}writeTypeRef(e){De(this.restEncoder,e)}writeLen(e){De(this.restEncoder,e)}writeAny(e){Ol(this.restEncoder,e)}writeBuf(e){an(this.restEncoder,e)}writeJSON(e){Wr(this.restEncoder,JSON.stringify(e))}writeKey(e){Wr(this.restEncoder,e)}}class uC{constructor(){this.restEncoder=Gc(),this.dsCurrVal=0}toUint8Array(){return Qn(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){const n=e-this.dsCurrVal;this.dsCurrVal=e,De(this.restEncoder,n)}writeDsLen(e){e===0&&Xn(),De(this.restEncoder,e-1),this.dsCurrVal+=e}}class zi extends uC{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new wh,this.clientEncoder=new wc,this.leftClockEncoder=new wh,this.rightClockEncoder=new wh,this.infoEncoder=new fv(Qh),this.stringEncoder=new gx,this.parentInfoEncoder=new fv(Qh),this.typeRefEncoder=new wc,this.lenEncoder=new wc}toUint8Array(){const e=Gc();return De(e,0),an(e,this.keyClockEncoder.toUint8Array()),an(e,this.clientEncoder.toUint8Array()),an(e,this.leftClockEncoder.toUint8Array()),an(e,this.rightClockEncoder.toUint8Array()),an(e,Qn(this.infoEncoder)),an(e,this.stringEncoder.toUint8Array()),an(e,Qn(this.parentInfoEncoder)),an(e,this.typeRefEncoder.toUint8Array()),an(e,this.lenEncoder.toUint8Array()),Vc(e,Qn(this.restEncoder)),Qn(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){Ol(this.restEncoder,e)}writeBuf(e){an(this.restEncoder,e)}writeJSON(e){Ol(this.restEncoder,e)}writeKey(e){const n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}}const dC=(i,e,n,r)=>{r=Gi(r,e[0].id.clock);const l=Kn(e,r);De(i.restEncoder,e.length-l),i.writeClient(n),De(i.restEncoder,r);const c=e[l];c.write(i,r-c.id.clock);for(let u=l+1;u<e.length;u++)e[u].write(i,0)},$f=(i,e,n)=>{const r=new Map;n.forEach((l,c)=>{Ct(e,c)>l&&r.set(c,l)}),If(e).forEach((l,c)=>{n.has(c)||r.set(c,0)}),De(i.restEncoder,r.size),Ii(r.entries()).sort((l,c)=>c[0]-l[0]).forEach(([l,c])=>{dC(i,e.clients.get(l),l,c)})},hC=(i,e)=>{const n=kn(),r=ye(i.restDecoder);for(let l=0;l<r;l++){const c=ye(i.restDecoder),u=new Array(c),h=i.readClient();let g=ye(i.restDecoder);n.set(h,{i:0,refs:u});for(let m=0;m<c;m++){const p=i.readInfo();switch(Yc&p){case 0:{const y=i.readLen();u[m]=new En(xe(h,g),y),g+=y;break}case 10:{const y=ye(i.restDecoder);u[m]=new xn(xe(h,g),y),g+=y;break}default:{const y=(p&(_s|cn))===0,w=new ft(xe(h,g),null,(p&cn)===cn?i.readLeftID():null,null,(p&_s)===_s?i.readRightID():null,y?i.readParentInfo()?e.get(i.readString()):i.readLeftID():null,y&&(p&Rl)===Rl?i.readString():null,T0(i,p));u[m]=w,g+=w.length}}}}return n},fC=(i,e,n)=>{const r=[];let l=Ii(n.keys()).sort((_,C)=>_-C);if(l.length===0)return null;const c=()=>{if(l.length===0)return null;let _=n.get(l[l.length-1]);for(;_.refs.length===_.i;)if(l.pop(),l.length>0)_=n.get(l[l.length-1]);else return null;return _};let u=c();if(u===null)return null;const h=new r0,g=new Map,m=(_,C)=>{const x=g.get(_);(x==null||x>C)&&g.set(_,C)};let p=u.refs[u.i++];const y=new Map,w=()=>{for(const _ of r){const C=_.id.client,x=n.get(C);x?(x.i--,h.clients.set(C,x.refs.slice(x.i)),n.delete(C),x.i=0,x.refs=[]):h.clients.set(C,[_]),l=l.filter(A=>A!==C)}r.length=0};for(;;){if(p.constructor!==xn){const C=di(y,p.id.client,()=>Ct(e,p.id.client))-p.id.clock;if(C<0)r.push(p),m(p.id.client,p.id.clock-1),w();else{const x=p.getMissing(i,e);if(x!==null){r.push(p);const A=n.get(x)||{refs:[],i:0};if(A.refs.length===A.i)m(x,Ct(e,x)),w();else{p=A.refs[A.i++];continue}}else(C===0||C<p.length)&&(p.integrate(i,C),y.set(p.id.client,p.id.clock+p.length))}}if(r.length>0)p=r.pop();else if(u!==null&&u.i<u.refs.length)p=u.refs[u.i++];else{if(u=c(),u===null)break;p=u.refs[u.i++]}}if(h.clients.size>0){const _=new zi;return $f(_,h,new Map),De(_.restEncoder,0),{missing:g,update:_.toUint8Array()}}return null},gC=(i,e)=>$f(i,e.doc.store,e.beforeState),mC=(i,e,n,r=new aa(i))=>Ye(e,l=>{l.local=!1;let c=!1;const u=l.doc,h=u.store,g=hC(r,u),m=fC(l,h,g),p=h.pendingStructs;if(p){for(const[w,_]of p.missing)if(_<Ct(h,w)){c=!0;break}if(m){for(const[w,_]of m.missing){const C=p.missing.get(w);(C==null||C>_)&&p.missing.set(w,_)}p.update=Dc([p.update,m.update])}}else h.pendingStructs=m;const y=wv(r,l,h);if(h.pendingDs){const w=new aa(ha(h.pendingDs));ye(w.restDecoder);const _=wv(w,l,h);y&&_?h.pendingDs=Dc([y,_]):h.pendingDs=y||_}else h.pendingDs=y;if(c){const w=h.pendingStructs.update;h.pendingStructs=null,n0(l.doc,w)}},n,!1),n0=(i,e,n,r=aa)=>{const l=ha(e);mC(l,i,n,new r(l))},pC=(i,e,n)=>n0(i,e,n,t0),yC=(i,e,n=new Map)=>{$f(i,e.store,n),fa(i,lC(e.store))},vC=(i,e=new Uint8Array([0]),n=new zi)=>{const r=s0(e);yC(n,i,r);const l=[n.toUint8Array()];if(i.store.pendingDs&&l.push(i.store.pendingDs),i.store.pendingStructs&&l.push(OC(i.store.pendingStructs.update,e)),l.length>1){if(n.constructor===Vl)return RC(l.map((c,u)=>u===0?c:kC(c)));if(n.constructor===zi)return Dc(l)}return l[0]},bC=(i,e)=>vC(i,e,new Vl),wC=i=>{const e=new Map,n=ye(i.restDecoder);for(let r=0;r<n;r++){const l=ye(i.restDecoder),c=ye(i.restDecoder);e.set(l,c)}return e},s0=i=>wC(new e0(ha(i)));class SC{constructor(){this.l=[]}}const Sv=()=>new SC,_v=(i,e)=>i.l.push(e),Ev=(i,e)=>{const n=i.l,r=n.length;i.l=n.filter(l=>e!==l),r===i.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},i0=(i,e,n)=>Lf(i.l,[e,n]);class ta{constructor(e,n){this.client=e,this.clock=n}}const cc=(i,e)=>i===e||i!==null&&e!==null&&i.client===e.client&&i.clock===e.clock,xe=(i,e)=>new ta(i,e),_C=i=>{for(const[e,n]of i.doc.share.entries())if(n===i)return e;throw Xn()},Xr=(i,e)=>e===void 0?!i.deleted:e.sv.has(i.id.client)&&(e.sv.get(i.id.client)||0)>i.id.clock&&!Zb(e.ds,i.id),Kh=(i,e)=>{const n=di(i.meta,Kh,ia),r=i.doc.store;n.has(e)||(e.sv.forEach((l,c)=>{l<Ct(r,c)&&ci(i,xe(c,l))}),Jb(i,e.ds,l=>{}),n.add(e))};class r0{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const If=i=>{const e=new Map;return i.clients.forEach((n,r)=>{const l=n[n.length-1];e.set(r,l.id.clock+l.length)}),e},Ct=(i,e)=>{const n=i.clients.get(e);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},a0=(i,e)=>{let n=i.clients.get(e.id.client);if(n===void 0)n=[],i.clients.set(e.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw Xn()}n.push(e)},Kn=(i,e)=>{let n=0,r=i.length-1,l=i[r],c=l.id.clock;if(c===e)return r;let u=li(e/(c+l.length-1)*r);for(;n<=r;){if(l=i[u],c=l.id.clock,c<=e){if(e<c+l.length)return u;n=u+1}else r=u-1;u=li((n+r)/2)}throw Xn()},EC=(i,e)=>{const n=i.clients.get(e.client);return n[Kn(n,e.clock)]},Eh=EC,Fh=(i,e,n)=>{const r=Kn(e,n),l=e[r];return l.id.clock<n&&l instanceof ft?(e.splice(r+1,0,kc(i,l,n-l.id.clock)),r+1):r},ci=(i,e)=>{const n=i.doc.store.clients.get(e.client);return n[Fh(i,n,e.clock)]},xv=(i,e,n)=>{const r=e.clients.get(n.client),l=Kn(r,n.clock),c=r[l];return n.clock!==c.id.clock+c.length-1&&c.constructor!==En&&r.splice(l+1,0,kc(i,c,n.clock-c.id.clock+1)),c},xC=(i,e,n)=>{const r=i.clients.get(e.id.client);r[Kn(r,e.id.clock)]=n},l0=(i,e,n,r,l)=>{if(r===0)return;const c=n+r;let u=Fh(i,e,n),h;do h=e[u++],c<h.id.clock+h.length&&Fh(i,e,c),l(h);while(u<e.length&&e[u].id.clock<c)};class CC{constructor(e,n,r){this.doc=e,this.deleteSet=new Gl,this.beforeState=If(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Cv=(i,e)=>e.deleteSet.clients.size===0&&!QE(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(Mf(e.deleteSet),gC(i,e),fa(i,e.deleteSet),!0),Tv=(i,e,n)=>{const r=e._item;(r===null||r.id.clock<(i.beforeState.get(r.id.client)||0)&&!r.deleted)&&di(i.changed,e,ia).add(n)},_c=(i,e)=>{let n=i[e],r=i[e-1],l=e;for(;l>0;n=r,r=i[--l-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof ft&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const c=e-l;return c&&i.splice(e+1-c,c),c},TC=(i,e,n)=>{for(const[r,l]of i.clients.entries()){const c=e.clients.get(r);for(let u=l.length-1;u>=0;u--){const h=l[u],g=h.clock+h.len;for(let m=Kn(c,h.clock),p=c[m];m<c.length&&p.id.clock<g;p=c[++m]){const y=c[m];if(h.clock+h.len<=y.id.clock)break;y instanceof ft&&y.deleted&&!y.keep&&n(y)&&y.gc(e,!1)}}}},DC=(i,e)=>{i.clients.forEach((n,r)=>{const l=e.clients.get(r);for(let c=n.length-1;c>=0;c--){const u=n[c],h=Mb(l.length-1,1+Kn(l,u.clock+u.len-1));for(let g=h,m=l[g];g>0&&m.id.clock>=u.clock;m=l[g])g-=1+_c(l,g)}})},o0=(i,e)=>{if(e<i.length){const n=i[e],r=n.doc,l=r.store,c=n.deleteSet,u=n._mergeStructs;try{Mf(c),n.afterState=If(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const h=[];n.changed.forEach((g,m)=>h.push(()=>{(m._item===null||!m._item.deleted)&&m._callObserver(n,g)})),h.push(()=>{n.changedParentTypes.forEach((g,m)=>{m._dEH.l.length>0&&(m._item===null||!m._item.deleted)&&(g=g.filter(p=>p.target._item===null||!p.target._item.deleted),g.forEach(p=>{p.currentTarget=m,p._path=null}),g.sort((p,y)=>p.path.length-y.path.length),i0(m._dEH,g,n))})}),h.push(()=>r.emit("afterTransaction",[n,r])),Lf(h,[]),n._needFormattingCleanup&&PC(n)}finally{r.gc&&TC(c,l,r.gcFilter),DC(c,l),n.afterState.forEach((p,y)=>{const w=n.beforeState.get(y)||0;if(w!==p){const _=l.clients.get(y),C=Gi(Kn(_,w),1);for(let x=_.length-1;x>=C;)x-=1+_c(_,x)}});for(let p=u.length-1;p>=0;p--){const{client:y,clock:w}=u[p].id,_=l.clients.get(y),C=Kn(_,w);C+1<_.length&&_c(_,C+1)>1||C>0&&_c(_,C)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(tC(kf,Vb,"[yjs] ",Qb,Pb,"Changed the client-id because another client seems to be using it."),r.clientID=Wb()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const p=new Vl;Cv(p,n)&&r.emit("update",[p.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const p=new zi;Cv(p,n)&&r.emit("updateV2",[p.toUint8Array(),n.origin,r,n])}const{subdocsAdded:h,subdocsLoaded:g,subdocsRemoved:m}=n;(h.size>0||m.size>0||g.size>0)&&(h.forEach(p=>{p.clientID=r.clientID,p.collectionid==null&&(p.collectionid=r.collectionid),r.subdocs.add(p)}),m.forEach(p=>r.subdocs.delete(p)),r.emit("subdocs",[{loaded:g,added:h,removed:m},r,n]),m.forEach(p=>p.destroy())),i.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,i])):o0(i,e+1)}}},Ye=(i,e,n=null,r=!0)=>{const l=i._transactionCleanups;let c=!1,u=null;i._transaction===null&&(c=!0,i._transaction=new CC(i,n,r),l.push(i._transaction),l.length===1&&i.emit("beforeAllTransactions",[i]),i.emit("beforeTransaction",[i._transaction,i]));try{u=e(i._transaction)}finally{if(c){const h=i._transaction===l[0];i._transaction=null,h&&o0(l,0)}}return u};function*AC(i){const e=ye(i.restDecoder);for(let n=0;n<e;n++){const r=ye(i.restDecoder),l=i.readClient();let c=ye(i.restDecoder);for(let u=0;u<r;u++){const h=i.readInfo();if(h===10){const g=ye(i.restDecoder);yield new xn(xe(l,c),g),c+=g}else if((Yc&h)!==0){const g=(h&(_s|cn))===0,m=new ft(xe(l,c),null,(h&cn)===cn?i.readLeftID():null,null,(h&_s)===_s?i.readRightID():null,g?i.readParentInfo()?i.readString():i.readLeftID():null,g&&(h&Rl)===Rl?i.readString():null,T0(i,h));yield m,c+=m.length}else{const g=i.readLen();yield new En(xe(l,c),g),c+=g}}}}class Bf{constructor(e,n){this.gen=AC(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===xn);return this.curr}}class zf{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}}const RC=i=>Dc(i,t0,Vl),jC=(i,e)=>{if(i.constructor===En){const{client:n,clock:r}=i.id;return new En(xe(n,r+e),i.length-e)}else if(i.constructor===xn){const{client:n,clock:r}=i.id;return new xn(xe(n,r+e),i.length-e)}else{const n=i,{client:r,clock:l}=n.id;return new ft(xe(r,l+e),null,xe(r,l+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},Dc=(i,e=aa,n=zi)=>{if(i.length===1)return i[0];const r=i.map(p=>new e(ha(p)));let l=r.map(p=>new Bf(p,!0)),c=null;const u=new n,h=new zf(u);for(;l=l.filter(w=>w.curr!==null),l.sort((w,_)=>{if(w.curr.id.client===_.curr.id.client){const C=w.curr.id.clock-_.curr.id.clock;return C===0?w.curr.constructor===_.curr.constructor?0:w.curr.constructor===xn?1:-1:C}else return _.curr.id.client-w.curr.id.client}),l.length!==0;){const p=l[0],y=p.curr.id.client;if(c!==null){let w=p.curr,_=!1;for(;w!==null&&w.id.clock+w.length<=c.struct.id.clock+c.struct.length&&w.id.client>=c.struct.id.client;)w=p.next(),_=!0;if(w===null||w.id.client!==y||_&&w.id.clock>c.struct.id.clock+c.struct.length)continue;if(y!==c.struct.id.client)ni(h,c.struct,c.offset),c={struct:w,offset:0},p.next();else if(c.struct.id.clock+c.struct.length<w.id.clock)if(c.struct.constructor===xn)c.struct.length=w.id.clock+w.length-c.struct.id.clock;else{ni(h,c.struct,c.offset);const C=w.id.clock-c.struct.id.clock-c.struct.length;c={struct:new xn(xe(y,c.struct.id.clock+c.struct.length),C),offset:0}}else{const C=c.struct.id.clock+c.struct.length-w.id.clock;C>0&&(c.struct.constructor===xn?c.struct.length-=C:w=jC(w,C)),c.struct.mergeWith(w)||(ni(h,c.struct,c.offset),c={struct:w,offset:0},p.next())}}else c={struct:p.curr,offset:0},p.next();for(let w=p.curr;w!==null&&w.id.client===y&&w.id.clock===c.struct.id.clock+c.struct.length&&w.constructor!==xn;w=p.next())ni(h,c.struct,c.offset),c={struct:w,offset:0}}c!==null&&(ni(h,c.struct,c.offset),c=null),qf(h);const g=r.map(p=>Uf(p)),m=rC(g);return fa(u,m),u.toUint8Array()},OC=(i,e,n=aa,r=zi)=>{const l=s0(e),c=new r,u=new zf(c),h=new n(ha(i)),g=new Bf(h,!1);for(;g.curr;){const p=g.curr,y=p.id.client,w=l.get(y)||0;if(g.curr.constructor===xn){g.next();continue}if(p.id.clock+p.length>w)for(ni(u,p,Gi(w-p.id.clock,0)),g.next();g.curr&&g.curr.id.client===y;)ni(u,g.curr,0),g.next();else for(;g.curr&&g.curr.id.client===y&&g.curr.id.clock+g.curr.length<=w;)g.next()}qf(u);const m=Uf(h);return fa(c,m),c.toUint8Array()},c0=i=>{i.written>0&&(i.clientStructs.push({written:i.written,restEncoder:Qn(i.encoder.restEncoder)}),i.encoder.restEncoder=Gc(),i.written=0)},ni=(i,e,n)=>{i.written>0&&i.currClient!==e.id.client&&c0(i),i.written===0&&(i.currClient=e.id.client,i.encoder.writeClient(e.id.client),De(i.encoder.restEncoder,e.id.clock+n)),e.write(i.encoder,n),i.written++},qf=i=>{c0(i);const e=i.encoder.restEncoder;De(e,i.clientStructs.length);for(let n=0;n<i.clientStructs.length;n++){const r=i.clientStructs[n];De(e,r.written),Vc(e,r.restEncoder)}},LC=(i,e,n,r)=>{const l=new n(ha(i)),c=new Bf(l,!1),u=new r,h=new zf(u);for(let m=c.curr;m!==null;m=c.next())ni(h,e(m),0);qf(h);const g=Uf(l);return fa(u,g),u.toUint8Array()},kC=i=>LC(i,Ix,aa,Vl),Dv="You must not compute changes after the event-handler fired.";class Pc{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=NC(this.currentTarget,this.target))}deletes(e){return Zb(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw oi(Dv);const e=new Map,n=this.target;this.transaction.changed.get(n).forEach(l=>{if(l!==null){const c=n._map.get(l);let u,h;if(this.adds(c)){let g=c.left;for(;g!==null&&this.adds(g);)g=g.left;if(this.deletes(c))if(g!==null&&this.deletes(g))u="delete",h=yh(g.content.getContent());else return;else g!==null&&this.deletes(g)?(u="update",h=yh(g.content.getContent())):(u="add",h=void 0)}else if(this.deletes(c))u="delete",h=yh(c.content.getContent());else return;e.set(l,{action:u,oldValue:h})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw oi(Dv);const n=this.target,r=ia(),l=ia(),c=[];if(e={added:r,deleted:l,delta:c,keys:this.keys},this.transaction.changed.get(n).has(null)){let h=null;const g=()=>{h&&c.push(h)};for(let m=n._start;m!==null;m=m.right)m.deleted?this.deletes(m)&&!this.adds(m)&&((h===null||h.delete===void 0)&&(g(),h={delete:0}),h.delete+=m.length,l.add(m)):this.adds(m)?((h===null||h.insert===void 0)&&(g(),h={insert:[]}),h.insert=h.insert.concat(m.content.getContent()),r.add(m)):((h===null||h.retain===void 0)&&(g(),h={retain:0}),h.retain+=m.length);h!==null&&h.retain===void 0&&g()}this._changes=e}return e}}const NC=(i,e)=>{const n=[];for(;e._item!==null&&e!==i;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,l=e._item.parent._start;for(;l!==e._item&&l!==null;)!l.deleted&&l.countable&&(r+=l.length),l=l.right;n.unshift(r)}e=e._item.parent}return n},It=()=>{nC("Invalid access: Add Yjs type to a document before reading data.")},u0=80;let Hf=0;class MC{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=Hf++}}const UC=i=>{i.timestamp=Hf++},d0=(i,e,n)=>{i.p.marker=!1,i.p=e,e.marker=!0,i.index=n,i.timestamp=Hf++},$C=(i,e,n)=>{if(i.length>=u0){const r=i.reduce((l,c)=>l.timestamp<c.timestamp?l:c);return d0(r,e,n),r}else{const r=new MC(e,n);return i.push(r),r}},Xc=(i,e)=>{if(i._start===null||e===0||i._searchMarker===null)return null;const n=i._searchMarker.length===0?null:i._searchMarker.reduce((c,u)=>bc(e-c.index)<bc(e-u.index)?c:u);let r=i._start,l=0;for(n!==null&&(r=n.p,l=n.index,UC(n));r.right!==null&&l<e;){if(!r.deleted&&r.countable){if(e<l+r.length)break;l+=r.length}r=r.right}for(;r.left!==null&&l>e;)r=r.left,!r.deleted&&r.countable&&(l-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(l-=r.length);return n!==null&&bc(n.index-l)<r.parent.length/u0?(d0(n,r,l),n):$C(i._searchMarker,r,l)},Nl=(i,e,n)=>{for(let r=i.length-1;r>=0;r--){const l=i[r];if(n>0){let c=l.p;for(c.marker=!1;c&&(c.deleted||!c.countable);)c=c.left,c&&!c.deleted&&c.countable&&(l.index-=c.length);if(c===null||c.marker===!0){i.splice(r,1);continue}l.p=c,c.marker=!0}(e<l.index||n>0&&e===l.index)&&(l.index=Gi(e,l.index+n))}},Kc=(i,e,n)=>{const r=i,l=e.changedParentTypes;for(;di(l,i,()=>[]).push(n),i._item!==null;)i=i._item.parent;i0(r._eH,n,e)};class Lt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Sv(),this._dEH=Sv(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw Pn()}clone(){throw Pn()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){_v(this._eH,e)}observeDeep(e){_v(this._dEH,e)}unobserve(e){Ev(this._eH,e)}unobserveDeep(e){Ev(this._dEH,e)}toJSON(){}}const h0=(i,e,n)=>{i.doc??It(),e<0&&(e=i._length+e),n<0&&(n=i._length+n);let r=n-e;const l=[];let c=i._start;for(;c!==null&&r>0;){if(c.countable&&!c.deleted){const u=c.content.getContent();if(u.length<=e)e-=u.length;else{for(let h=e;h<u.length&&r>0;h++)l.push(u[h]),r--;e=0}}c=c.right}return l},f0=i=>{i.doc??It();const e=[];let n=i._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let l=0;l<r.length;l++)e.push(r[l])}n=n.right}return e},Ml=(i,e)=>{let n=0,r=i._start;for(i.doc??It();r!==null;){if(r.countable&&!r.deleted){const l=r.content.getContent();for(let c=0;c<l.length;c++)e(l[c],n++,i)}r=r.right}},g0=(i,e)=>{const n=[];return Ml(i,(r,l)=>{n.push(e(r,l,i))}),n},IC=i=>{let e=i._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}const l=n[r++];return n.length<=r&&(n=null),{done:!1,value:l}}}},m0=(i,e)=>{i.doc??It();const n=Xc(i,e);let r=i._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},Ac=(i,e,n,r)=>{let l=n;const c=i.doc,u=c.clientID,h=c.store,g=n===null?e._start:n.right;let m=[];const p=()=>{m.length>0&&(l=new ft(xe(u,Ct(h,u)),l,l&&l.lastId,g,g&&g.id,e,null,new Hi(m)),l.integrate(i,0),m=[])};r.forEach(y=>{if(y===null)m.push(y);else switch(y.constructor){case Number:case Object:case Boolean:case Array:case String:m.push(y);break;default:switch(p(),y.constructor){case Uint8Array:case ArrayBuffer:l=new ft(xe(u,Ct(h,u)),l,l&&l.lastId,g,g&&g.id,e,null,new Ql(new Uint8Array(y))),l.integrate(i,0);break;case Bi:l=new ft(xe(u,Ct(h,u)),l,l&&l.lastId,g,g&&g.id,e,null,new Pl(y)),l.integrate(i,0);break;default:if(y instanceof Lt)l=new ft(xe(u,Ct(h,u)),l,l&&l.lastId,g,g&&g.id,e,null,new Cs(y)),l.integrate(i,0);else throw new Error("Unexpected content type in insert operation")}}}),p()},p0=()=>oi("Length exceeded!"),y0=(i,e,n,r)=>{if(n>e._length)throw p0();if(n===0)return e._searchMarker&&Nl(e._searchMarker,n,r.length),Ac(i,e,null,r);const l=n,c=Xc(e,n);let u=e._start;for(c!==null&&(u=c.p,n-=c.index,n===0&&(u=u.prev,n+=u&&u.countable&&!u.deleted?u.length:0));u!==null;u=u.right)if(!u.deleted&&u.countable){if(n<=u.length){n<u.length&&ci(i,xe(u.id.client,u.id.clock+n));break}n-=u.length}return e._searchMarker&&Nl(e._searchMarker,l,r.length),Ac(i,e,u,r)},BC=(i,e,n)=>{let l=(e._searchMarker||[]).reduce((c,u)=>u.index>c.index?u:c,{index:0,p:e._start}).p;if(l)for(;l.right;)l=l.right;return Ac(i,e,l,n)},v0=(i,e,n,r)=>{if(r===0)return;const l=n,c=r,u=Xc(e,n);let h=e._start;for(u!==null&&(h=u.p,n-=u.index);h!==null&&n>0;h=h.right)!h.deleted&&h.countable&&(n<h.length&&ci(i,xe(h.id.client,h.id.clock+n)),n-=h.length);for(;r>0&&h!==null;)h.deleted||(r<h.length&&ci(i,xe(h.id.client,h.id.clock+r)),h.delete(i),r-=h.length),h=h.right;if(r>0)throw p0();e._searchMarker&&Nl(e._searchMarker,l,-c+r)},Rc=(i,e,n)=>{const r=e._map.get(n);r!==void 0&&r.delete(i)},Yf=(i,e,n,r)=>{const l=e._map.get(n)||null,c=i.doc,u=c.clientID;let h;if(r==null)h=new Hi([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:h=new Hi([r]);break;case Uint8Array:h=new Ql(r);break;case Bi:h=new Pl(r);break;default:if(r instanceof Lt)h=new Cs(r);else throw new Error("Unexpected content type")}new ft(xe(u,Ct(c.store,u)),l,l&&l.lastId,null,null,e,n,h).integrate(i,0)},Gf=(i,e)=>{i.doc??It();const n=i._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},b0=i=>{const e={};return i.doc??It(),i._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},w0=(i,e)=>{i.doc??It();const n=i._map.get(e);return n!==void 0&&!n.deleted},zC=(i,e)=>{const n={};return i._map.forEach((r,l)=>{let c=r;for(;c!==null&&(!e.sv.has(c.id.client)||c.id.clock>=(e.sv.get(c.id.client)||0));)c=c.left;c!==null&&Xr(c,e)&&(n[l]=c.content.getContent()[c.length-1])}),n},uc=i=>(i.doc??It(),sC(i._map.entries(),e=>!e[1].deleted));class qC extends Pc{}class na extends Lt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){const n=new na;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new na}clone(){const e=new na;return e.insert(0,this.toArray().map(n=>n instanceof Lt?n.clone():n)),e}get length(){return this.doc??It(),this._length}_callObserver(e,n){super._callObserver(e,n),Kc(this,e,new qC(this,e))}insert(e,n){this.doc!==null?Ye(this.doc,r=>{y0(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?Ye(this.doc,n=>{BC(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?Ye(this.doc,r=>{v0(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return m0(this,e)}toArray(){return f0(this)}slice(e=0,n=this.length){return h0(this,e,n)}toJSON(){return this.map(e=>e instanceof Lt?e.toJSON():e)}map(e){return g0(this,e)}forEach(e){Ml(this,e)}[Symbol.iterator](){return IC(this)}_write(e){e.writeTypeRef(h1)}}const HC=i=>new na;class YC extends Pc{constructor(e,n,r){super(e,n),this.keysChanged=r}}class la extends Lt{constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,l)=>{this.set(l,r)}),this._prelimContent=null}_copy(){return new la}clone(){const e=new la;return this.forEach((n,r)=>{e.set(r,n instanceof Lt?n.clone():n)}),e}_callObserver(e,n){Kc(this,e,new YC(this,e,n))}toJSON(){this.doc??It();const e={};return this._map.forEach((n,r)=>{if(!n.deleted){const l=n.content.getContent()[n.length-1];e[r]=l instanceof Lt?l.toJSON():l}}),e}get size(){return[...uc(this)].length}keys(){return _h(uc(this),e=>e[0])}values(){return _h(uc(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return _h(uc(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??It(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?Ye(this.doc,n=>{Rc(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?Ye(this.doc,r=>{Yf(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return Gf(this,e)}has(e){return w0(this,e)}clear(){this.doc!==null?Ye(this.doc,e=>{this.forEach(function(n,r,l){Rc(e,l,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(f1)}}const GC=i=>new la,ri=(i,e)=>i===e||typeof i=="object"&&typeof e=="object"&&i&&e&&Ux(i,e);class Jh{constructor(e,n,r,l){this.left=e,this.right=n,this.index=r,this.currentAttributes=l}forward(){switch(this.right===null&&Xn(),this.right.content.constructor){case gt:this.right.deleted||ga(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Av=(i,e,n)=>{for(;e.right!==null&&n>0;){switch(e.right.content.constructor){case gt:e.right.deleted||ga(e.currentAttributes,e.right.content);break;default:e.right.deleted||(n<e.right.length&&ci(i,xe(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length);break}e.left=e.right,e.right=e.right.right}return e},dc=(i,e,n,r)=>{const l=new Map,c=r?Xc(e,n):null;if(c){const u=new Jh(c.p.left,c.p,c.index,l);return Av(i,u,n-c.index)}else{const u=new Jh(null,e._start,0,l);return Av(i,u,n)}},S0=(i,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===gt&&ri(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const l=i.doc,c=l.clientID;r.forEach((u,h)=>{const g=n.left,m=n.right,p=new ft(xe(c,Ct(l.store,c)),g,g&&g.lastId,m,m&&m.id,e,null,new gt(h,u));p.integrate(i,0),n.right=p,n.forward()})},ga=(i,e)=>{const{key:n,value:r}=e;r===null?i.delete(n):i.set(n,r)},_0=(i,e)=>{for(;i.right!==null;){if(!(i.right.deleted||i.right.content.constructor===gt&&ri(e[i.right.content.key]??null,i.right.content.value)))break;i.forward()}},E0=(i,e,n,r)=>{const l=i.doc,c=l.clientID,u=new Map;for(const h in r){const g=r[h],m=n.currentAttributes.get(h)??null;if(!ri(m,g)){u.set(h,m);const{left:p,right:y}=n;n.right=new ft(xe(c,Ct(l.store,c)),p,p&&p.lastId,y,y&&y.id,e,null,new gt(h,g)),n.right.integrate(i,0),n.forward()}}return u},xh=(i,e,n,r,l)=>{n.currentAttributes.forEach((w,_)=>{l[_]===void 0&&(l[_]=null)});const c=i.doc,u=c.clientID;_0(n,l);const h=E0(i,e,n,l),g=r.constructor===String?new Fn(r):r instanceof Lt?new Cs(r):new Vi(r);let{left:m,right:p,index:y}=n;e._searchMarker&&Nl(e._searchMarker,n.index,g.getLength()),p=new ft(xe(u,Ct(c.store,u)),m,m&&m.lastId,p,p&&p.id,e,null,g),p.integrate(i,0),n.right=p,n.index=y,n.forward(),S0(i,e,n,h)},Rv=(i,e,n,r,l)=>{const c=i.doc,u=c.clientID;_0(n,l);const h=E0(i,e,n,l);e:for(;n.right!==null&&(r>0||h.size>0&&(n.right.deleted||n.right.content.constructor===gt));){if(!n.right.deleted)switch(n.right.content.constructor){case gt:{const{key:g,value:m}=n.right.content,p=l[g];if(p!==void 0){if(ri(p,m))h.delete(g);else{if(r===0)break e;h.set(g,m)}n.right.delete(i)}else n.currentAttributes.set(g,m);break}default:r<n.right.length&&ci(i,xe(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let g="";for(;r>0;r--)g+=`
`;n.right=new ft(xe(u,Ct(c.store,u)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Fn(g)),n.right.integrate(i,0),n.forward()}S0(i,e,n,h)},x0=(i,e,n,r,l)=>{let c=e;const u=kn();for(;c&&(!c.countable||c.deleted);){if(!c.deleted&&c.content.constructor===gt){const m=c.content;u.set(m.key,m)}c=c.right}let h=0,g=!1;for(;e!==c;){if(n===e&&(g=!0),!e.deleted){const m=e.content;switch(m.constructor){case gt:{const{key:p,value:y}=m,w=r.get(p)??null;(u.get(p)!==m||w===y)&&(e.delete(i),h++,!g&&(l.get(p)??null)===y&&w!==y&&(w===null?l.delete(p):l.set(p,w))),!g&&!e.deleted&&ga(l,m);break}}}e=e.right}return h},VC=(i,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;const n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===gt){const r=e.content.key;n.has(r)?e.delete(i):n.add(r)}e=e.left}},QC=i=>{let e=0;return Ye(i.doc,n=>{let r=i._start,l=i._start,c=kn();const u=Gh(c);for(;l;){if(l.deleted===!1)switch(l.content.constructor){case gt:ga(u,l.content);break;default:e+=x0(n,r,l,c,u),c=Gh(u),r=l;break}l=l.right}}),e},PC=i=>{const e=new Set,n=i.doc;for(const[r,l]of i.afterState.entries()){const c=i.beforeState.get(r)||0;l!==c&&l0(i,n.store.clients.get(r),c,l,u=>{!u.deleted&&u.content.constructor===gt&&u.constructor!==En&&e.add(u.parent)})}Ye(n,r=>{Jb(i,i.deleteSet,l=>{if(l instanceof En||!l.parent._hasFormatting||e.has(l.parent))return;const c=l.parent;l.content.constructor===gt?e.add(c):VC(r,l)});for(const l of e)QC(l)})},jv=(i,e,n)=>{const r=n,l=Gh(e.currentAttributes),c=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Cs:case Vi:case Fn:n<e.right.length&&ci(i,xe(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(i);break}e.forward()}c&&x0(i,c,e.right,l,e.currentAttributes);const u=(e.left||e.right).parent;return u._searchMarker&&Nl(u._searchMarker,e.index,-r+n),e};class XC extends Pc{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(l=>{l===null?this.childListChanged=!0:this.keysChanged.add(l)})}get changes(){if(this._changes===null){const e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){const e=this.target.doc,n=[];Ye(e,r=>{const l=new Map,c=new Map;let u=this.target._start,h=null;const g={};let m="",p=0,y=0;const w=()=>{if(h!==null){let _=null;switch(h){case"delete":y>0&&(_={delete:y}),y=0;break;case"insert":(typeof m=="object"||m.length>0)&&(_={insert:m},l.size>0&&(_.attributes={},l.forEach((C,x)=>{C!==null&&(_.attributes[x]=C)}))),m="";break;case"retain":p>0&&(_={retain:p},kx(g)||(_.attributes=jx({},g))),p=0;break}_&&n.push(_),h=null}};for(;u!==null;){switch(u.content.constructor){case Cs:case Vi:this.adds(u)?this.deletes(u)||(w(),h="insert",m=u.content.getContent()[0],w()):this.deletes(u)?(h!=="delete"&&(w(),h="delete"),y+=1):u.deleted||(h!=="retain"&&(w(),h="retain"),p+=1);break;case Fn:this.adds(u)?this.deletes(u)||(h!=="insert"&&(w(),h="insert"),m+=u.content.str):this.deletes(u)?(h!=="delete"&&(w(),h="delete"),y+=u.length):u.deleted||(h!=="retain"&&(w(),h="retain"),p+=u.length);break;case gt:{const{key:_,value:C}=u.content;if(this.adds(u)){if(!this.deletes(u)){const x=l.get(_)??null;ri(x,C)?C!==null&&u.delete(r):(h==="retain"&&w(),ri(C,c.get(_)??null)?delete g[_]:g[_]=C)}}else if(this.deletes(u)){c.set(_,C);const x=l.get(_)??null;ri(x,C)||(h==="retain"&&w(),g[_]=x)}else if(!u.deleted){c.set(_,C);const x=g[_];x!==void 0&&(ri(x,C)?x!==null&&u.delete(r):(h==="retain"&&w(),C===null?delete g[_]:g[_]=C))}u.deleted||(h==="insert"&&w(),ga(l,u.content));break}}u=u.right}for(w();n.length>0;){const _=n[n.length-1];if(_.retain!==void 0&&_.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class oa extends Lt{constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??It(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new oa}clone(){const e=new oa;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);const r=new XC(this,e,n);Kc(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??It();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Fn&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?Ye(this.doc,r=>{const l=new Jh(null,this._start,0,new Map);for(let c=0;c<e.length;c++){const u=e[c];if(u.insert!==void 0){const h=!n&&typeof u.insert=="string"&&c===e.length-1&&l.right===null&&u.insert.slice(-1)===`
`?u.insert.slice(0,-1):u.insert;(typeof h!="string"||h.length>0)&&xh(r,this,l,h,u.attributes||{})}else u.retain!==void 0?Rv(r,this,l,u.retain,u.attributes||{}):u.delete!==void 0&&jv(r,l,u.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??It();const l=[],c=new Map,u=this.doc;let h="",g=this._start;function m(){if(h.length>0){const y={};let w=!1;c.forEach((C,x)=>{w=!0,y[x]=C});const _={insert:h};w&&(_.attributes=y),l.push(_),h=""}}const p=()=>{for(;g!==null;){if(Xr(g,e)||n!==void 0&&Xr(g,n))switch(g.content.constructor){case Fn:{const y=c.get("ychange");e!==void 0&&!Xr(g,e)?(y===void 0||y.user!==g.id.client||y.type!=="removed")&&(m(),c.set("ychange",r?r("removed",g.id):{type:"removed"})):n!==void 0&&!Xr(g,n)?(y===void 0||y.user!==g.id.client||y.type!=="added")&&(m(),c.set("ychange",r?r("added",g.id):{type:"added"})):y!==void 0&&(m(),c.delete("ychange")),h+=g.content.str;break}case Cs:case Vi:{m();const y={insert:g.content.getContent()[0]};if(c.size>0){const w={};y.attributes=w,c.forEach((_,C)=>{w[C]=_})}l.push(y);break}case gt:Xr(g,e)&&(m(),ga(c,g.content));break}g=g.right}m()};return e||n?Ye(u,y=>{e&&Kh(y,e),n&&Kh(y,n),p()},"cleanup"):p(),l}insert(e,n,r){if(n.length<=0)return;const l=this.doc;l!==null?Ye(l,c=>{const u=dc(c,this,e,!r);r||(r={},u.currentAttributes.forEach((h,g)=>{r[g]=h})),xh(c,this,u,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){const l=this.doc;l!==null?Ye(l,c=>{const u=dc(c,this,e,!r);xh(c,this,u,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;const r=this.doc;r!==null?Ye(r,l=>{jv(l,dc(l,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;const l=this.doc;l!==null?Ye(l,c=>{const u=dc(c,this,e,!1);u.right!==null&&Rv(c,this,u,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?Ye(this.doc,n=>{Rc(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?Ye(this.doc,r=>{Yf(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return Gf(this,e)}getAttributes(){return b0(this)}_write(e){e.writeTypeRef(g1)}}const KC=i=>new oa;class Ch{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??It()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===ca||n.constructor===qi)&&n._start!==null)e=n._start;else for(;e!==null;){const r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}}class qi extends Lt{constructor(){super(),this._prelimContent=[]}get firstChild(){const e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new qi}clone(){const e=new qi;return e.insert(0,this.toArray().map(n=>n instanceof Lt?n.clone():n)),e}get length(){return this.doc??It(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new Ch(this,e)}querySelector(e){e=e.toUpperCase();const r=new Ch(this,l=>l.nodeName&&l.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),Ii(new Ch(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){Kc(this,e,new ZC(this,n,e))}toString(){return g0(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){const l=e.createDocumentFragment();return r!==void 0&&r._createAssociation(l,this),Ml(this,c=>{l.insertBefore(c.toDOM(e,n,r),null)}),l}insert(e,n){this.doc!==null?Ye(this.doc,r=>{y0(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)Ye(this.doc,r=>{const l=e&&e instanceof Lt?e._item:e;Ac(r,this,l,n)});else{const r=this._prelimContent,l=e===null?0:r.findIndex(c=>c===e)+1;if(l===0&&e!==null)throw oi("Reference item not found");r.splice(l,0,...n)}}delete(e,n=1){this.doc!==null?Ye(this.doc,r=>{v0(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return f0(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return m0(this,e)}slice(e=0,n=this.length){return h0(this,e,n)}forEach(e){Ml(this,e)}_write(e){e.writeTypeRef(p1)}}const FC=i=>new qi;class ca extends qi{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,l)=>{this.setAttribute(l,r)}),this._prelimAttrs=null}_copy(){return new ca(this.nodeName)}clone(){const e=new ca(this.nodeName),n=this.getAttributes();return Lx(n,(r,l)=>{typeof r=="string"&&e.setAttribute(l,r)}),e.insert(0,this.toArray().map(r=>r instanceof Lt?r.clone():r)),e}toString(){const e=this.getAttributes(),n=[],r=[];for(const h in e)r.push(h);r.sort();const l=r.length;for(let h=0;h<l;h++){const g=r[h];n.push(g+'="'+e[g]+'"')}const c=this.nodeName.toLocaleLowerCase(),u=n.length>0?" "+n.join(" "):"";return`<${c}${u}>${super.toString()}</${c}>`}removeAttribute(e){this.doc!==null?Ye(this.doc,n=>{Rc(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?Ye(this.doc,r=>{Yf(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return Gf(this,e)}hasAttribute(e){return w0(this,e)}getAttributes(e){return e?zC(this,e):b0(this)}toDOM(e=document,n={},r){const l=e.createElement(this.nodeName),c=this.getAttributes();for(const u in c){const h=c[u];typeof h=="string"&&l.setAttribute(u,h)}return Ml(this,u=>{l.appendChild(u.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(l,this),l}_write(e){e.writeTypeRef(m1),e.writeKey(this.nodeName)}}const JC=i=>new ca(i.readKey());class ZC extends Pc{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(l=>{l===null?this.childListChanged=!0:this.attributesChanged.add(l)})}}class jc extends la{constructor(e){super(),this.hookName=e}_copy(){return new jc(this.hookName)}clone(){const e=new jc(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){const l=n[this.hookName];let c;return l!==void 0?c=l.createDom(this):c=document.createElement(this.hookName),c.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(c,this),c}_write(e){e.writeTypeRef(y1),e.writeKey(this.hookName)}}const WC=i=>new jc(i.readKey());class Oc extends oa{get nextSibling(){const e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){const e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new Oc}clone(){const e=new Oc;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){const l=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(l,this),l}toString(){return this.toDelta().map(e=>{const n=[];for(const l in e.attributes){const c=[];for(const u in e.attributes[l])c.push({key:u,value:e.attributes[l][u]});c.sort((u,h)=>u.key<h.key?-1:1),n.push({nodeName:l,attrs:c})}n.sort((l,c)=>l.nodeName<c.nodeName?-1:1);let r="";for(let l=0;l<n.length;l++){const c=n[l];r+=`<${c.nodeName}`;for(let u=0;u<c.attrs.length;u++){const h=c.attrs[u];r+=` ${h.key}="${h.value}"`}r+=">"}r+=e.insert;for(let l=n.length-1;l>=0;l--)r+=`</${n[l].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(v1)}}const e1=i=>new Oc;class Vf{constructor(e,n){this.id=e,this.length=n}get deleted(){throw Pn()}mergeWith(e){return!1}write(e,n,r){throw Pn()}integrate(e,n){throw Pn()}}const t1=0;class En extends Vf{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),a0(e.doc.store,this)}write(e,n){e.writeInfo(t1),e.writeLen(this.length-n)}getMissing(e,n){return null}}class Ql{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Ql(this.content)}splice(e){throw Pn()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}}const n1=i=>new Ql(i.readBuf());class Ul{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Ul(this.len)}splice(e){const n=new Ul(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){Tc(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}}const s1=i=>new Ul(i.readLen()),C0=(i,e)=>new Bi({guid:i,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1});class Pl{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;const n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Pl(C0(this.doc.guid,this.opts))}splice(e){throw Pn()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}}const i1=i=>new Pl(C0(i.readString(),i.readAny()));class Vi{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Vi(this.embed)}splice(e){throw Pn()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}}const r1=i=>new Vi(i.readJSON());class gt{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new gt(this.key,this.value)}splice(e){throw Pn()}mergeWith(e){return!1}integrate(e,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}}const a1=i=>new gt(i.readKey(),i.readJSON());class Lc{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Lc(this.arr)}splice(e){const n=new Lc(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let l=n;l<r;l++){const c=this.arr[l];e.writeString(c===void 0?"undefined":JSON.stringify(c))}}getRef(){return 2}}const l1=i=>{const e=i.readLen(),n=[];for(let r=0;r<e;r++){const l=i.readString();l==="undefined"?n.push(void 0):n.push(JSON.parse(l))}return new Lc(n)},o1=Cc("node_env")==="development";class Hi{constructor(e){this.arr=e,o1&&Hb(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Hi(this.arr)}splice(e){const n=new Hi(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){const r=this.arr.length;e.writeLen(r-n);for(let l=n;l<r;l++){const c=this.arr[l];e.writeAny(c)}}getRef(){return 8}}const c1=i=>{const e=i.readLen(),n=[];for(let r=0;r<e;r++)n.push(i.readAny());return new Hi(n)};class Fn{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Fn(this.str)}splice(e){const n=new Fn(this.str.slice(e));this.str=this.str.slice(0,e);const r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"�",n.str="�"+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const u1=i=>new Fn(i.readString()),d1=[HC,GC,KC,JC,FC,WC,e1],h1=0,f1=1,g1=2,m1=3,p1=4,y1=5,v1=6;class Cs{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Cs(this.type._copy())}splice(e){throw Pn()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}}const b1=i=>new Cs(d1[i.readTypeRef()](i)),kc=(i,e,n)=>{const{client:r,clock:l}=e.id,c=new ft(xe(r,l+n),e,xe(r,l+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&c.markDeleted(),e.keep&&(c.keep=!0),e.redone!==null&&(c.redone=xe(e.redone.client,e.redone.clock+n)),e.right=c,c.right!==null&&(c.right.left=c),i._mergeStructs.push(c),c.parentSub!==null&&c.right===null&&c.parent._map.set(c.parentSub,c),e.length=n,c};class ft extends Vf{constructor(e,n,r,l,c,u,h,g){super(e,g.getLength()),this.origin=r,this.left=n,this.right=l,this.rightOrigin=c,this.parent=u,this.parentSub=h,this.redone=null,this.content=g,this.info=this.content.isCountable()?uv:0}set marker(e){(this.info&bh)>0!==e&&(this.info^=bh)}get marker(){return(this.info&bh)>0}get keep(){return(this.info&cv)>0}set keep(e){this.keep!==e&&(this.info^=cv)}get countable(){return(this.info&uv)>0}get deleted(){return(this.info&vh)>0}set deleted(e){this.deleted!==e&&(this.info^=vh)}markDeleted(){this.info|=vh}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Ct(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Ct(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===ta&&this.id.client!==this.parent.client&&this.parent.clock>=Ct(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=xv(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=ci(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===En||this.right&&this.right.constructor===En)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===ft?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===ft&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===ta){const r=Eh(n,this.parent);r.constructor===En?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=xv(e,e.doc.store,xe(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,l;if(r!==null)l=r.right;else if(this.parentSub!==null)for(l=this.parent._map.get(this.parentSub)||null;l!==null&&l.left!==null;)l=l.left;else l=this.parent._start;const c=new Set,u=new Set;for(;l!==null&&l!==this.right;){if(u.add(l),c.add(l),cc(this.origin,l.origin)){if(l.id.client<this.id.client)r=l,c.clear();else if(cc(this.rightOrigin,l.rightOrigin))break}else if(l.origin!==null&&u.has(Eh(e.doc.store,l.origin)))c.has(Eh(e.doc.store,l.origin))||(r=l,c.clear());else break;l=l.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),a0(e.doc.store,this),this.content.integrate(e,this),Tv(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new En(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:xe(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&cc(e.origin,this.lastId)&&this.right===e&&cc(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Tc(e.deleteSet,this.id.client,this.id.clock,this.length),Tv(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw Xn();this.content.gc(e),n?xC(e,this,new En(this.id,this.length)):this.content=new Ul(this.length)}write(e,n){const r=n>0?xe(this.id.client,this.id.clock+n-1):this.origin,l=this.rightOrigin,c=this.parentSub,u=this.content.getRef()&Yc|(r===null?0:cn)|(l===null?0:_s)|(c===null?0:Rl);if(e.writeInfo(u),r!==null&&e.writeLeftID(r),l!==null&&e.writeRightID(l),r===null&&l===null){const h=this.parent;if(h._item!==void 0){const g=h._item;if(g===null){const m=_C(h);e.writeParentInfo(!0),e.writeString(m)}else e.writeParentInfo(!1),e.writeLeftID(g.id)}else h.constructor===String?(e.writeParentInfo(!0),e.writeString(h)):h.constructor===ta?(e.writeParentInfo(!1),e.writeLeftID(h)):Xn();c!==null&&e.writeString(c)}this.content.write(e,n)}}const T0=(i,e)=>w1[e&Yc](i),w1=[()=>{Xn()},s1,l1,n1,u1,r1,a1,b1,c1,i1,()=>{Xn()}],S1=10;class xn extends Vf{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){Xn()}write(e,n){e.writeInfo(S1),De(e.restEncoder,this.length-n)}getMissing(e,n){return null}}const D0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},A0="__ $YJS$ __";D0[A0]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");D0[A0]=!0;function _1(i){const e=i.length,n=i.filter(l=>l.isCompleted).length,r=e>0?n/e*100:0;return{totalItems:e,completedItems:n,completionPercentage:r}}const jt=[];for(let i=0;i<256;++i)jt.push((i+256).toString(16).slice(1));function E1(i,e=0){return(jt[i[e+0]]+jt[i[e+1]]+jt[i[e+2]]+jt[i[e+3]]+"-"+jt[i[e+4]]+jt[i[e+5]]+"-"+jt[i[e+6]]+jt[i[e+7]]+"-"+jt[i[e+8]]+jt[i[e+9]]+"-"+jt[i[e+10]]+jt[i[e+11]]+jt[i[e+12]]+jt[i[e+13]]+jt[i[e+14]]+jt[i[e+15]]).toLowerCase()}let Th;const x1=new Uint8Array(16);function C1(){if(!Th){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Th=crypto.getRandomValues.bind(crypto)}return Th(x1)}const T1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Ov={randomUUID:T1};function D1(i,e,n){if(Ov.randomUUID&&!i)return Ov.randomUUID();i=i||{};const r=i.random??i.rng?.()??C1();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,E1(r)}function on(){return D1()}function A1(){return`temp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}class R1{documents=new Map;logger;constructor(e){this.logger=e}updateTimestamp(e){const n=this.documents.get(e);n&&n.getMap("meta").set("updatedAt",new Date().toISOString())}createList(e,n,r,l){if(this.documents.has(e)){this.logger.warnSync(`List ${e} already exists`);return}const c=new Bi,u=c.getMap("meta"),h=new Date;u.set("title",n),r&&u.set("description",r),l&&u.set("ownerId",l),u.set("createdAt",h.toISOString()),u.set("updatedAt",h.toISOString()),this.documents.set(e,c),this.logger.infoSync(`Created YJS document for list ${e} with title: ${n}${r?` and description: ${r}`:""}${l?` and ownerId: ${l}`:""}`)}deleteList(e){const n=this.documents.get(e);if(!n){this.logger.warnSync(`List ${e} not found for deletion`);return}n.destroy(),this.documents.delete(e),this.logger.infoSync(`Deleted YJS document for list ${e}`)}getAllLists(){const e=[];for(const[n,r]of this.documents){const c=r.getMap("meta").get("title")||"Untitled List";e.push({id:n,title:c})}return e}getList(e){const n=this.documents.get(e);if(!n)return null;const r=n.getMap("meta"),l=r.get("title")||"Untitled List",c=r.get("description"),u=r.get("ownerId"),h=r.get("createdAt"),g=r.get("updatedAt"),m=n.getArray("items"),p=[];m.forEach(w=>{p.push({id:w.id,content:w.content,isCompleted:w.isCompleted})});const y=_1(p);return{id:e,title:l,description:c,items:p,statistics:y,isConnected:!0,isSynced:!0,createdAt:h?new Date(h):void 0,updatedAt:g?new Date(g):void 0,ownerId:u}}addItem(e,n){const r=this.documents.get(e);if(!r){this.logger.warnSync(`List ${e} not found for adding item`);return}const l=r.getArray("items"),c={id:on(),content:n,isCompleted:!1};l.push([c]),this.updateTimestamp(e),this.logger.infoSync(`Added item to list ${e}: ${n}`)}editItem(e,n,r){const l=this.documents.get(e);if(!l){this.logger.warnSync(`List ${e} not found for editing item`);return}const c=l.getArray("items");for(let u=0;u<c.length;u++){const h=c.get(u);if(h&&h.id===n){c.delete(u,1),c.insert(u,[{...h,content:r}]),this.updateTimestamp(e),this.logger.infoSync(`Edited item ${n} in list ${e}`);return}}this.logger.warnSync(`Item ${n} not found in list ${e}`)}deleteItem(e,n){const r=this.documents.get(e);if(!r){this.logger.warnSync(`List ${e} not found for deleting item`);return}const l=r.getArray("items");for(let c=0;c<l.length;c++){const u=l.get(c);if(u&&u.id===n){l.delete(c,1),this.updateTimestamp(e),this.logger.infoSync(`Deleted item ${n} from list ${e}`);return}}this.logger.warnSync(`Item ${n} not found in list ${e}`)}toggleItem(e,n){const r=this.documents.get(e);if(!r){this.logger.warnSync(`List ${e} not found for toggling item`);return}const l=r.getArray("items");for(let c=0;c<l.length;c++){const u=l.get(c);if(u&&u.id===n){l.delete(c,1),l.insert(c,[{...u,isCompleted:!u.isCompleted}]),this.updateTimestamp(e),this.logger.infoSync(`Toggled item ${n} in list ${e}`);return}}this.logger.warnSync(`Item ${n} not found in list ${e}`)}moveItem(e,n,r){const l=this.documents.get(e);if(!l){this.logger.warnSync(`List ${e} not found for moving item`);return}const c=l.getArray("items");let u=-1,h=null;for(let p=0;p<c.length;p++){const y=c.get(p);if(y&&y.id===n){u=p,h=y;break}}if(u===-1||!h){this.logger.warnSync(`Item ${n} not found in list ${e}`);return}const g=Math.max(0,Math.min(r,c.length-1));if(u===g){this.logger.debugSync(`Item ${n} is already at position ${g}`);return}c.delete(u,1);const m=u<g?g-1:g;c.insert(m,[h]),this.updateTimestamp(e),this.logger.infoSync(`Moved item ${n} from position ${u} to ${m} in list ${e}`)}getYjsState(e){const n=this.documents.get(e);return n?bC(n):null}applyYjsUpdate(e,n){let r=this.documents.get(e);r||(r=new Bi,this.documents.set(e,r),this.logger.infoSync(`Created new YJS document for list ${e} during update application`)),pC(r,n),this.logger.infoSync(`Applied YJS update to list ${e}`)}isListLoaded(e){return this.documents.has(e)}editListTitle(e,n){const r=this.documents.get(e);if(!r){this.logger.warnSync(`List ${e} not found for editing title`);return}r.getMap("meta").set("title",n),this.updateTimestamp(e),this.logger.infoSync(`Edited title of list ${e} to: ${n}`)}editListDescription(e,n){const r=this.documents.get(e);if(!r){this.logger.warnSync(`List ${e} not found for editing description`);return}r.getMap("meta").set("description",n),this.updateTimestamp(e),this.logger.infoSync(`Edited description of list ${e} to: ${n}`)}clearCompletedItems(e){const n=this.documents.get(e);if(!n){this.logger.warnSync(`List ${e} not found for clearing completed items`);return}const r=n.getArray("items");let l=0;for(let c=r.length-1;c>=0;c--){const u=r.get(c);u&&u.isCompleted&&(r.delete(c,1),l++)}l>0?(this.updateTimestamp(e),this.logger.infoSync(`Cleared ${l} completed items from list ${e}`)):this.logger.debugSync(`No completed items found in list ${e}`)}clearAllState(){for(const[,e]of this.documents)e.destroy();this.documents.clear(),this.logger.infoSync("Cleared all YJS documents")}}const ce={LIST_CREATED:"list_created",LIST_DELETED:"list_deleted",LIST_LEFT:"list_left",LIST_METADATA_CHANGED:"list_metadata_changed",ITEM_ADDED:"item_added",ITEM_DELETED:"item_deleted",ITEM_CONTENT_CHANGED:"item_content_changed",ITEM_COMPLETED:"item_completed",ITEM_UNCOMPLETED:"item_uncompleted",ITEM_MOVED:"item_moved",USER_JOINED_LIST:"user_joined_list",USER_LEFT_LIST:"user_left_list",CONNECTION_ESTABLISHED:"connection_established",CONNECTION_LOST:"connection_lost",SYNC_COMPLETED:"sync_completed",BOOTSTRAP_COMPLETED:"bootstrap_completed"};class j1{constructor(e){this.logger=e}eventSubscriptions=new Map;publish(e){const r={...e,timestamp:new Date};this.notifyEventSubscribers(r)}subscribe(e,n){const r=this.wrapHandler(n);return this.eventSubscriptions.has(e)||this.eventSubscriptions.set(e,new Set),this.eventSubscriptions.get(e).add(r),()=>{const l=this.eventSubscriptions.get(e);l&&(l.delete(r),l.size===0&&this.eventSubscriptions.delete(e))}}subscribeToMultiple(e,n){const r=e.map(l=>this.subscribe(l,n));return()=>{r.forEach(l=>l())}}subscribeToListEvents(e){const n=[ce.LIST_CREATED,ce.LIST_DELETED,ce.LIST_METADATA_CHANGED,ce.ITEM_ADDED,ce.ITEM_DELETED,ce.ITEM_CONTENT_CHANGED,ce.ITEM_COMPLETED,ce.ITEM_UNCOMPLETED,ce.ITEM_MOVED];return this.subscribeToMultiple(n,e)}clearAllSubscriptions(){this.eventSubscriptions.clear()}notifyEventSubscribers(e){const n=this.eventSubscriptions.get(e.type);n&&n.forEach(r=>{try{r(e)}catch(l){this.logger.errorSync("Error in event handler:",l)}})}wrapHandler(e){return n=>{e(n)}}}const O1="modulepreload",L1=function(i){return"/"+i},Lv={},ma=function(e,n,r){let l=Promise.resolve();if(n&&n.length>0){let m=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(w=>({status:"fulfilled",value:w}),w=>({status:"rejected",reason:w}))))};var u=m;document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=h?.nonce||h?.getAttribute("nonce");l=m(n.map(p=>{if(p=L1(p),p in Lv)return;Lv[p]=!0;const y=p.endsWith(".css"),w=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${w}`))return;const _=document.createElement("link");if(_.rel=y?"stylesheet":O1,y||(_.as="script"),_.crossOrigin="",_.href=p,g&&_.setAttribute("nonce",g),document.head.appendChild(_),y)return new Promise((C,x)=>{_.addEventListener("load",C),_.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(h){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h}return l.then(h=>{for(const g of h||[])g.status==="rejected"&&c(g.reason);return e().catch(c)})},k1=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>ma(async()=>{const{default:r}=await Promise.resolve().then(()=>pa);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Qf extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class N1 extends Qf{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class kv extends Qf{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Nv extends Qf{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zh;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Zh||(Zh={}));var M1=function(i,e,n,r){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(p){try{m(r.next(p))}catch(y){u(y)}}function g(p){try{m(r.throw(p))}catch(y){u(y)}}function m(p){p.done?c(p.value):l(p.value).then(h,g)}m((r=r.apply(i,e||[])).next())})};class U1{constructor(e,{headers:n={},customFetch:r,region:l=Zh.Any}={}){this.url=e,this.headers=n,this.region=l,this.fetch=k1(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return M1(this,void 0,void 0,function*(){try{const{headers:l,method:c,body:u}=n;let h={},{region:g}=n;g||(g=this.region);const m=new URL(`${this.url}/${e}`);g&&g!=="any"&&(h["x-region"]=g,m.searchParams.set("forceFunctionRegion",g));let p;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)&&(typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",p=u):typeof u=="string"?(h["Content-Type"]="text/plain",p=u):typeof FormData<"u"&&u instanceof FormData?p=u:(h["Content-Type"]="application/json",p=JSON.stringify(u)));const y=yield this.fetch(m.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),l),body:p}).catch(x=>{throw new N1(x)}),w=y.headers.get("x-relay-error");if(w&&w==="true")throw new kv(y);if(!y.ok)throw new Nv(y);let _=((r=y.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),C;return _==="application/json"?C=yield y.json():_==="application/octet-stream"?C=yield y.blob():_==="text/event-stream"?C=y:_==="multipart/form-data"?C=yield y.formData():C=yield y.text(),{data:C,error:null,response:y}}catch(l){return{data:null,error:l,response:l instanceof Nv||l instanceof kv?l.context:void 0}}})}}var _t={},Ir={},Br={},zr={},qr={},Hr={},$1=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ua=$1();const I1=ua.fetch,R0=ua.fetch.bind(ua),j0=ua.Headers,B1=ua.Request,z1=ua.Response,pa=Object.freeze(Object.defineProperty({__proto__:null,Headers:j0,Request:B1,Response:z1,default:R0,fetch:I1},Symbol.toStringTag,{value:"Module"})),q1=O_(pa);var hc={},Mv;function O0(){if(Mv)return hc;Mv=1,Object.defineProperty(hc,"__esModule",{value:!0});class i extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return hc.default=i,hc}var Uv;function L0(){if(Uv)return Hr;Uv=1;var i=Hr&&Hr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Hr,"__esModule",{value:!0});const e=i(q1),n=i(O0());class r{constructor(c){var u,h;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(u=c.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=c.signal,this.isMaybeSingle=(h=c.isMaybeSingle)!==null&&h!==void 0?h:!1,c.fetch?this.fetch=c.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,u){return this.headers=new Headers(this.headers),this.headers.set(c,u),this}then(c,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const h=this.fetch;let g=h(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var p,y,w,_;let C=null,x=null,A=null,U=m.status,z=m.statusText;if(m.ok){if(this.method!=="HEAD"){const P=await m.text();P===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((p=this.headers.get("Accept"))===null||p===void 0)&&p.includes("application/vnd.pgrst.plan+text"))?x=P:x=JSON.parse(P))}const H=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),j=(w=m.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");H&&j&&j.length>1&&(A=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(x)&&(x.length>1?(C={code:"PGRST116",details:`Results contain ${x.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},x=null,A=null,U=406,z="Not Acceptable"):x.length===1?x=x[0]:x=null)}else{const H=await m.text();try{C=JSON.parse(H),Array.isArray(C)&&m.status===404&&(x=[],C=null,U=200,z="OK")}catch{m.status===404&&H===""?(U=204,z="No Content"):C={message:H}}if(C&&this.isMaybeSingle&&(!((_=C?.details)===null||_===void 0)&&_.includes("0 rows"))&&(C=null,U=200,z="OK"),C&&this.shouldThrowOnError)throw new n.default(C)}return{error:C,data:x,count:A,status:U,statusText:z}});return this.shouldThrowOnError||(g=g.catch(m=>{var p,y,w;return{error:{message:`${(p=m?.name)!==null&&p!==void 0?p:"FetchError"}: ${m?.message}`,details:`${(y=m?.stack)!==null&&y!==void 0?y:""}`,hint:"",code:`${(w=m?.code)!==null&&w!==void 0?w:""}`},data:null,count:null,status:0,statusText:""}})),g.then(c,u)}returns(){return this}overrideTypes(){return this}}return Hr.default=r,Hr}var $v;function k0(){if($v)return qr;$v=1;var i=qr&&qr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qr,"__esModule",{value:!0});const e=i(L0());class n extends e.default{select(l){let c=!1;const u=(l??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:c=!0,nullsFirst:u,foreignTable:h,referencedTable:g=h}={}){const m=g?`${g}.order`:"order",p=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${p?`${p},`:""}${l}.${c?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:c,referencedTable:u=c}={}){const h=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(h,`${l}`),this}range(l,c,{foreignTable:u,referencedTable:h=u}={}){const g=typeof h>"u"?"offset":`${h}.offset`,m=typeof h>"u"?"limit":`${h}.limit`;return this.url.searchParams.set(g,`${l}`),this.url.searchParams.set(m,`${c-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:c=!1,settings:u=!1,buffers:h=!1,wal:g=!1,format:m="text"}={}){var p;const y=[l?"analyze":null,c?"verbose":null,u?"settings":null,h?"buffers":null,g?"wal":null].filter(Boolean).join("|"),w=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${w}"; options=${y};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}}return qr.default=n,qr}var Iv;function Pf(){if(Iv)return zr;Iv=1;var i=zr&&zr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zr,"__esModule",{value:!0});const e=i(k0());class n extends e.default{eq(l,c){return this.url.searchParams.append(l,`eq.${c}`),this}neq(l,c){return this.url.searchParams.append(l,`neq.${c}`),this}gt(l,c){return this.url.searchParams.append(l,`gt.${c}`),this}gte(l,c){return this.url.searchParams.append(l,`gte.${c}`),this}lt(l,c){return this.url.searchParams.append(l,`lt.${c}`),this}lte(l,c){return this.url.searchParams.append(l,`lte.${c}`),this}like(l,c){return this.url.searchParams.append(l,`like.${c}`),this}likeAllOf(l,c){return this.url.searchParams.append(l,`like(all).{${c.join(",")}}`),this}likeAnyOf(l,c){return this.url.searchParams.append(l,`like(any).{${c.join(",")}}`),this}ilike(l,c){return this.url.searchParams.append(l,`ilike.${c}`),this}ilikeAllOf(l,c){return this.url.searchParams.append(l,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(l,c){return this.url.searchParams.append(l,`ilike(any).{${c.join(",")}}`),this}is(l,c){return this.url.searchParams.append(l,`is.${c}`),this}in(l,c){const u=Array.from(new Set(c)).map(h=>typeof h=="string"&&new RegExp("[,()]").test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(l,`in.(${u})`),this}contains(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cs.{${c.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(c)}`),this}containedBy(l,c){return typeof c=="string"?this.url.searchParams.append(l,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(l,`cd.{${c.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(c)}`),this}rangeGt(l,c){return this.url.searchParams.append(l,`sr.${c}`),this}rangeGte(l,c){return this.url.searchParams.append(l,`nxl.${c}`),this}rangeLt(l,c){return this.url.searchParams.append(l,`sl.${c}`),this}rangeLte(l,c){return this.url.searchParams.append(l,`nxr.${c}`),this}rangeAdjacent(l,c){return this.url.searchParams.append(l,`adj.${c}`),this}overlaps(l,c){return typeof c=="string"?this.url.searchParams.append(l,`ov.${c}`):this.url.searchParams.append(l,`ov.{${c.join(",")}}`),this}textSearch(l,c,{config:u,type:h}={}){let g="";h==="plain"?g="pl":h==="phrase"?g="ph":h==="websearch"&&(g="w");const m=u===void 0?"":`(${u})`;return this.url.searchParams.append(l,`${g}fts${m}.${c}`),this}match(l){return Object.entries(l).forEach(([c,u])=>{this.url.searchParams.append(c,`eq.${u}`)}),this}not(l,c,u){return this.url.searchParams.append(l,`not.${c}.${u}`),this}or(l,{foreignTable:c,referencedTable:u=c}={}){const h=u?`${u}.or`:"or";return this.url.searchParams.append(h,`(${l})`),this}filter(l,c,u){return this.url.searchParams.append(l,`${c}.${u}`),this}}return zr.default=n,zr}var Bv;function N0(){if(Bv)return Br;Bv=1;var i=Br&&Br.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Br,"__esModule",{value:!0});const e=i(Pf());class n{constructor(l,{headers:c={},schema:u,fetch:h}){this.url=l,this.headers=new Headers(c),this.schema=u,this.fetch=h}select(l,{head:c=!1,count:u}={}){const h=c?"HEAD":"GET";let g=!1;const m=(l??"*").split("").map(p=>/\s/.test(p)&&!g?"":(p==='"'&&(g=!g),p)).join("");return this.url.searchParams.set("select",m),u&&this.headers.append("Prefer",`count=${u}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:c,defaultToNull:u=!0}={}){var h;const g="POST";if(c&&this.headers.append("Prefer",`count=${c}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const m=l.reduce((p,y)=>p.concat(Object.keys(y)),[]);if(m.length>0){const p=[...new Set(m)].map(y=>`"${y}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}upsert(l,{onConflict:c,ignoreDuplicates:u=!1,count:h,defaultToNull:g=!0}={}){var m;const p="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),c!==void 0&&this.url.searchParams.set("on_conflict",c),h&&this.headers.append("Prefer",`count=${h}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const y=l.reduce((w,_)=>w.concat(Object.keys(_)),[]);if(y.length>0){const w=[...new Set(y)].map(_=>`"${_}"`);this.url.searchParams.set("columns",w.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(l,{count:c}={}){var u;const h="PATCH";return c&&this.headers.append("Prefer",`count=${c}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:l}={}){var c;const u="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}}return Br.default=n,Br}var zv;function H1(){if(zv)return Ir;zv=1;var i=Ir&&Ir.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(Ir,"__esModule",{value:!0});const e=i(N0()),n=i(Pf());class r{constructor(c,{headers:u={},schema:h,fetch:g}={}){this.url=c,this.headers=new Headers(u),this.schemaName=h,this.fetch=g}from(c){const u=new URL(`${this.url}/${c}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(c){return new r(this.url,{headers:this.headers,schema:c,fetch:this.fetch})}rpc(c,u={},{head:h=!1,get:g=!1,count:m}={}){var p;let y;const w=new URL(`${this.url}/rpc/${c}`);let _;h||g?(y=h?"HEAD":"GET",Object.entries(u).filter(([x,A])=>A!==void 0).map(([x,A])=>[x,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([x,A])=>{w.searchParams.append(x,A)})):(y="POST",_=u);const C=new Headers(this.headers);return m&&C.set("Prefer",`count=${m}`),new n.default({method:y,url:w,headers:C,schema:this.schemaName,body:_,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return Ir.default=r,Ir}var qv;function Y1(){if(qv)return _t;qv=1;var i=_t&&_t.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(_t,"__esModule",{value:!0}),_t.PostgrestError=_t.PostgrestBuilder=_t.PostgrestTransformBuilder=_t.PostgrestFilterBuilder=_t.PostgrestQueryBuilder=_t.PostgrestClient=void 0;const e=i(H1());_t.PostgrestClient=e.default;const n=i(N0());_t.PostgrestQueryBuilder=n.default;const r=i(Pf());_t.PostgrestFilterBuilder=r.default;const l=i(k0());_t.PostgrestTransformBuilder=l.default;const c=i(L0());_t.PostgrestBuilder=c.default;const u=i(O0());return _t.PostgrestError=u.default,_t.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:c.default,PostgrestError:u.default},_t}var G1=Y1();const V1=Sf(G1),{PostgrestClient:Q1,PostgrestQueryBuilder:hj,PostgrestFilterBuilder:fj,PostgrestTransformBuilder:gj,PostgrestBuilder:mj,PostgrestError:pj}=V1;class P1{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const X1="2.15.4",K1=`realtime-js/${X1}`,F1="1.0.0",Wh=1e4,J1=1e3,Z1=100;var Sl;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Sl||(Sl={}));var ut;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(ut||(ut={}));var Ln;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Ln||(Ln={}));var ef;(function(i){i.websocket="websocket"})(ef||(ef={}));var Mi;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Mi||(Mi={}));class W1{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const l=n.getUint8(1),c=n.getUint8(2);let u=this.HEADER_LENGTH+2;const h=r.decode(e.slice(u,u+l));u=u+l;const g=r.decode(e.slice(u,u+c));u=u+c;const m=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{ref:null,topic:h,event:g,payload:m}}}class M0{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var He;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(He||(He={}));const Hv=(i,e,n={})=>{var r;const l=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((c,u)=>(c[u]=eT(u,i,e,l),c),{})},eT=(i,e,n,r)=>{const l=e.find(h=>h.name===i),c=l?.type,u=n[i];return c&&!r.includes(c)?U0(c,u):tf(u)},U0=(i,e)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return iT(e,n)}switch(i){case He.bool:return tT(e);case He.float4:case He.float8:case He.int2:case He.int4:case He.int8:case He.numeric:case He.oid:return nT(e);case He.json:case He.jsonb:return sT(e);case He.timestamp:return rT(e);case He.abstime:case He.date:case He.daterange:case He.int4range:case He.int8range:case He.money:case He.reltime:case He.text:case He.time:case He.timestamptz:case He.timetz:case He.tsrange:case He.tstzrange:return tf(e);default:return tf(e)}},tf=i=>i,tT=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},nT=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},sT=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},iT=(i,e)=>{if(typeof i!="string")return i;const n=i.length-1,r=i[n];if(i[0]==="{"&&r==="}"){let c;const u=i.slice(1,n);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(h=>U0(e,h))}return i},rT=i=>typeof i=="string"?i.replace(" ","T"):i,$0=i=>{let e=i;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Dh{constructor(e,n,r={},l=Wh){this.channel=e,this.event=n,this.payload=r,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Yv;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Yv||(Yv={}));class _l{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},l=>{const{onJoin:c,onLeave:u,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_l.syncState(this.state,l,c,u),this.pendingDiffs.forEach(g=>{this.state=_l.syncDiff(this.state,g,c,u)}),this.pendingDiffs=[],h()}),this.channel._on(r.diff,{},l=>{const{onJoin:c,onLeave:u,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=_l.syncDiff(this.state,l,c,u),h())}),this.onJoin((l,c,u)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:c,newPresences:u})}),this.onLeave((l,c,u)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,l){const c=this.cloneDeep(e),u=this.transformState(n),h={},g={};return this.map(c,(m,p)=>{u[m]||(g[m]=p)}),this.map(u,(m,p)=>{const y=c[m];if(y){const w=p.map(A=>A.presence_ref),_=y.map(A=>A.presence_ref),C=p.filter(A=>_.indexOf(A.presence_ref)<0),x=y.filter(A=>w.indexOf(A.presence_ref)<0);C.length>0&&(h[m]=C),x.length>0&&(g[m]=x)}else h[m]=p}),this.syncDiff(c,{joins:h,leaves:g},r,l)}static syncDiff(e,n,r,l){const{joins:c,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),l||(l=()=>{}),this.map(c,(h,g)=>{var m;const p=(m=e[h])!==null&&m!==void 0?m:[];if(e[h]=this.cloneDeep(g),p.length>0){const y=e[h].map(_=>_.presence_ref),w=p.filter(_=>y.indexOf(_.presence_ref)<0);e[h].unshift(...w)}r(h,p,g)}),this.map(u,(h,g)=>{let m=e[h];if(!m)return;const p=g.map(y=>y.presence_ref);m=m.filter(y=>p.indexOf(y.presence_ref)<0),e[h]=m,l(h,m,g),m.length===0&&delete e[h]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const l=e[r];return"metas"in l?n[r]=l.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):n[r]=l,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Gv;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Gv||(Gv={}));var El;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(El||(El={}));var Ss;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Ss||(Ss={}));class Xf{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Dh(this,Ln.join,this.params,this.timeout),this.rejoinTimer=new M0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(l=>l.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ut.closed,this.socket._remove(this)}),this._onError(l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",l=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,l),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ln.reply,{},(l,c)=>{this._trigger(this._replyEventName(c),l)}),this.presence=new _l(this),this.broadcastEndpointURL=$0(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,l,c;if(this.socket.isConnected()||this.socket.connect(),this.state==ut.closed){const{config:{broadcast:u,presence:h,private:g}}=this.params,m=(l=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(_=>_.filter))!==null&&l!==void 0?l:[],p=!!this.bindings[El.PRESENCE]&&this.bindings[El.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,y={},w={broadcast:u,presence:Object.assign(Object.assign({},h),{enabled:p}),postgres_changes:m,private:g};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this._onError(_=>e?.(Ss.CHANNEL_ERROR,_)),this._onClose(()=>e?.(Ss.CLOSED)),this.updateJoinPayload(Object.assign({config:w},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:_})=>{var C;if(this.socket.setAuth(),_===void 0){e?.(Ss.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,A=(C=x?.length)!==null&&C!==void 0?C:0,U=[];for(let z=0;z<A;z++){const $=x[z],{filter:{event:H,schema:j,table:P,filter:F}}=$,W=_&&_[z];if(W&&W.event===H&&W.schema===j&&W.table===P&&W.filter===F)U.push(Object.assign(Object.assign({},$),{id:W.id}));else{this.unsubscribe(),this.state=ut.errored,e?.(Ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,e&&e(Ss.SUBSCRIBED);return}}).receive("error",_=>{this.state=ut.errored,e?.(Ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ut.joined&&e===El.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async send(e,n={}){var r,l;if(!this._canPush()&&e.type==="broadcast"){const{event:c,payload:u}=e,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((l=m.body)===null||l===void 0?void 0:l.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,h,g;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((g=(h=(u=this.params)===null||u===void 0?void 0:u.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&c("ok"),m.receive("ok",()=>c("ok")),m.receive("error",()=>c("error")),m.receive("timeout",()=>c("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ut.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ln.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(l=>{r=new Dh(this,Ln.leave,{},e),r.receive("ok",()=>{n(),l("ok")}).receive("timeout",()=>{n(),l("timed out")}).receive("error",()=>{l("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ut.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const l=new AbortController,c=setTimeout(()=>l.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:l.signal}));return clearTimeout(c),u}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Dh(this,e,n,r);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Z1){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var l,c;const u=e.toLocaleLowerCase(),{close:h,error:g,leave:m,join:p}=Ln;if(r&&[h,g,m,p].indexOf(u)>=0&&r!==this._joinRef())return;let w=this._onMessage(u,n,r);if(n&&!w)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(_=>{var C,x,A;return((C=_.filter)===null||C===void 0?void 0:C.event)==="*"||((A=(x=_.filter)===null||x===void 0?void 0:x.event)===null||A===void 0?void 0:A.toLocaleLowerCase())===u}).map(_=>_.callback(w,r)):(c=this.bindings[u])===null||c===void 0||c.filter(_=>{var C,x,A,U,z,$;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in _){const H=_.id,j=(C=_.filter)===null||C===void 0?void 0:C.event;return H&&((x=n.ids)===null||x===void 0?void 0:x.includes(H))&&(j==="*"||j?.toLocaleLowerCase()===((A=n.data)===null||A===void 0?void 0:A.type.toLocaleLowerCase()))}else{const H=(z=(U=_?.filter)===null||U===void 0?void 0:U.event)===null||z===void 0?void 0:z.toLocaleLowerCase();return H==="*"||H===(($=n?.event)===null||$===void 0?void 0:$.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===u}).map(_=>{if(typeof w=="object"&&"ids"in w){const C=w.data,{schema:x,table:A,commit_timestamp:U,type:z,errors:$}=C;w=Object.assign(Object.assign({},{schema:x,table:A,commit_timestamp:U,eventType:z,new:{},old:{},errors:$}),this._getPayloadRecords(C))}_.callback(w,r)})}_isClosed(){return this.state===ut.closed}_isJoined(){return this.state===ut.joined}_isJoining(){return this.state===ut.joining}_isLeaving(){return this.state===ut.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const l=e.toLocaleLowerCase(),c={type:l,filter:n,callback:r};return this.bindings[l]?this.bindings[l].push(c):this.bindings[l]=[c],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(l=>{var c;return!(((c=l.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===r&&Xf.isEqual(l.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ln.close,{},e)}_onError(e){this._on(Ln.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ut.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Hv(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Hv(e.columns,e.old_record)),n}}const Ah=()=>{},fc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},aT=[1e3,2e3,5e3,1e4],lT=1e4,oT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class cT{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Wh,this.transport=null,this.heartbeatIntervalMs=fc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ah,this.ref=0,this.reconnectTimer=null,this.logger=Ah,this.conn=null,this.sendBuffer=[],this.serializer=new W1,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=l=>{let c;return l?c=l:typeof fetch>"u"?c=(...u)=>ma(async()=>{const{default:h}=await Promise.resolve().then(()=>pa);return{default:h}},void 0).then(({default:h})=>h(...u)).catch(h=>{throw new Error(`Failed to load @supabase/node-fetch: ${h.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):c=fetch,(...u)=>c(...u)},!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${ef.websocket}`,this.httpEndpoint=$0(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=P1.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:F1}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Sl.connecting:return Mi.Connecting;case Sl.open:return Mi.Open;case Sl.closing:return Mi.Closing;default:return Mi.Closed}}isConnected(){return this.connectionState()===Mi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,l=this.getChannels().find(c=>c.topic===r);if(l)return l;{const c=new Xf(`realtime:${e}`,n,this);return this.channels.push(c),c}}push(e){const{topic:n,event:r,payload:l,ref:c}=e,u=()=>{this.encode(e,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${n} ${r} (${c})`,l),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(J1,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},fc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:l,payload:c,ref:u}=n,h=u?`(${u})`:"",g=c.status||"";this.log("receive",`${g} ${r} ${l} ${h}`.trim(),c),this.channels.filter(m=>m._isMember(r)).forEach(m=>m._trigger(l,c,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ln.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",l=new URLSearchParams(n);return`${e}${r}${l}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([oT],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const l={access_token:n,version:K1};n&&r.updateJoinPayload(l),r.joinedOnce&&r._isJoined()&&r._push(Ln.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(l){this.log("error",`error in ${e} callback`,l)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new M0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},fc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,l,c,u,h,g,m,p;if(this.transport=(n=e?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:Wh,this.heartbeatIntervalMs=(l=e?.heartbeatIntervalMs)!==null&&l!==void 0?l:fc.HEARTBEAT_INTERVAL,this.worker=(c=e?.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=e?.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(h=e?.heartbeatCallback)!==null&&h!==void 0?h:Ah,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e?.reconnectAfterMs)!==null&&g!==void 0?g:(y=>aT[y-1]||lT),this.encode=(m=e?.encode)!==null&&m!==void 0?m:((y,w)=>w(JSON.stringify(y))),this.decode=(p=e?.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Kf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function dt(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class uT extends Kf{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class nf extends Kf{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var dT=function(i,e,n,r){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(p){try{m(r.next(p))}catch(y){u(y)}}function g(p){try{m(r.throw(p))}catch(y){u(y)}}function m(p){p.done?c(p.value):l(p.value).then(h,g)}m((r=r.apply(i,e||[])).next())})};const I0=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>ma(async()=>{const{default:r}=await Promise.resolve().then(()=>pa);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},hT=()=>dT(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ma(()=>Promise.resolve().then(()=>pa),void 0)).Response:Response}),sf=i=>{if(Array.isArray(i))return i.map(n=>sf(n));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([n,r])=>{const l=n.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));e[l]=sf(r)}),e},fT=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)};var Qi=function(i,e,n,r){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(p){try{m(r.next(p))}catch(y){u(y)}}function g(p){try{m(r.throw(p))}catch(y){u(y)}}function m(p){p.done?c(p.value):l(p.value).then(h,g)}m((r=r.apply(i,e||[])).next())})};const Rh=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),gT=(i,e,n)=>Qi(void 0,void 0,void 0,function*(){const r=yield hT();i instanceof r&&!n?.noResolveJson?i.json().then(l=>{const c=i.status||500,u=l?.statusCode||c+"";e(new uT(Rh(l),c,u))}).catch(l=>{e(new nf(Rh(l),l))}):e(new nf(Rh(i),i))}),mT=(i,e,n,r)=>{const l={method:i,headers:e?.headers||{}};return i==="GET"||!r?l:(fT(r)?(l.headers=Object.assign({"Content-Type":"application/json"},e?.headers),l.body=JSON.stringify(r)):l.body=r,e?.duplex&&(l.duplex=e.duplex),Object.assign(Object.assign({},l),n))};function Xl(i,e,n,r,l,c){return Qi(this,void 0,void 0,function*(){return new Promise((u,h)=>{i(n,mT(e,r,l,c)).then(g=>{if(!g.ok)throw g;return r?.noResolveJson?g:g.json()}).then(g=>u(g)).catch(g=>gT(g,h,r))})})}function Nc(i,e,n,r){return Qi(this,void 0,void 0,function*(){return Xl(i,"GET",e,n,r)})}function Vn(i,e,n,r,l){return Qi(this,void 0,void 0,function*(){return Xl(i,"POST",e,r,l,n)})}function rf(i,e,n,r,l){return Qi(this,void 0,void 0,function*(){return Xl(i,"PUT",e,r,l,n)})}function pT(i,e,n,r){return Qi(this,void 0,void 0,function*(){return Xl(i,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function B0(i,e,n,r,l){return Qi(this,void 0,void 0,function*(){return Xl(i,"DELETE",e,r,l,n)})}var Ht=function(i,e,n,r){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(p){try{m(r.next(p))}catch(y){u(y)}}function g(p){try{m(r.throw(p))}catch(y){u(y)}}function m(p){p.done?c(p.value):l(p.value).then(h,g)}m((r=r.apply(i,e||[])).next())})};const yT={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vT{constructor(e,n={},r,l){this.url=e,this.headers=n,this.bucketId=r,this.fetch=I0(l)}uploadOrUpdate(e,n,r,l){return Ht(this,void 0,void 0,function*(){try{let c;const u=Object.assign(Object.assign({},Vv),l);let h=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const g=u.metadata;typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),g&&c.append("metadata",this.encodeMetadata(g)),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",u.cacheControl),g&&c.append("metadata",this.encodeMetadata(g))):(c=r,h["cache-control"]=`max-age=${u.cacheControl}`,h["content-type"]=u.contentType,g&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),l?.headers&&(h=Object.assign(Object.assign({},h),l.headers));const m=this._removeEmptyFolders(n),p=this._getFinalPath(m),y=yield(e=="PUT"?rf:Vn)(this.fetch,`${this.url}/object/${p}`,c,Object.assign({headers:h},u?.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:y.Id,fullPath:y.Key},error:null}}catch(c){if(dt(c))return{data:null,error:c};throw c}})}upload(e,n,r){return Ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,l){return Ht(this,void 0,void 0,function*(){const c=this._removeEmptyFolders(e),u=this._getFinalPath(c),h=new URL(this.url+`/object/upload/sign/${u}`);h.searchParams.set("token",n);try{let g;const m=Object.assign({upsert:Vv.upsert},l),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&r instanceof Blob?(g=new FormData,g.append("cacheControl",m.cacheControl),g.append("",r)):typeof FormData<"u"&&r instanceof FormData?(g=r,g.append("cacheControl",m.cacheControl)):(g=r,p["cache-control"]=`max-age=${m.cacheControl}`,p["content-type"]=m.contentType);const y=yield rf(this.fetch,h.toString(),g,{headers:p});return{data:{path:c,fullPath:y.Key},error:null}}catch(g){if(dt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(e,n){return Ht(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const l=Object.assign({},this.headers);n?.upsert&&(l["x-upsert"]="true");const c=yield Vn(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:l}),u=new URL(this.url+c.url),h=u.searchParams.get("token");if(!h)throw new Kf("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:h},error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Ht(this,void 0,void 0,function*(){try{return{data:yield Vn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(l){if(dt(l))return{data:null,error:l};throw l}})}copy(e,n,r){return Ht(this,void 0,void 0,function*(){try{return{data:{path:(yield Vn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(l){if(dt(l))return{data:null,error:l};throw l}})}createSignedUrl(e,n,r){return Ht(this,void 0,void 0,function*(){try{let l=this._getFinalPath(e),c=yield Vn(this.fetch,`${this.url}/object/sign/${l}`,Object.assign({expiresIn:n},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r?.download?`&download=${r.download===!0?"":r.download}`:"";return c={signedUrl:encodeURI(`${this.url}${c.signedURL}${u}`)},{data:c,error:null}}catch(l){if(dt(l))return{data:null,error:l};throw l}})}createSignedUrls(e,n,r){return Ht(this,void 0,void 0,function*(){try{const l=yield Vn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),c=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:l.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${c}`):null})),error:null}}catch(l){if(dt(l))return{data:null,error:l};throw l}})}download(e,n){return Ht(this,void 0,void 0,function*(){const l=typeof n?.transform<"u"?"render/image/authenticated":"object",c=this.transformOptsToQueryString(n?.transform||{}),u=c?`?${c}`:"";try{const h=this._getFinalPath(e);return{data:yield(yield Nc(this.fetch,`${this.url}/${l}/${h}${u}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(dt(h))return{data:null,error:h};throw h}})}info(e){return Ht(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Nc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:sf(r),error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}})}exists(e){return Ht(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield pT(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(dt(r)&&r instanceof nf){const l=r.originalError;if([400,404].includes(l?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),l=[],c=n?.download?`download=${n.download===!0?"":n.download}`:"";c!==""&&l.push(c);const h=typeof n?.transform<"u"?"render/image":"object",g=this.transformOptsToQueryString(n?.transform||{});g!==""&&l.push(g);let m=l.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${r}${m}`)}}}remove(e){return Ht(this,void 0,void 0,function*(){try{return{data:yield B0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Ht(this,void 0,void 0,function*(){try{const l=Object.assign(Object.assign(Object.assign({},yT),n),{prefix:e||""});return{data:yield Vn(this.fetch,`${this.url}/object/list/${this.bucketId}`,l,{headers:this.headers},r),error:null}}catch(l){if(dt(l))return{data:null,error:l};throw l}})}listV2(e,n){return Ht(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Vn(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const bT="2.11.1",wT={"X-Client-Info":`storage-js/${bT}`};var Yr=function(i,e,n,r){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(p){try{m(r.next(p))}catch(y){u(y)}}function g(p){try{m(r.throw(p))}catch(y){u(y)}}function m(p){p.done?c(p.value):l(p.value).then(h,g)}m((r=r.apply(i,e||[])).next())})};class ST{constructor(e,n={},r,l){const c=new URL(e);l?.useNewHostname&&/supabase\.(co|in|red)$/.test(c.hostname)&&!c.hostname.includes("storage.supabase.")&&(c.hostname=c.hostname.replace("supabase.","storage.supabase.")),this.url=c.href,this.headers=Object.assign(Object.assign({},wT),n),this.fetch=I0(r)}listBuckets(){return Yr(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(dt(e))return{data:null,error:e};throw e}})}getBucket(e){return Yr(this,void 0,void 0,function*(){try{return{data:yield Nc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Yr(this,void 0,void 0,function*(){try{return{data:yield Vn(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Yr(this,void 0,void 0,function*(){try{return{data:yield rf(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(dt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Yr(this,void 0,void 0,function*(){try{return{data:yield Vn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Yr(this,void 0,void 0,function*(){try{return{data:yield B0(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(dt(n))return{data:null,error:n};throw n}})}}class _T extends ST{constructor(e,n={},r,l){super(e,n,r,l)}from(e){return new vT(this.url,this.headers,e,this.fetch)}}const ET="2.57.0";let vl="";typeof Deno<"u"?vl="deno":typeof document<"u"?vl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vl="react-native":vl="node";const xT={"X-Client-Info":`supabase-js-${vl}/${ET}`},CT={headers:xT},TT={schema:"public"},DT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},AT={};var RT=function(i,e,n,r){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(p){try{m(r.next(p))}catch(y){u(y)}}function g(p){try{m(r.throw(p))}catch(y){u(y)}}function m(p){p.done?c(p.value):l(p.value).then(h,g)}m((r=r.apply(i,e||[])).next())})};const jT=i=>{let e;return i?e=i:typeof fetch>"u"?e=R0:e=fetch,(...n)=>e(...n)},OT=()=>typeof Headers>"u"?j0:Headers,LT=(i,e,n)=>{const r=jT(n),l=OT();return(c,u)=>RT(void 0,void 0,void 0,function*(){var h;const g=(h=yield e())!==null&&h!==void 0?h:i;let m=new l(u?.headers);return m.has("apikey")||m.set("apikey",i),m.has("Authorization")||m.set("Authorization",`Bearer ${g}`),r(c,Object.assign(Object.assign({},u),{headers:m}))})};var kT=function(i,e,n,r){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(p){try{m(r.next(p))}catch(y){u(y)}}function g(p){try{m(r.throw(p))}catch(y){u(y)}}function m(p){p.done?c(p.value):l(p.value).then(h,g)}m((r=r.apply(i,e||[])).next())})};function NT(i){return i.endsWith("/")?i:i+"/"}function MT(i,e){var n,r;const{db:l,auth:c,realtime:u,global:h}=i,{db:g,auth:m,realtime:p,global:y}=e,w={db:Object.assign(Object.assign({},g),l),auth:Object.assign(Object.assign({},m),c),realtime:Object.assign(Object.assign({},p),u),storage:{},global:Object.assign(Object.assign(Object.assign({},y),h),{headers:Object.assign(Object.assign({},(n=y?.headers)!==null&&n!==void 0?n:{}),(r=h?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>kT(this,void 0,void 0,function*(){return""})};return i.accessToken?w.accessToken=i.accessToken:delete w.accessToken,w}const z0="2.71.1",Kr=30*1e3,af=3,jh=af*Kr,UT="http://localhost:9999",$T="supabase.auth.token",IT={"X-Client-Info":`gotrue-js/${z0}`},lf="X-Supabase-Api-Version",q0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BT=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,zT=600*1e3;class Ff extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function de(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class qT extends Ff{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function HT(i){return de(i)&&i.name==="AuthApiError"}class H0 extends Ff{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class hi extends Ff{constructor(e,n,r,l){super(e,r,l),this.name=n,this.status=r}}class ei extends hi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function YT(i){return de(i)&&i.name==="AuthSessionMissingError"}class gc extends hi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class mc extends hi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class pc extends hi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function GT(i){return de(i)&&i.name==="AuthImplicitGrantRedirectError"}class Qv extends hi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class of extends hi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Oh(i){return de(i)&&i.name==="AuthRetryableFetchError"}class Pv extends hi{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class cf extends hi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Mc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Xv=` 	
\r=`.split(""),VT=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<Xv.length;e+=1)i[Xv[e].charCodeAt(0)]=-2;for(let e=0;e<Mc.length;e+=1)i[Mc[e].charCodeAt(0)]=e;return i})();function Kv(i,e,n){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Mc[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Mc[r]),e.queuedBits-=6}}function Y0(i,e,n){const r=VT[i];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Fv(i){const e=[],n=u=>{e.push(String.fromCodePoint(u))},r={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},c=u=>{XT(u,r,n)};for(let u=0;u<i.length;u+=1)Y0(i.charCodeAt(u),l,c);return e.join("")}function QT(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function PT(i,e){for(let n=0;n<i.length;n+=1){let r=i.charCodeAt(n);if(r>55295&&r<=56319){const l=(r-55296)*1024&65535;r=(i.charCodeAt(n+1)-56320&65535|l)+65536,n+=1}QT(r,e)}}function XT(i,e,n){if(e.utf8seq===0){if(i<=127){n(i);return}for(let r=1;r<6;r+=1)if((i>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function KT(i){const e=[],n={queue:0,queuedBits:0},r=l=>{e.push(l)};for(let l=0;l<i.length;l+=1)Y0(i.charCodeAt(l),n,r);return new Uint8Array(e)}function FT(i){const e=[];return PT(i,n=>e.push(n)),new Uint8Array(e)}function JT(i){const e=[],n={queue:0,queuedBits:0},r=l=>{e.push(l)};return i.forEach(l=>Kv(l,n,r)),Kv(null,n,r),e.join("")}function ZT(i){return Math.round(Date.now()/1e3)+i}function WT(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}const jn=()=>typeof window<"u"&&typeof document<"u",Li={tested:!1,writable:!1},G0=()=>{if(!jn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Li.tested)return Li.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Li.tested=!0,Li.writable=!0}catch{Li.tested=!0,Li.writable=!1}return Li.writable};function eD(i){const e={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((l,c)=>{e[c]=l})}catch{}return n.searchParams.forEach((r,l)=>{e[l]=r}),e}const V0=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>ma(async()=>{const{default:r}=await Promise.resolve().then(()=>pa);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},tD=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Fr=async(i,e,n)=>{await i.setItem(e,JSON.stringify(n))},ki=async(i,e)=>{const n=await i.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ws=async(i,e)=>{await i.removeItem(e)};class Fc{constructor(){this.promise=new Fc.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Fc.promiseConstructor=Promise;function Lh(i){const e=i.split(".");if(e.length!==3)throw new cf("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!BT.test(e[r]))throw new cf("JWT not in base64url format");return{header:JSON.parse(Fv(e[0])),payload:JSON.parse(Fv(e[1])),signature:KT(e[2]),raw:{header:e[0],payload:e[1]}}}async function nD(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function sD(i,e){return new Promise((r,l)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await i(c);if(!e(c,null,u)){r(u);return}}catch(u){if(!e(c,u)){l(u);return}}})()})}function iD(i){return("0"+i.toString(16)).substr(-2)}function rD(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let l="";for(let c=0;c<56;c++)l+=n.charAt(Math.floor(Math.random()*r));return l}return crypto.getRandomValues(e),Array.from(e,iD).join("")}async function aD(i){const n=new TextEncoder().encode(i),r=await crypto.subtle.digest("SHA-256",n),l=new Uint8Array(r);return Array.from(l).map(c=>String.fromCharCode(c)).join("")}async function lD(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await aD(i);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Gr(i,e,n=!1){const r=rD();let l=r;n&&(l+="/PASSWORD_RECOVERY"),await Fr(i,`${e}-code-verifier`,l);const c=await lD(r);return[c,r===c?"plain":"s256"]}const oD=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function cD(i){const e=i.headers.get(lf);if(!e||!e.match(oD))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function uD(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function dD(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const hD=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Vr(i){if(!hD.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function kh(){const i={};return new Proxy(i,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Jv(i){return JSON.parse(JSON.stringify(i))}var fD=function(i,e){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(i);l<r.length;l++)e.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(i,r[l])&&(n[r[l]]=i[r[l]]);return n};const Ni=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),gD=[502,503,504];async function Zv(i){var e;if(!tD(i))throw new of(Ni(i),0);if(gD.includes(i.status))throw new of(Ni(i),i.status);let n;try{n=await i.json()}catch(c){throw new H0(Ni(c),c)}let r;const l=cD(i);if(l&&l.getTime()>=q0["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Pv(Ni(n),i.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ei}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new Pv(Ni(n),i.status,n.weak_password.reasons);throw new qT(Ni(n),i.status||500,r)}const mD=(i,e,n,r)=>{const l={method:i,headers:e?.headers||{}};return i==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),l.body=JSON.stringify(r),Object.assign(Object.assign({},l),n))};async function we(i,e,n,r){var l;const c=Object.assign({},r?.headers);c[lf]||(c[lf]=q0["2024-01-01"].name),r?.jwt&&(c.Authorization=`Bearer ${r.jwt}`);const u=(l=r?.query)!==null&&l!==void 0?l:{};r?.redirectTo&&(u.redirect_to=r.redirectTo);const h=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",g=await pD(i,e,n+h,{headers:c,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(g):{data:Object.assign({},g),error:null}}async function pD(i,e,n,r,l,c){const u=mD(e,r,l,c);let h;try{h=await i(n,Object.assign({},u))}catch(g){throw console.error(g),new of(Ni(g),0)}if(h.ok||await Zv(h),r?.noResolveJson)return h;try{return await h.json()}catch(g){await Zv(g)}}function ws(i){var e;let n=null;wD(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=ZT(i.expires_in)));const r=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:n,user:r},error:null}}function Wv(i){const e=ws(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=i.weak_password),e}function si(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function yD(i){return{data:i,error:null}}function vD(i){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:l,verification_type:c}=i,u=fD(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:e,email_otp:n,hashed_token:r,redirect_to:l,verification_type:c},g=Object.assign({},u);return{data:{properties:h,user:g},error:null}}function bD(i){return i}function wD(i){return i.access_token&&i.refresh_token&&i.expires_in}const Nh=["global","local","others"];var SD=function(i,e){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(i);l<r.length;l++)e.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(i,r[l])&&(n[r[l]]=i[r[l]]);return n};class _D{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=V0(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=Nh[0]){if(Nh.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Nh.join(", ")}`);try{return await we(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await we(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:si})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=SD(e,["options"]),l=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(l.new_email=r?.newEmail,delete l.newEmail),await we(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:vD,redirectTo:n?.redirectTo})}catch(n){if(de(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await we(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:si})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,l,c,u,h,g;try{const m={nextPage:null,lastPage:0,total:0},p=await we(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(c=(l=e?.perPage)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""},xform:bD});if(p.error)throw p.error;const y=await p.json(),w=(u=p.headers.get("x-total-count"))!==null&&u!==void 0?u:0,_=(g=(h=p.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return _.length>0&&(_.forEach(C=>{const x=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),A=JSON.parse(C.split(";")[1].split("=")[1]);m[`${A}Page`]=x}),m.total=parseInt(w)),{data:Object.assign(Object.assign({},y),m),error:null}}catch(m){if(de(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){Vr(e);try{return await we(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:si})}catch(n){if(de(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Vr(e);try{return await we(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:si})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Vr(e);try{return await we(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:si})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Vr(e.userId);try{const{data:n,error:r}=await we(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:n,error:r}}catch(n){if(de(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Vr(e.userId),Vr(e.id);try{return{data:await we(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}}function eb(i={}){return{getItem:e=>i[e]||null,setItem:(e,n)=>{i[e]=n},removeItem:e=>{delete i[e]}}}function ED(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Qr={debug:!!(globalThis&&G0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Q0 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xD extends Q0{}async function CD(i,e,n){Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async l=>{if(l){Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,l.name);try{return await n()}finally{Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,l.name)}}else{if(e===0)throw Qr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new xD(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Qr.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}ED();const TD={url:UT,storageKey:$T,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:IT,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function tb(i,e,n){return await n()}const Pr={};class $l{constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$l.nextInstanceID,$l.nextInstanceID+=1,this.instanceID>0&&jn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const l=Object.assign(Object.assign({},TD),e);if(this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.persistSession=l.persistSession,this.storageKey=l.storageKey,this.autoRefreshToken=l.autoRefreshToken,this.admin=new _D({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=V0(l.fetch),this.lock=l.lock||tb,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,l.lock?this.lock=l.lock:jn()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=CD:this.lock=tb,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:G0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=eb(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=eb(this.memoryStorage)),jn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}get jwks(){var e,n;return(n=(e=Pr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Pr[this.storageKey]=Object.assign(Object.assign({},Pr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Pr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Pr[this.storageKey]=Object.assign(Object.assign({},Pr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${z0}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=eD(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),jn()&&this.detectSessionInUrl&&r!=="none"){const{data:l,error:c}=await this._getSessionFromURL(n,r);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),GT(c)){const g=(e=c.details)===null||e===void 0?void 0:e.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:c}}return await this._removeSession(),{error:c}}const{session:u,redirectType:h}=l;return this._debug("#_initialize()","detected session in URL",u,"redirect type",h),await this._saveSession(u),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return de(n)?{error:n}:{error:new H0("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,l;try{const c=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(l=e?.options)===null||l===void 0?void 0:l.captchaToken}},xform:ws}),{data:u,error:h}=c;if(h||!u)return{data:{user:null,session:null},error:h};const g=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:m,session:g},error:null}}catch(c){if(de(c))return{data:{user:null,session:null},error:c};throw c}}async signUp(e){var n,r,l;try{let c;if("email"in e){const{email:p,password:y,options:w}=e;let _=null,C=null;this.flowType==="pkce"&&([_,C]=await Gr(this.storage,this.storageKey)),c=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:w?.emailRedirectTo,body:{email:p,password:y,data:(n=w?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:w?.captchaToken},code_challenge:_,code_challenge_method:C},xform:ws})}else if("phone"in e){const{phone:p,password:y,options:w}=e;c=await we(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:y,data:(r=w?.data)!==null&&r!==void 0?r:{},channel:(l=w?.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:w?.captchaToken}},xform:ws})}else throw new mc("You must provide either an email or phone number and a password");const{data:u,error:h}=c;if(h||!u)return{data:{user:null,session:null},error:h};const g=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:m,session:g},error:null}}catch(c){if(de(c))return{data:{user:null,session:null},error:c};throw c}}async signInWithPassword(e){try{let n;if("email"in e){const{email:c,password:u,options:h}=e;n=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Wv})}else if("phone"in e){const{phone:c,password:u,options:h}=e;n=await we(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:h?.captchaToken}},xform:Wv})}else throw new mc("You must provide either an email or phone number and a password");const{data:r,error:l}=n;return l?{data:{user:null,session:null},error:l}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new gc}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:l})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,l,c;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(c=e.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,l,c,u,h,g,m,p,y,w,_;let C,x;if("message"in e)C=e.message,x=e.signature;else{const{chain:A,wallet:U,statement:z,options:$}=e;let H;if(jn())if(typeof U=="object")H=U;else{const P=window;if("solana"in P&&typeof P.solana=="object"&&("signIn"in P.solana&&typeof P.solana.signIn=="function"||"signMessage"in P.solana&&typeof P.solana.signMessage=="function"))H=P.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!$?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");H=U}const j=new URL((n=$?.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in H&&H.signIn){const P=await H.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},$?.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),z?{statement:z}:null));let F;if(Array.isArray(P)&&P[0]&&typeof P[0]=="object")F=P[0];else if(P&&typeof P=="object"&&"signedMessage"in P&&"signature"in P)F=P;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)C=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),x=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in H)||typeof H.signMessage!="function"||!("publicKey"in H)||typeof H!="object"||!H.publicKey||!("toBase58"in H.publicKey)||typeof H.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${j.host} wants you to sign in with your Solana account:`,H.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(l=(r=$?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((c=$?.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${$.signInWithSolana.notBefore}`]:[],...!((u=$?.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${$.signInWithSolana.expirationTime}`]:[],...!((h=$?.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${$.signInWithSolana.chainId}`]:[],...!((g=$?.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${$.signInWithSolana.nonce}`]:[],...!((m=$?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${$.signInWithSolana.requestId}`]:[],...!((y=(p=$?.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||y===void 0)&&y.length?["Resources",...$.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const P=await H.signMessage(new TextEncoder().encode(C),"utf8");if(!P||!(P instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=P}}try{const{data:A,error:U}=await we(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:JT(x)},!((w=e.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=e.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:ws});if(U)throw U;return!A||!A.session||!A.user?{data:{user:null,session:null},error:new gc}:(A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),{data:Object.assign({},A),error:U})}catch(A){if(de(A))return{data:{user:null,session:null},error:A};throw A}}async _exchangeCodeForSession(e){const n=await ki(this.storage,`${this.storageKey}-code-verifier`),[r,l]=(n??"").split("/");try{const{data:c,error:u}=await we(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ws});if(await Ws(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!c||!c.session||!c.user?{data:{user:null,session:null,redirectType:null},error:new gc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:Object.assign(Object.assign({},c),{redirectType:l??null}),error:u})}catch(c){if(de(c))return{data:{user:null,session:null,redirectType:null},error:c};throw c}}async signInWithIdToken(e){try{const{options:n,provider:r,token:l,access_token:c,nonce:u}=e,h=await we(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:l,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:ws}),{data:g,error:m}=h;return m?{data:{user:null,session:null},error:m}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new gc}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:m})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,l,c,u;try{if("email"in e){const{email:h,options:g}=e;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Gr(this.storage,this.storageKey));const{error:y}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=g?.data)!==null&&n!==void 0?n:{},create_user:(r=g?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},code_challenge:m,code_challenge_method:p},redirectTo:g?.emailRedirectTo});return{data:{user:null,session:null},error:y}}if("phone"in e){const{phone:h,options:g}=e,{data:m,error:p}=await we(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(l=g?.data)!==null&&l!==void 0?l:{},create_user:(c=g?.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:g?.captchaToken},channel:(u=g?.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:m?.message_id},error:p}}throw new mc("You must provide either an email or phone number.")}catch(h){if(de(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var n,r;try{let l,c;"options"in e&&(l=(n=e.options)===null||n===void 0?void 0:n.redirectTo,c=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:h}=await we(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:c}}),redirectTo:l,xform:ws});if(h)throw h;if(!u)throw new Error("An error occurred on token verification.");const g=u.session,m=u.user;return g?.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:m,session:g},error:null}}catch(l){if(de(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithSSO(e){var n,r,l;try{let c=null,u=null;return this.flowType==="pkce"&&([c,u]=await Gr(this.storage,this.storageKey)),await we(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((l=e?.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:yD})}catch(c){if(de(c))return{data:null,error:c};throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new ei;const{error:l}=await we(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:l}})}catch(e){if(de(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:l,options:c}=e,{error:u}=await we(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:r,type:l,options:c}=e,{data:u,error:h}=await we(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:l,gotrue_meta_security:{captcha_token:c?.captchaToken}}});return{data:{user:null,session:null,messageId:u?.message_id},error:h}}throw new mc("You must provide either an email or phone number and a type")}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await ki(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<jh:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const u=await ki(this.userStorage,this.storageKey+"-user");u?.user?e.user=u.user:e.user=kh()}if(this.storage.isServer&&e.user){let u=this.suppressGetSessionWarning;e=new Proxy(e,{get:(g,m,p)=>(!u&&m==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),u=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,m,p))})}return{data:{session:e},error:null}}const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);return c?{data:{session:null},error:c}:{data:{session:l},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:si}):await this._useSession(async n=>{var r,l,c;const{data:u,error:h}=n;if(h)throw h;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ei}:await we(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(l=u.session)===null||l===void 0?void 0:l.access_token)!==null&&c!==void 0?c:void 0,xform:si})})}catch(n){if(de(n))return YT(n)&&(await this._removeSession(),await Ws(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:l,error:c}=r;if(c)throw c;if(!l.session)throw new ei;const u=l.session;let h=null,g=null;this.flowType==="pkce"&&e.email!=null&&([h,g]=await Gr(this.storage,this.storageKey));const{data:m,error:p}=await we(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:h,code_challenge_method:g}),jwt:u.access_token,xform:si});if(p)throw p;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(r){if(de(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ei;const n=Date.now()/1e3;let r=n,l=!0,c=null;const{payload:u}=Lh(e.access_token);if(u.exp&&(r=u.exp,l=r<=n),l){const{session:h,error:g}=await this._callRefreshToken(e.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!h)return{data:{user:null,session:null},error:null};c=h}else{const{data:h,error:g}=await this._getUser(e.access_token);if(g)throw g;c={access_token:e.access_token,refresh_token:e.refresh_token,user:h.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return{data:{user:c.user,session:c},error:null}}catch(n){if(de(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:u,error:h}=n;if(h)throw h;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new ei;const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);return c?{data:{user:null,session:null},error:c}:l?{data:{user:l.user,session:l},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(de(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!jn())throw new pc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new pc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Qv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Qv("No code detected.");const{data:z,error:$}=await this._exchangeCodeForSession(e.code);if($)throw $;const H=new URL(window.location.href);return H.searchParams.delete("code"),window.history.replaceState(window.history.state,"",H.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:l,access_token:c,refresh_token:u,expires_in:h,expires_at:g,token_type:m}=e;if(!c||!h||!u||!m)throw new pc("No session defined in URL");const p=Math.round(Date.now()/1e3),y=parseInt(h);let w=p+y;g&&(w=parseInt(g));const _=w-p;_*1e3<=Kr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${y}s`);const C=w-y;p-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,w,p):p-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,w,p);const{data:x,error:A}=await this._getUser(c);if(A)throw A;const U={provider_token:r,provider_refresh_token:l,access_token:c,expires_in:y,expires_at:w,refresh_token:u,token_type:m,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:U,redirectType:e.type},error:null}}catch(r){if(de(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await ki(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:l,error:c}=n;if(c)return{error:c};const u=(r=l.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:h}=await this.admin.signOut(u,e);if(h&&!(HT(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return e!=="others"&&(await this._removeSession(),await Ws(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=WT(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,l;try{const{data:{session:c},error:u}=n;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",e,"session",c)}catch(c){await((l=this.stateChangeEmitters.get(e))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",c),console.error(c)}})}async resetPasswordForEmail(e,n={}){let r=null,l=null;this.flowType==="pkce"&&([r,l]=await Gr(this.storage,this.storageKey,!0));try{return await we(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:l,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(c){if(de(c))return{data:null,error:c};throw c}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(de(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:l}=await this._useSession(async c=>{var u,h,g,m,p;const{data:y,error:w}=c;if(w)throw w;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(h=e.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=e.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await we(this.fetch,"GET",_,{headers:this.headers,jwt:(p=(m=y.session)===null||m===void 0?void 0:m.access_token)!==null&&p!==void 0?p:void 0})});if(l)throw l;return jn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(de(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,l;const{data:c,error:u}=n;if(u)throw u;return await we(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(l=(r=c.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await sD(async l=>(l>0&&await nD(200*Math.pow(2,l-1)),this._debug(n,"refreshing attempt",l),await we(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ws})),(l,c)=>{const u=200*Math.pow(2,l);return c&&Oh(c)&&Date.now()+u-r<Kr})}catch(r){if(this._debug(n,"error",r),de(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),jn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const l=await ki(this.storage,this.storageKey);if(l&&this.userStorage){let u=await ki(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:l.user},await Fr(this.userStorage,this.storageKey+"-user",u)),l.user=(e=u?.user)!==null&&e!==void 0?e:kh()}else if(l&&!l.user&&!l.user){const u=await ki(this.storage,this.storageKey+"-user");u&&u?.user?(l.user=u.user,await Ws(this.storage,this.storageKey+"-user"),await Fr(this.storage,this.storageKey,l)):l.user=kh()}if(this._debug(r,"session from storage",l),!this._isValidSession(l)){this._debug(r,"session is not valid"),l!==null&&await this._removeSession();return}const c=((n=l.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<jh;if(this._debug(r,`session has${c?"":" not"} expired with margin of ${jh}s`),c){if(this.autoRefreshToken&&l.refresh_token){const{error:u}=await this._callRefreshToken(l.refresh_token);u&&(console.error(u),Oh(u)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:h}=await this._getUser(l.access_token);!h&&u?.user?(l.user=u.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(r,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(r,"error",l),console.error(l);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new ei;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Fc;const{data:c,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!c.session)throw new ei;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const h={session:c.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(c){if(this._debug(l,"error",c),de(c)){const u={session:null,error:c};return Oh(c)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(c),c}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(e,n,r=!0){const l=`#_notifyAllSubscribers(${e})`;this._debug(l,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(e,n)}catch(g){c.push(g)}});if(await Promise.all(u),c.length>0){for(let h=0;h<c.length;h+=1)console.error(c[h]);throw c[0]}}finally{this._debug(l,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Fr(this.userStorage,this.storageKey+"-user",{user:n.user});const l=Object.assign({},n);delete l.user;const c=Jv(l);await Fr(this.storage,this.storageKey,c)}else{const l=Jv(n);await Fr(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),await Ws(this.storage,this.storageKey),await Ws(this.storage,this.storageKey+"-code-verifier"),await Ws(this.storage,this.storageKey+"-user"),this.userStorage&&await Ws(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&jn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Kr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((r.expires_at*1e3-e)/Kr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Kr}ms, refresh threshold is ${af} ticks`),l<=af&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Q0)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const l=[`provider=${encodeURIComponent(n)}`];if(r?.redirectTo&&l.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&l.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[c,u]=await Gr(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});l.push(h.toString())}if(r?.queryParams){const c=new URLSearchParams(r.queryParams);l.push(c.toString())}return r?.skipBrowserRedirect&&l.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${l.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:l,error:c}=n;return c?{data:null,error:c}:await we(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=l?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,l;const{data:c,error:u}=n;if(u)return{data:null,error:u};const h=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:g,error:m}=await we(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(r=c?.session)===null||r===void 0?void 0:r.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&(!((l=g?.totp)===null||l===void 0)&&l.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(n){if(de(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:l,error:c}=n;if(c)return{data:null,error:c};const{data:u,error:h}=await we(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=l?.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+u.expires_in},u)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",u),{data:u,error:h})})}catch(n){if(de(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:l,error:c}=n;return c?{data:null,error:c}:await we(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=l?.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(de(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=e?.factors||[],l=r.filter(u=>u.factor_type==="totp"&&u.status==="verified"),c=r.filter(u=>u.factor_type==="phone"&&u.status==="verified");return{data:{all:r,totp:l,phone:c},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:l},error:c}=e;if(c)return{data:null,error:c};if(!l)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Lh(l.access_token);let h=null;u.aal&&(h=u.aal);let g=h;((r=(n=l.user.factors)===null||n===void 0?void 0:n.filter(y=>y.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(g="aal2");const p=u.amr||[];return{data:{currentLevel:h,nextLevel:g,currentAuthenticationMethods:p},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(h=>h.kid===e);if(r)return r;const l=Date.now();if(r=this.jwks.keys.find(h=>h.kid===e),r&&this.jwks_cached_at+zT>l)return r;const{data:c,error:u}=await we(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=l,r=c.keys.find(h=>h.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:_,error:C}=await this.getSession();if(C||!_.session)return{data:null,error:C};r=_.session.access_token}const{header:l,payload:c,signature:u,raw:{header:h,payload:g}}=Lh(r);n?.allowExpired||uD(c.exp);const m=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,n?.keys?{keys:n.keys}:n?.jwks);if(!m){const{error:_}=await this.getUser(r);if(_)throw _;return{data:{claims:c,header:l,signature:u},error:null}}const p=dD(l.alg),y=await crypto.subtle.importKey("jwk",m,p,!0,["verify"]);if(!await crypto.subtle.verify(p,y,u,FT(`${h}.${g}`)))throw new cf("Invalid JWT signature");return{data:{claims:c,header:l,signature:u},error:null}}catch(r){if(de(r))return{data:null,error:r};throw r}}}$l.nextInstanceID=0;const DD=$l;class AD extends DD{constructor(e){super(e)}}var RD=function(i,e,n,r){function l(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function h(p){try{m(r.next(p))}catch(y){u(y)}}function g(p){try{m(r.throw(p))}catch(y){u(y)}}function m(p){p.done?c(p.value):l(p.value).then(h,g)}m((r=r.apply(i,e||[])).next())})};class jD{constructor(e,n,r){var l,c,u;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=NT(e),g=new URL(h);this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const m=`sb-${g.hostname.split(".")[0]}-auth-token`,p={db:TT,realtime:AT,auth:Object.assign(Object.assign({},DT),{storageKey:m}),global:CT},y=MT(r??{},p);this.storageKey=(l=y.auth.storageKey)!==null&&l!==void 0?l:"",this.headers=(c=y.global.headers)!==null&&c!==void 0?c:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(w,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=y.auth)!==null&&u!==void 0?u:{},this.headers,y.global.fetch),this.fetch=LT(n,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.rest=new Q1(new URL("rest/v1",g).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new _T(this.storageUrl.href,this.headers,this.fetch,r?.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new U1(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return RD(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:l,userStorage:c,storageKey:u,flowType:h,lock:g,debug:m},p,y){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new AD({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),p),storageKey:u,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:l,userStorage:c,flowType:h,lock:g,debug:m,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new cT(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const OD=(i,e,n)=>new jD(i,e,n);function LD(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const e=i.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}LD()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");class Ot{static instance=null;static url=null;static key=null;static getInstance(e,n){return Ot.instance&&Ot.url===e&&Ot.key===n||(Ot.instance=OD(e,n),Ot.url=e,Ot.key=n),Ot.instance}static reset(){Ot.instance=null,Ot.url=null,Ot.key=null}static hasInstance(){return Ot.instance!==null}}function Jf(){const i=window.location.hash.substring(1),e={};if(i){const n=i.split("#");for(const r of n)if(r.includes("access_token")||r.includes("type=")){const l=r.split("&");for(const c of l){const[u,h]=c.split("=");u&&h&&(e[u]=decodeURIComponent(h))}break}}return e}function kD(){const i=window.location.search.substring(1),e={};if(i){const n=i.split("&");for(const r of n){const[l,c]=r.split("=");l&&c&&(e[l]=decodeURIComponent(c))}}return e}function Uc(){const i=Jf(),e=kD();return(i.type==="recovery"||e.type==="recovery")&&!!(i.access_token||e.access_token)}function ND(){window.location.hash&&window.history.replaceState(null,"",window.location.pathname+window.location.search),window.location.search&&window.history.replaceState(null,"",window.location.pathname)}class _e{static sharedState=null;supabase;logger;constructor(e,n,r){this.supabase=Ot.getInstance(e,n),this.logger=r,_e.sharedState||(_e.sharedState={isInitialized:!1,currentUser:null,authStateCallbacks:new Set,supabaseListenerSetup:!1,recoverySession:null}),_e.sharedState.supabaseListenerSetup||(_e.sharedState.supabaseListenerSetup=!0,this.supabase.auth.onAuthStateChange((l,c)=>{if(_e.sharedState){if(l==="PASSWORD_RECOVERY"){_e.sharedState.recoverySession=c;return}const u=c?.user?this.mapSupabaseUserToAuthUser(c.user):null,h=_e.sharedState.currentUser?.id!==u?.id;_e.sharedState.isInitialized=!0,_e.sharedState.currentUser=u,h&&_e.sharedState.authStateCallbacks.forEach(g=>g(_e.sharedState.currentUser))}}),this.initializeSession())}async initializeSession(){try{const{data:{session:e}}=await this.supabase.auth.getSession();if(_e.sharedState){const n=e?.user?this.mapSupabaseUserToAuthUser(e.user):null,r=_e.sharedState.currentUser?.id!==n?.id;_e.sharedState.isInitialized=!0,_e.sharedState.currentUser=n,r&&_e.sharedState.authStateCallbacks.forEach(l=>l(_e.sharedState.currentUser))}}catch(e){if(this.logger.errorSync("Error initializing session:",e),_e.sharedState){const n=_e.sharedState.currentUser!==null;_e.sharedState.isInitialized=!0,_e.sharedState.currentUser=null,n&&_e.sharedState.authStateCallbacks.forEach(r=>r(null))}}}async getCurrentUser(){return _e.sharedState?_e.sharedState.isInitialized?_e.sharedState.currentUser:new Promise(e=>{if(_e.sharedState?.currentUser){e(_e.sharedState.currentUser);return}const n=setTimeout(()=>{e(null)},5e3),r=this.onAuthStateChange(l=>{clearTimeout(n),r(),e(l)})}):null}async signUp(e){try{const{data:n,error:r}=await this.supabase.auth.signUp({email:e.email,password:e.password,options:{data:{display_name:e.displayName}}});if(r)throw new Error(r.message);if(!n.user)throw new Error("No user returned from sign up");return this.mapSupabaseUserToAuthUser(n.user)}catch(n){throw this.logger.errorSync("Sign up error:",n),n}}async signIn(e){try{const{data:n,error:r}=await this.supabase.auth.signInWithPassword({email:e.email,password:e.password});if(r)throw new Error(r.message);if(!n.user)throw new Error("No user returned from sign in");return this.mapSupabaseUserToAuthUser(n.user)}catch(n){throw this.logger.errorSync("Sign in error:",n),n}}async signOut(){try{const{error:e}=await this.supabase.auth.signOut({scope:"local"});if(e){if(e.message.includes("session")||e.message.includes("Auth session missing")){this.logger.infoSync("Session already expired during logout, continuing...",e);return}throw new Error(e.message)}}catch(e){if(e instanceof Error&&(e.message.includes("session")||e.message.includes("Auth session missing")||e.message.includes("403")||e.message.includes("Forbidden"))){this.logger.infoSync("Session error during logout (expected):",e.message);return}throw this.logger.errorSync("Sign out error:",e),e}}onAuthStateChange(e){return _e.sharedState?(_e.sharedState.authStateCallbacks.add(e),()=>{_e.sharedState?.authStateCallbacks.delete(e)}):()=>{}}async refreshSession(){try{const{data:e,error:n}=await this.supabase.auth.refreshSession();return n?(this.logger.errorSync("Error refreshing session:",n),null):e.user?this.mapSupabaseUserToAuthUser(e.user):null}catch(e){return this.logger.errorSync("Unexpected error refreshing session:",e),null}}mapSupabaseUserToAuthUser(e){return{id:e.id,email:e.email||"",displayName:e.user_metadata?.display_name||e.user_metadata?.full_name,avatarUrl:e.user_metadata?.avatar_url}}static reset(){_e.sharedState=null,Ot.reset()}async resetPassword(e){try{const n=`${window.location.origin}/manage/#/password-reset`;this.logger.infoSync("Sending password reset email to:",e),this.logger.infoSync("Redirect URL:",n);const{error:r}=await this.supabase.auth.resetPasswordForEmail(e,{redirectTo:n});if(r)throw this.logger.errorSync("Supabase resetPasswordForEmail error:",r),new Error(r.message);this.logger.infoSync("Password reset email sent successfully")}catch(n){throw this.logger.errorSync("Password reset error:",n),n}}async updateProfile(e){try{const{data:n,error:r}=await this.supabase.auth.updateUser({data:{display_name:e.displayName,avatar_url:e.avatarUrl}});if(r)throw new Error(r.message);if(!n.user)throw new Error("No user returned from profile update");return this.mapSupabaseUserToAuthUser(n.user)}catch(n){throw this.logger.errorSync("Profile update error:",n),n}}async updatePassword(e){try{const n=Jf();if(n.type==="recovery"&&n.access_token){this.logger.infoSync("Updating password using recovery token");const{data:c,error:u}=await this.supabase.auth.setSession({access_token:n.access_token,refresh_token:n.refresh_token||""});if(u)throw new Error(`Failed to set recovery session: ${u.message}`);if(!c.session)throw new Error("No session created from recovery token")}const{data:r,error:l}=await this.supabase.auth.updateUser({password:e});if(l)throw new Error(l.message);if(!r.user)throw new Error("No user returned from password update");return this.logger.infoSync("Password updated successfully"),this.mapSupabaseUserToAuthUser(r.user)}catch(n){throw this.logger.errorSync("Password update error:",n),n}}hasRecoverySession(){return Uc()}clearRecoverySession(){ND(),_e.sharedState&&(_e.sharedState.recoverySession=null)}}const uf=(i,e)=>e.some(n=>i instanceof n);let nb,sb;function MD(){return nb||(nb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UD(){return sb||(sb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const df=new WeakMap,Mh=new WeakMap,Jc=new WeakMap;function $D(i){const e=new Promise((n,r)=>{const l=()=>{i.removeEventListener("success",c),i.removeEventListener("error",u)},c=()=>{n($i(i.result)),l()},u=()=>{r(i.error),l()};i.addEventListener("success",c),i.addEventListener("error",u)});return Jc.set(e,i),e}function ID(i){if(df.has(i))return;const e=new Promise((n,r)=>{const l=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",u),i.removeEventListener("abort",u)},c=()=>{n(),l()},u=()=>{r(i.error||new DOMException("AbortError","AbortError")),l()};i.addEventListener("complete",c),i.addEventListener("error",u),i.addEventListener("abort",u)});df.set(i,e)}let hf={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return df.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $i(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function P0(i){hf=i(hf)}function BD(i){return UD().includes(i)?function(...e){return i.apply(ff(this),e),$i(this.request)}:function(...e){return $i(i.apply(ff(this),e))}}function zD(i){return typeof i=="function"?BD(i):(i instanceof IDBTransaction&&ID(i),uf(i,MD())?new Proxy(i,hf):i)}function $i(i){if(i instanceof IDBRequest)return $D(i);if(Mh.has(i))return Mh.get(i);const e=zD(i);return e!==i&&(Mh.set(i,e),Jc.set(e,i)),e}const ff=i=>Jc.get(i);function qD(i,e,{blocked:n,upgrade:r,blocking:l,terminated:c}={}){const u=indexedDB.open(i,e),h=$i(u);return r&&u.addEventListener("upgradeneeded",g=>{r($i(u.result),g.oldVersion,g.newVersion,$i(u.transaction),g)}),n&&u.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),h.then(g=>{c&&g.addEventListener("close",()=>c()),l&&g.addEventListener("versionchange",m=>l(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const HD=["get","getKey","getAll","getAllKeys","count"],YD=["put","add","delete","clear"],Uh=new Map;function ib(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Uh.get(e))return Uh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,l=YD.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(l||HD.includes(n)))return;const c=async function(u,...h){const g=this.transaction(u,l?"readwrite":"readonly");let m=g.store;return r&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),l&&g.done]))[0]};return Uh.set(e,c),c}P0(i=>({...i,get:(e,n,r)=>ib(e,n)||i.get(e,n,r),has:(e,n)=>!!ib(e,n)||i.has(e,n)}));const GD=["continue","continuePrimaryKey","advance"],rb={},gf=new WeakMap,X0=new WeakMap,VD={get(i,e){if(!GD.includes(e))return i[e];let n=rb[e];return n||(n=rb[e]=function(...r){gf.set(this,X0.get(this)[e](...r))}),n}};async function*QD(...i){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...i)),!e)return;e=e;const n=new Proxy(e,VD);for(X0.set(n,e),Jc.set(n,ff(e));e;)yield n,e=await(gf.get(n)||e.continue()),gf.delete(n)}function ab(i,e){return e===Symbol.asyncIterator&&uf(i,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&uf(i,[IDBIndex,IDBObjectStore])}P0(i=>({...i,get(e,n,r){return ab(e,n)?QD:i.get(e,n,r)},has(e,n){return ab(e,n)||i.has(e,n)}}));class PD{db=null;storeName;dbName;version;constructor(e,n="ListAppDB",r=1){this.storeName=e,this.dbName=n,this.version=r}async getDB(){return this.db||(this.db=await qD(this.dbName,this.version,{upgrade(e){e.objectStoreNames.contains("lists")||e.createObjectStore("lists",{keyPath:"uuid"}),e.objectStoreNames.contains("metadata")||e.createObjectStore("metadata",{keyPath:"key"}),e.objectStoreNames.contains("syncQueue")||e.createObjectStore("syncQueue",{keyPath:"uuid"})}})),this.db}async get(e){return await(await this.getDB()).get(this.storeName,e)}async getAll(){return await(await this.getDB()).getAll(this.storeName)}async save(e){await(await this.getDB()).put(this.storeName,e)}async delete(e){await(await this.getDB()).delete(this.storeName,e)}async clear(){await(await this.getDB()).clear(this.storeName)}}class XD{supabase;userId=null;logger;constructor(e,n,r){this.supabase=Ot.getInstance(e,n),this.logger=r}async setUserId(e){this.userId!==e?(this.logger.infoSync(`Setting user ID in remote storage service: ${e}`),this.userId=e):this.logger.debugSync(`User ID already set to: ${e}, skipping redundant setUserId call`)}getUserId(){return this.userId}async listExists(e){if(!this.userId)throw new Error("User not authenticated");const{data:n,error:r}=await this.supabase.from("lists").select("id").eq("yjs_document_id",e).is("deleted_by",null).single();if(r){if(r.code==="PGRST116")return!1;throw new Error(`Failed to check if list exists: ${r.message}`)}return!!n}async createList(e){if(!this.userId)throw new Error("User not authenticated");this.logger.infoSync("Creating list in Supabase:",{yjsDocumentId:e,userId:this.userId});const{data:n,error:r}=await this.supabase.from("lists").insert({yjs_document_id:e,owner_id:this.userId}).select().single();if(r)throw this.logger.errorSync("Failed to create list:",r),new Error(`Failed to create list: ${r.message}`);this.logger.infoSync("List created successfully:",n);const{error:l}=await this.supabase.from("list_participants").insert({list_id:n.id,user_id:this.userId,role:"owner"});return l?this.logger.warnSync("Failed to add owner as participant:",l.message):this.logger.infoSync(`Owner added as participant for list: ${n.id}`),{id:n.id,yjsDocumentId:n.yjs_document_id,ownerId:n.owner_id,isShared:!1,createdAt:new Date(n.created_at),updatedAt:new Date(n.updated_at)}}async getUserLists(){if(!this.userId)throw new Error("User not authenticated");try{const{data:e,error:n}=await this.supabase.from("lists").select("id, yjs_document_id, owner_id, created_at, updated_at").eq("owner_id",this.userId).is("deleted_by",null);if(n)throw new Error(`Failed to get owned lists: ${n.message}`);const{data:r,error:l}=await this.supabase.from("list_participants").select(`
          list_id,
          lists!inner(id, yjs_document_id, owner_id, created_at, updated_at)
        `).eq("user_id",this.userId).neq("lists.owner_id",this.userId).is("lists.deleted_by",null);if(l)throw new Error(`Failed to get participant lists: ${l.message}`);const c=[];if(e)for(const u of e)c.push({id:u.id,yjsDocumentId:u.yjs_document_id,ownerId:u.owner_id,isShared:!1,createdAt:new Date(u.created_at),updatedAt:new Date(u.updated_at)});if(r)for(const u of r){const h=u.lists;c.push({id:h.id,yjsDocumentId:h.yjs_document_id,ownerId:h.owner_id,isShared:!0,createdAt:new Date(h.created_at),updatedAt:new Date(h.updated_at)})}return c}catch(e){throw this.logger.errorSync("Error in getUserLists:",e),e}}async getAllUserLists(e){if(!this.userId)throw new Error("User not authenticated");try{let n=this.supabase.from("lists").select(`
          id,
          yjs_document_id,
          owner_id,
          created_at,
          updated_at,
          deleted_by,
          deleted_at
        `).eq("owner_id",this.userId);e&&(n=n.or(`deleted_by.is.null,deleted_at.gte.${e.toISOString()}`));const{data:r,error:l}=await n;if(l)throw new Error(`Failed to get owned lists: ${l.message}`);const{data:c,error:u}=await this.supabase.from("list_participants").select(`
          list_id,
          lists!inner(id, yjs_document_id, owner_id, created_at, updated_at, deleted_by, deleted_at)
        `).eq("user_id",this.userId).neq("lists.owner_id",this.userId).is("lists.deleted_by",null);if(u)throw new Error(`Failed to get participant lists: ${u.message}`);const h=[],g=[];if(r)for(const m of r)m.deleted_by===null?h.push({id:m.id,yjsDocumentId:m.yjs_document_id,ownerId:m.owner_id,isShared:!1,createdAt:new Date(m.created_at),updatedAt:new Date(m.updated_at)}):(!e||new Date(m.deleted_at)>=e)&&g.push(m.yjs_document_id);if(c)for(const m of c){const p=m.lists;h.push({id:p.id,yjsDocumentId:p.yjs_document_id,ownerId:p.owner_id,isShared:!0,createdAt:new Date(p.created_at),updatedAt:new Date(p.updated_at)})}return{activeLists:h,deletedLists:g}}catch(n){throw this.logger.errorSync("Error in getAllUserLists:",n),n}}async deleteList(e){if(!this.userId)throw new Error("User not authenticated");const{error:n}=await this.supabase.from("lists").update({deleted_by:this.userId,deleted_at:new Date().toISOString()}).eq("yjs_document_id",e).is("deleted_by",null);if(n)throw new Error(`Failed to delete list: ${n.message}`);this.logger.infoSync(`Successfully soft deleted list for yjs_document_id: ${e}`)}async pushUpdate(e,n){if(!this.userId)throw new Error("User not authenticated");const r=Array.from(n.data),{error:l}=await this.supabase.from("crdt_updates").insert({yjs_document_id:e,user_id:this.userId,client_id:n.clientId,update_data:r});if(l)throw new Error(`Failed to push update: ${l.message}`)}async pullUpdates(e,n,r){if(!this.userId)throw new Error("User not authenticated");let l=this.supabase.from("crdt_updates").select("*").eq("yjs_document_id",e).order("created_at",{ascending:!0});n&&(l=l.gt("created_at",n.toISOString())),r&&(l=l.neq("client_id",r));const{data:c,error:u}=await l;if(u)throw new Error(`Failed to pull updates: ${u.message}`);return this.logger.infoSync(`Pulled ${c.length} remote updates since ${n?.toISOString()||"beginning"}${r?` (excluding client ${r})`:""}`),c.map(h=>{let g;try{if(typeof h.update_data=="string"){const m=new Uint8Array(h.update_data.length);for(let p=0;p<h.update_data.length;p++)m[p]=h.update_data.charCodeAt(p);g=m}else Array.isArray(h.update_data)?g=new Uint8Array(h.update_data):h.update_data instanceof Uint8Array?g=h.update_data:(this.logger.warnSync("Unknown update_data type:",typeof h.update_data),g=new Uint8Array(0))}catch(m){this.logger.errorSync("Failed to convert update_data:",m),g=new Uint8Array(0)}return{id:h.id,yjsDocumentId:h.yjs_document_id,userId:h.user_id,clientId:h.client_id,data:g,timestamp:new Date(h.created_at)}})}async pushSnapshot(e,n){if(!this.userId)throw new Error("User not authenticated");const{error:r}=await this.supabase.from("crdt_snapshots").insert({yjs_document_id:e,snapshot_data:n.data,version:n.version});if(r)throw new Error(`Failed to push snapshot: ${r.message}`)}async pullLatestSnapshot(e){const{data:n,error:r}=await this.supabase.from("crdt_snapshots").select("*").eq("yjs_document_id",e).order("version",{ascending:!1}).limit(1).single();if(r&&r.code!=="PGRST116")throw new Error(`Failed to pull snapshot: ${r.message}`);return n?{id:n.id,yjsDocumentId:n.yjs_document_id,data:n.snapshot_data,version:n.version,timestamp:new Date(n.created_at)}:null}async shareList(e,n){throw this.userId?new Error("List sharing not yet implemented"):new Error("User not authenticated")}async acceptInvite(e){if(!this.userId)throw new Error("User not authenticated");this.logger.infoSync("Accepting invite with token:",e);const{data:n,error:r}=await this.supabase.from("list_invites").select("*").eq("token",e).eq("status","pending").single();if(r)throw r.code==="PGRST116"?new Error("Invite not found or already used"):new Error(`Failed to get invite: ${r.message}`);if(new Date(n.expires_at)<new Date)throw new Error("Invite has expired");const{data:l,error:c}=await this.supabase.rpc("accept_invite",{invite_token:e,user_id:this.userId});if(c)throw new Error(`Failed to accept invite: ${c.message}`);if(!l)throw new Error("Failed to accept invite - invite may be invalid or expired");this.logger.infoSync("Successfully accepted invite:",{inviteId:n.id,listId:n.list_id,userId:this.userId})}async getListParticipants(e){throw this.userId?new Error("Participant retrieval not yet implemented"):new Error("User not authenticated")}async removeParticipant(e){if(!this.userId)throw new Error("User not authenticated");this.logger.infoSync("Removing participant from list:",{yjsDocumentId:e,userId:this.userId});const{data:n,error:r}=await this.supabase.from("lists").select("id").eq("yjs_document_id",e).single();if(r)throw this.logger.errorSync("Failed to find list by YJS document ID:",r),new Error(`Failed to find list: ${r.message}`);if(!n)throw new Error(`List not found for YJS document ID: ${e}`);const{error:l}=await this.supabase.from("list_participants").delete().eq("list_id",n.id).eq("user_id",this.userId);if(l)throw this.logger.errorSync("Failed to remove participant:",l),new Error(`Failed to remove participant: ${l.message}`);this.logger.infoSync(`Successfully removed participant from list: ${e} (database ID: ${n.id})`)}async createInvite(e,n){const r=n||this.userId;if(!r)throw new Error("User not authenticated");const{data:{user:l},error:c}=await this.supabase.auth.getUser();this.logger.infoSync("Current auth state:",{currentUserId:r,supabaseUserId:l?.id,authError:c?.message});const u=on(),{data:h,error:g}=await this.supabase.from("lists").select("id, yjs_document_id, owner_id").eq("yjs_document_id",e.listId).is("deleted_by",null).single();if(g)throw new Error(`List not found: ${g.message}`);if(h.owner_id!==r)throw this.logger.errorSync("User is not the owner of the list:",{listOwnerId:h.owner_id,currentUserId:r,listId:e.listId}),new Error("Only the list owner can create invites");this.logger.infoSync("Creating invite with data:",{list_id:h.id,yjs_document_id:h.yjs_document_id,invited_by:r,invitation_for:e.invitationFor,token:u});const{data:m,error:p}=await this.supabase.from("list_invites").insert({list_id:h.id,yjs_document_id:h.yjs_document_id,invited_by:r,invitation_for:e.invitationFor,token:u,status:"pending",expires_at:new Date(Date.now()+10080*60*1e3).toISOString()}).select().single();if(p)throw new Error(`Failed to create invite: ${p.message}`);const y={id:m.id,listId:m.list_id,yjsDocumentId:m.yjs_document_id,invitedBy:m.invited_by,invitationFor:m.invitation_for,token:m.token,status:m.status,acceptedBy:m.accepted_by,createdAt:new Date(m.created_at),expiresAt:new Date(m.expires_at)},w=`${window.location.origin}/manage/#/invite/${u}`;return{invite:y,inviteUrl:w}}async getListInvites(e,n){const r=n||this.userId;if(!r)throw new Error("User not authenticated");const{data:l,error:c}=await this.supabase.from("lists").select("id").eq("yjs_document_id",e).is("deleted_by",null).single();if(c)throw new Error(`List not found: ${c.message}`);const{data:u,error:h}=await this.supabase.from("list_invites").select("*").eq("list_id",l.id).eq("invited_by",r).order("created_at",{ascending:!1});if(h)throw new Error(`Failed to get list invites: ${h.message}`);return u.map(g=>({id:g.id,listId:g.list_id,yjsDocumentId:g.yjs_document_id,invitedBy:g.invited_by,invitationFor:g.invitation_for,token:g.token,status:g.status,acceptedBy:g.accepted_by,createdAt:new Date(g.created_at),expiresAt:new Date(g.expires_at)}))}async getInviteByToken(e){const{data:n,error:r}=await this.supabase.from("list_invites").select("*").eq("token",e).single();if(r)throw r.code==="PGRST116"?new Error("Invite not found"):new Error(`Failed to get invite: ${r.message}`);return{id:n.id,listId:n.list_id,yjsDocumentId:n.yjs_document_id,invitedBy:n.invited_by,invitationFor:n.invitation_for,token:n.token,status:n.status,acceptedBy:n.accepted_by,createdAt:new Date(n.created_at),expiresAt:new Date(n.expires_at)}}async revokeInvite(e,n){const r=n||this.userId;if(!r)throw new Error("User not authenticated");const{error:l}=await this.supabase.from("list_invites").update({status:"expired"}).eq("id",e).eq("invited_by",r);if(l)throw new Error(`Failed to revoke invite: ${l.message}`)}}class KD{supabase;logger;connectionStatus="disconnected";subscriptions=new Map;errorTimeout=null;connectionListeners=[];subscriptionStates=new Map;hasNotifiedConnection=!1;constructor(e,n,r){this.supabase=Ot.getInstance(e,n),this.logger=r}async disconnect(){try{this.logger.infoSync("Disconnecting from Supabase realtime..."),this.errorTimeout&&(clearTimeout(this.errorTimeout),this.errorTimeout=null);for(const[e,n]of this.subscriptions)n.unsubscribe(),this.logger.infoSync(`Unsubscribed from ${e}`);this.subscriptions.clear(),this.subscriptionStates.clear(),this.hasNotifiedConnection=!1,this.connectionStatus="disconnected",this.logger.infoSync("Disconnected from Supabase realtime"),this.notifyConnectionListeners(!1)}catch(e){throw this.logger.errorSync("Error disconnecting from Supabase realtime:",e),e}}isConnected(){const e=this.connectionStatus==="connected";return this.logger.debugSync(`Realtime service isConnected(): ${e} (status: ${this.connectionStatus})`),e}onConnectionChange(e){this.connectionListeners.push(e)}removeConnectionListener(e){const n=this.connectionListeners.indexOf(e);n>-1&&this.connectionListeners.splice(n,1)}getConnectionStatus(){return this.subscriptions.size>0&&this.connectionStatus==="connected"?"connected":this.connectionStatus==="connecting"||this.subscriptions.size>0&&this.connectionStatus==="error"?"connecting":this.connectionStatus}checkAndNotifyConnectionStatus(){Array.from(this.subscriptionStates.values()).every(n=>n==="subscribed")&&!this.hasNotifiedConnection&&(this.connectionStatus="connected",this.hasNotifiedConnection=!0,this.logger.infoSync("All subscriptions ready - notifying connection listeners"),this.notifyConnectionListeners(!0))}notifyConnectionListeners(e){this.connectionListeners.forEach(n=>{try{n(e)}catch(r){this.logger.errorSync("Error in connection listener:",r)}})}async subscribeToCRDTUpdates(e){const n="crdt_updates";this.logger.infoSync(`Starting CRDT subscription to table: ${n}`),this.subscriptionStates.set(n,"subscribing");try{const r=this.supabase.channel(`${n}`).on("postgres_changes",{event:"INSERT",schema:"public",table:`${n}`},c=>{const u=c;this.logger.debugSync(`Received realtime update for ${n}:`,c);const h={type:"list_updated",table:n,record:u.new,eventType:u.eventType};e(h)}).subscribe(c=>{this.logger.infoSync(`Subscription status for ${n}:`,c),c==="SUBSCRIBED"?(this.subscriptionStates.set(n,"subscribed"),this.errorTimeout&&(clearTimeout(this.errorTimeout),this.errorTimeout=null),this.logger.infoSync(`Successfully subscribed to ${n}`),this.checkAndNotifyConnectionStatus()):c==="CHANNEL_ERROR"?(this.subscriptionStates.set(n,"error"),this.logger.warnSync(`Channel error for ${n}, but keeping current status: ${this.connectionStatus}`)):c==="TIMED_OUT"?(this.subscriptionStates.set(n,"error"),this.logger.warnSync(`Subscription timed out for ${n}, status: ${c}`)):c==="CLOSED"?(this.subscriptionStates.set(n,"error"),this.logger.warnSync(`Subscription closed for ${n}, status: ${c}`)):this.logger.infoSync(`Subscription status for ${n}: ${c}`)}),l={unsubscribe:()=>{this.logger.infoSync(`Unsubscribing from table: ${n}`),this.supabase.removeChannel(r),this.subscriptions.delete(n),this.subscriptionStates.delete(n)}};return this.subscriptions.set(n,l),l}catch(r){throw this.logger.errorSync(`Failed to subscribe to table ${n}:`,r),r}}async subscribeToListUpdates(e){const n="lists";this.subscriptionStates.set(n,"subscribing");try{const r=this.supabase.channel(`${n}_changes`).on("postgres_changes",{event:"*",schema:"public",table:n},c=>{this.logger.debugSync(`Received realtime update for ${n}:`,c);const u={type:this.determineUpdateType(n,c.eventType),table:n,record:c.new,oldRecord:c.old,eventType:c.eventType};e(u)}).subscribe(c=>{this.logger.infoSync(`Subscription status for ${n}:`,c),c==="SUBSCRIBED"?(this.subscriptionStates.set(n,"subscribed"),this.errorTimeout&&(clearTimeout(this.errorTimeout),this.errorTimeout=null),this.logger.infoSync(`Successfully subscribed to ${n}`),this.checkAndNotifyConnectionStatus()):c==="CHANNEL_ERROR"?(this.subscriptionStates.set(n,"error"),this.logger.warnSync(`Channel error for ${n}, but keeping current status: ${this.connectionStatus}`)):c==="TIMED_OUT"?(this.subscriptionStates.set(n,"error"),this.logger.warnSync(`Subscription timed out for ${n}, status: ${c}`)):c==="CLOSED"?(this.subscriptionStates.set(n,"error"),this.logger.warnSync(`Subscription closed for ${n}, status: ${c}`)):this.logger.infoSync(`Subscription status for ${n}: ${c}`)}),l={unsubscribe:()=>{this.logger.infoSync(`Unsubscribing from table: ${n}`),this.supabase.removeChannel(r),this.subscriptions.delete(n),this.subscriptionStates.delete(n)}};return this.subscriptions.set(n,l),l}catch(r){throw this.logger.errorSync(`Failed to subscribe to table ${n}:`,r),r}}determineUpdateType(e,n){switch(e){case"lists":switch(n){case"INSERT":return"list_created";case"UPDATE":return"list_updated";case"DELETE":return"list_deleted";default:return"list_updated"}default:return"list_updated"}}}class FD{constructor(e,n,r,l,c,u,h,g){this.yjsListManager=e,this.eventService=n,this.logger=r,this.remoteStorageService=l,this.connectionMonitor=c,this.listRepository=u,this.syncQueueRepository=h,this.metadataRepository=g}cachedClientId=null;isBootstrapping=!1;async getCurrentUserId(){return this.remoteStorageService.getUserId()?this.remoteStorageService.getUserId():(this.logger.warnSync("No user ID available in remote storage service"),null)}async createList(e,n){try{const r=on(),l=await this.getCurrentUserId()??void 0;this.yjsListManager.createList(r,e,n,l);const c=this.yjsListManager.getYjsState(r);if(c){await this.listRepository.saveList({uuid:r,data:c});const u=this.connectionMonitor.getConnectionState();if(this.logger.infoSync("Connection state during list creation:",{browserOnline:u.browserOnline,realtimeConnected:u.realtimeConnected,isOnline:u.isOnline}),this.connectionMonitor.isOnline())try{this.logger.infoSync(`Attempting real-time sync for list creation: ${r}`),await this.remoteStorageService.createList(r),this.logger.infoSync(`Real-time sync successful for list creation ${r}`);const h=await this.getClientId();this.logger.infoSync(`Pushing initial YJS update for list: ${r} with clientId: ${h}`),await this.remoteStorageService.pushUpdate(r,{id:on(),yjsDocumentId:r,clientId:h,data:c,timestamp:new Date}),this.logger.infoSync(`Real-time sync successful for initial YJS update ${r}`)}catch(h){this.logger.errorSync(`Real-time sync failed for list creation ${r}:`,h),this.logger.warnSync(`Falling back to queue for list creation ${r}`),await this.syncQueueRepository.addListCreateItem(r),await this.syncQueueRepository.addYjsUpdateItem(r,c),await this.triggerBackgroundSync()}else this.logger.infoSync(`Offline mode - queuing list creation: ${r}`),await this.syncQueueRepository.addListCreateItem(r),await this.syncQueueRepository.addYjsUpdateItem(r,c),await this.triggerBackgroundSync()}return this.eventService.publish({type:ce.LIST_CREATED,payload:{listId:r,title:e,createdAt:new Date},timestamp:new Date,listId:r}),this.logger.infoSync(`Created new list: ${r} with name: ${e}`),r}catch(r){throw this.logger.errorSync(`Failed to create list "${e}":`,r),r}}async deleteList(e){try{if(this.yjsListManager.deleteList(e),await this.listRepository.deleteList(e),await this.syncQueueRepository.clearSyncQueueItemsForList(e),this.connectionMonitor.isOnline())try{await this.remoteStorageService.deleteList(e),this.logger.infoSync(`Real-time sync successful for list deletion ${e}`)}catch(n){this.logger.warnSync(`Real-time sync failed for list deletion ${e}, falling back to queue:`,n),await this.syncQueueRepository.addListDeleteItem(e),await this.triggerBackgroundSync()}else await this.syncQueueRepository.addListDeleteItem(e),await this.triggerBackgroundSync();this.eventService.publish({type:ce.LIST_DELETED,payload:{listId:e,title:"",deletedAt:new Date},timestamp:new Date,listId:e}),this.logger.infoSync(`Deleted list: ${e}`)}catch(n){throw this.logger.errorSync(`Failed to delete list ${e}:`,n),n}}async addItem(e,n){try{this.yjsListManager.addItem(e,n);const r=this.yjsListManager.getYjsState(e);if(r)if(await this.listRepository.saveList({uuid:e,data:r}),this.connectionMonitor.isOnline())try{const l=await this.getClientId();await this.remoteStorageService.pushUpdate(e,{id:on(),yjsDocumentId:e,clientId:l,data:r,timestamp:new Date}),this.logger.infoSync(`Real-time sync successful for item add to list ${e}`)}catch(l){this.logger.warnSync(`Real-time sync failed for item add to list ${e}, falling back to queue:`,l),await this.syncQueueRepository.addYjsUpdateItem(e,r),await this.triggerBackgroundSync()}else await this.syncQueueRepository.addYjsUpdateItem(e,r),await this.triggerBackgroundSync();this.eventService.publish({type:ce.ITEM_ADDED,payload:{listId:e,itemId:on(),content:n,position:0,addedAt:new Date},timestamp:new Date,listId:e}),this.logger.infoSync(`Added item to list ${e}: ${n}`)}catch(r){throw this.logger.errorSync(`Failed to add item to list ${e}:`,r),r}}async editItem(e,n,r){try{this.yjsListManager.editItem(e,n,r);const l=this.yjsListManager.getYjsState(e);if(l)if(await this.listRepository.saveList({uuid:e,data:l}),this.connectionMonitor.isOnline())try{const c=await this.getClientId();await this.remoteStorageService.pushUpdate(e,{id:on(),yjsDocumentId:e,clientId:c,data:l,timestamp:new Date}),this.logger.infoSync(`Real-time sync successful for item edit in list ${e}`)}catch(c){this.logger.warnSync(`Real-time sync failed for item edit in list ${e}, falling back to queue:`,c),await this.syncQueueRepository.addYjsUpdateItem(e,l),await this.triggerBackgroundSync()}else await this.syncQueueRepository.addYjsUpdateItem(e,l),await this.triggerBackgroundSync();this.eventService.publish({type:ce.ITEM_CONTENT_CHANGED,payload:{listId:e,itemId:n,content:r,changedAt:new Date},timestamp:new Date,listId:e,itemId:n}),this.logger.infoSync(`Edited item ${n} in list ${e}: ${r}`)}catch(l){throw this.logger.errorSync(`Failed to edit item ${n} in list ${e}:`,l),l}}async deleteItem(e,n){try{this.yjsListManager.deleteItem(e,n);const r=this.yjsListManager.getYjsState(e);if(r)if(await this.listRepository.saveList({uuid:e,data:r}),this.connectionMonitor.isOnline())try{const l=await this.getClientId();await this.remoteStorageService.pushUpdate(e,{id:on(),yjsDocumentId:e,clientId:l,data:r,timestamp:new Date}),this.logger.infoSync(`Real-time sync successful for item delete in list ${e}`)}catch(l){this.logger.warnSync(`Real-time sync failed for item delete in list ${e}, falling back to queue:`,l),await this.syncQueueRepository.addYjsUpdateItem(e,r),await this.triggerBackgroundSync()}else await this.syncQueueRepository.addYjsUpdateItem(e,r),await this.triggerBackgroundSync();this.eventService.publish({type:ce.ITEM_DELETED,payload:{listId:e,itemId:n,content:"",deletedAt:new Date},timestamp:new Date,listId:e,itemId:n}),this.logger.infoSync(`Deleted item ${n} from list ${e}`)}catch(r){throw this.logger.errorSync(`Failed to delete item ${n} from list ${e}:`,r),r}}async toggleItem(e,n){try{this.yjsListManager.toggleItem(e,n);const r=this.yjsListManager.getYjsState(e);if(r)if(await this.listRepository.saveList({uuid:e,data:r}),this.connectionMonitor.isOnline())try{const l=await this.getClientId();await this.remoteStorageService.pushUpdate(e,{id:on(),yjsDocumentId:e,clientId:l,data:r,timestamp:new Date}),this.logger.infoSync(`Real-time sync successful for item toggle in list ${e}`)}catch(l){this.logger.warnSync(`Real-time sync failed for item toggle in list ${e}, falling back to queue:`,l),await this.syncQueueRepository.addYjsUpdateItem(e,r),await this.triggerBackgroundSync()}else await this.syncQueueRepository.addYjsUpdateItem(e,r),await this.triggerBackgroundSync();this.eventService.publish({type:ce.ITEM_CONTENT_CHANGED,payload:{listId:e,itemId:n,oldContent:"",newContent:"",changedAt:new Date},timestamp:new Date,listId:e,itemId:n}),this.logger.infoSync(`Toggled item ${n} in list ${e}`)}catch(r){throw this.logger.errorSync(`Failed to toggle item ${n} in list ${e}:`,r),r}}async moveItem(e,n,r){try{this.yjsListManager.moveItem(e,n,r);const l=this.yjsListManager.getYjsState(e);if(l)if(await this.listRepository.saveList({uuid:e,data:l}),this.connectionMonitor.isOnline())try{const c=await this.getClientId();await this.remoteStorageService.pushUpdate(e,{id:on(),yjsDocumentId:e,clientId:c,data:l,timestamp:new Date}),this.logger.infoSync(`Real-time sync successful for item move in list ${e}`)}catch(c){this.logger.warnSync(`Real-time sync failed for item move in list ${e}, falling back to queue:`,c),await this.syncQueueRepository.addYjsUpdateItem(e,l),await this.triggerBackgroundSync()}else await this.syncQueueRepository.addYjsUpdateItem(e,l),await this.triggerBackgroundSync();this.eventService.publish({type:ce.ITEM_MOVED,payload:{listId:e,itemId:n,newIndex:r,movedAt:new Date},timestamp:new Date,listId:e,itemId:n}),this.logger.infoSync(`Moved item ${n} to position ${r} in list ${e}`)}catch(l){throw this.logger.errorSync(`Failed to move item ${n} in list ${e}:`,l),l}}async getAllLists(){try{const e=await this.listRepository.getAllLists(),n=[];for(const r of e){this.yjsListManager.isListLoaded(r.uuid)||this.yjsListManager.applyYjsUpdate(r.uuid,r.data);const l=this.yjsListManager.getList(r.uuid);l&&n.push(l)}try{const r=await this.remoteStorageService.getUserLists();n.forEach(l=>{const c=r.find(u=>u.yjsDocumentId===l.id);c&&(l.ownerId=c.ownerId)})}catch(r){this.logger.warnSync("Failed to get ownership info for lists:",r)}return n}catch(e){throw this.logger.errorSync("Failed to get all lists:",e),e}}async bootstrapFromRemote(){if(this.isBootstrapping){this.logger.debugSync("Bootstrap already in progress, skipping duplicate call");return}this.isBootstrapping=!0;try{this.logger.infoSync("Starting bootstrap from remote server...");const e=this.connectionMonitor.getConnectionState();if(this.logger.infoSync("Connection state during bootstrap:",{browserOnline:e.browserOnline,realtimeConnected:e.realtimeConnected,isOnline:e.isOnline}),!e.browserOnline){this.logger.warnSync("Cannot bootstrap from remote: browser is offline");return}e.realtimeConnected||this.logger.warnSync("Realtime service not connected, but attempting bootstrap anyway...");const n=await this.remoteStorageService.getUserLists();this.logger.infoSync(`Found ${n.length} lists on remote server`);for(const r of n)try{if(await this.listRepository.getList(r.yjsDocumentId)){this.logger.debugSync(`Checking for updates to existing list: ${r.yjsDocumentId}`);try{const c=await this.getClientId(),u=await this.getLastSyncTimestamp(r.yjsDocumentId);this.logger.infoSync(`Pulling updates for existing list ${r.yjsDocumentId}${u?` since ${u.toISOString()}`:" (all updates)"}`);const h=await this.remoteStorageService.pullUpdates(r.yjsDocumentId,u||void 0,c);if(h.length>0){this.logger.infoSync(`Applying ${h.length} updates for existing list ${r.yjsDocumentId}`);for(const p of h)this.yjsListManager.applyYjsUpdate(r.yjsDocumentId,p.data);const g=this.yjsListManager.getYjsState(r.yjsDocumentId);g&&await this.listRepository.saveList({uuid:r.yjsDocumentId,data:g}),this.eventService.publish({type:ce.LIST_METADATA_CHANGED,payload:{listId:r.yjsDocumentId,metadata:{lastRemoteUpdate:new Date,source:"remote",action:"content_changed"},changedAt:new Date},timestamp:new Date,listId:r.yjsDocumentId}),this.logger.infoSync(`Updated list ${r.yjsDocumentId} with ${h.length} remote updates`);const m=h[h.length-1]?.timestamp;m&&await this.setLastSyncTimestamp(r.yjsDocumentId,m)}else this.logger.debugSync(`No updates found for existing list ${r.yjsDocumentId}`)}catch(c){this.logger.warnSync(`Failed to pull updates for existing list ${r.yjsDocumentId}:`,c)}}else{this.logger.infoSync(`Creating new list from remote: ${r.yjsDocumentId}`);try{const u=await this.getClientId(),h=await this.getLastSyncTimestamp(r.yjsDocumentId);this.logger.infoSync(`Pulling updates for new list ${r.yjsDocumentId}${h?` since ${h.toISOString()}`:" (all updates)"}`);const g=await this.remoteStorageService.pullUpdates(r.yjsDocumentId,h||void 0,u);if(g.length>0){this.logger.infoSync(`Applying ${g.length} updates for list ${r.yjsDocumentId}`);for(const p of g)this.yjsListManager.applyYjsUpdate(r.yjsDocumentId,p.data);this.logger.infoSync(`Applied ${g.length} updates for list ${r.yjsDocumentId}`);const m=g[g.length-1]?.timestamp;m&&await this.setLastSyncTimestamp(r.yjsDocumentId,m)}else this.logger.infoSync(`No updates found for list ${r.yjsDocumentId}`),this.yjsListManager.createList(r.yjsDocumentId,r.title||"Untitled List",void 0,r.ownerId)}catch(u){this.logger.warnSync(`Failed to pull updates for list ${r.yjsDocumentId}:`,u)}const c=this.yjsListManager.getYjsState(r.yjsDocumentId);c&&await this.listRepository.saveList({uuid:r.yjsDocumentId,data:c}),this.logger.infoSync(`Emitting list_created events for remote list: ${r.yjsDocumentId}`),this.eventService.publish({type:ce.LIST_CREATED,payload:{listId:r.yjsDocumentId,title:r.title||"Untitled List",createdAt:new Date},timestamp:new Date,listId:r.yjsDocumentId})}}catch(l){this.logger.errorSync(`Failed to process remote list ${r.yjsDocumentId}:`,l)}this.logger.infoSync("Bootstrap from remote server completed"),this.eventService.publish({type:ce.BOOTSTRAP_COMPLETED,payload:{listId:"all",metadata:{action:ce.BOOTSTRAP_COMPLETED,completedAt:new Date}},timestamp:new Date})}catch(e){throw this.logger.errorSync("Failed to bootstrap from remote server:",e),e}finally{this.isBootstrapping=!1}}async getList(e){try{if(!this.yjsListManager.isListLoaded(e)){const r=await this.listRepository.getList(e);if(r)this.yjsListManager.applyYjsUpdate(e,r.data);else return null}const n=this.yjsListManager.getList(e);if(!n)return null;try{const l=(await this.remoteStorageService.getUserLists()).find(c=>c.yjsDocumentId===e);l&&(n.ownerId=l.ownerId)}catch(r){this.logger.warnSync(`Failed to get ownership info for list ${e}:`,r)}return n}catch(n){throw this.logger.errorSync(`Failed to get list ${e}:`,n),n}}async applyRemoteUpdate(e,n,r){try{this.yjsListManager.applyYjsUpdate(e,n);const l=this.yjsListManager.getYjsState(e);l&&await this.listRepository.saveList({uuid:e,data:l}),this.eventService.publish({type:ce.LIST_METADATA_CHANGED,payload:{listId:e,metadata:{lastRemoteUpdate:new Date,source:"remote",action:"content_changed"},changedAt:new Date},timestamp:new Date,listId:e}),r&&await this.setLastSyncTimestamp(e,r),this.logger.infoSync(`Applied remote update to list ${e}`)}catch(l){throw this.logger.errorSync(`Failed to apply remote update to list ${e}:`,l),l}}async handleRemoteListCreation(e){try{if(this.logger.infoSync(`Handling remote list creation: ${e}`),await this.listRepository.getList(e)){this.logger.debugSync(`List ${e} already exists locally, skipping creation`);return}const l=(await this.remoteStorageService.getUserLists()).find(u=>u.yjsDocumentId===e);if(!l){this.logger.warnSync(`Remote list ${e} not found in user lists`);return}this.logger.infoSync(`Creating new list from remote: ${e}`);try{const u=await this.getClientId(),h=await this.getLastSyncTimestamp(e);this.logger.infoSync(`Pulling updates for new remote list ${e}${h?` since ${h.toISOString()}`:" (all updates)"}`);const g=await this.remoteStorageService.pullUpdates(e,h||void 0,u);if(g.length>0){this.logger.infoSync(`Applying ${g.length} updates for list ${e}`);for(const p of g)this.yjsListManager.applyYjsUpdate(e,p.data);this.logger.infoSync(`Applied ${g.length} updates for list ${e}`);const m=g[g.length-1]?.timestamp;m&&await this.setLastSyncTimestamp(e,m)}else this.logger.infoSync(`No updates found for list ${e}`),this.yjsListManager.createList(e,l.title||"Untitled List",void 0,l.ownerId)}catch(u){this.logger.warnSync(`Failed to pull updates for list ${e}:`,u)}const c=this.yjsListManager.getYjsState(e);c&&await this.listRepository.saveList({uuid:e,data:c}),this.logger.infoSync(`Emitting list_created events for remote list: ${e}`),this.eventService.publish({type:ce.LIST_CREATED,payload:{listId:e,title:l.title||"Untitled List",createdAt:new Date},timestamp:new Date,listId:e}),this.logger.infoSync(`Successfully handled remote list creation: ${e}`)}catch(n){this.logger.errorSync(`Failed to handle remote list creation ${e}:`,n)}}async handleRemoteListDeletion(e){try{this.logger.infoSync(`Handling remote deletion of list: ${e}`),this.yjsListManager.deleteList(e),await this.listRepository.deleteList(e),await this.syncQueueRepository.clearSyncQueueItemsForList(e),await this.clearSyncMetadataForDocument(e),this.eventService.publish({type:ce.LIST_DELETED,payload:{listId:e,title:"",deletedAt:new Date},timestamp:new Date,listId:e}),this.logger.infoSync(`Successfully handled remote deletion of list: ${e}`)}catch(n){throw this.logger.errorSync(`Failed to handle remote deletion of list ${e}:`,n),n}}async getSyncQueueItems(){try{return await this.syncQueueRepository.getAllSyncQueueItems()}catch(e){throw this.logger.errorSync("Failed to get sync queue items:",e),e}}async removeSyncQueueItem(e){try{await this.syncQueueRepository.deleteSyncQueueItem(e),this.logger.infoSync(`Removed sync queue item: ${e}`)}catch(n){throw this.logger.errorSync(`Failed to remove sync queue item ${e}:`,n),n}}async editListMetadata(e,n){try{n.title!==void 0&&this.yjsListManager.editListTitle(e,n.title),n.description!==void 0&&this.yjsListManager.editListDescription(e,n.description);const r=this.yjsListManager.getYjsState(e);r&&await this.listRepository.saveList({uuid:e,data:r}),await this.syncQueueRepository.addYjsUpdateItem(e,r),await this.triggerBackgroundSync(),this.eventService.publish({type:ce.LIST_METADATA_CHANGED,payload:{listId:e,metadata:{...n,action:"metadata_changed"},changedAt:new Date},timestamp:new Date,listId:e});const l=[];n.title!==void 0&&l.push(`title: ${n.title}`),n.description!==void 0&&l.push(`description: ${n.description}`),this.logger.infoSync(`Edited metadata of list ${e}: ${l.join(", ")}`)}catch(r){throw this.logger.errorSync(`Failed to edit metadata of list ${e}:`,r),r}}async clearCompletedItems(e){try{this.yjsListManager.clearCompletedItems(e);const n=this.yjsListManager.getYjsState(e);n&&await this.listRepository.saveList({uuid:e,data:n}),await this.syncQueueRepository.addYjsUpdateItem(e,n),await this.triggerBackgroundSync(),this.eventService.publish({type:ce.LIST_METADATA_CHANGED,payload:{listId:e,metadata:{action:"completed_items_cleared"},changedAt:new Date},timestamp:new Date,listId:e}),this.logger.infoSync(`Cleared completed items from list ${e}`)}catch(n){throw this.logger.errorSync(`Failed to clear completed items from list ${e}:`,n),n}}async leaveList(e){try{if(this.yjsListManager.deleteList(e),await this.listRepository.deleteList(e),await this.syncQueueRepository.clearSyncQueueItemsForList(e),await this.clearSyncMetadataForDocument(e),this.connectionMonitor.isOnline())try{await this.remoteStorageService.removeParticipant(e),this.logger.infoSync(`Real-time sync successful for leaving list ${e}`)}catch(n){this.logger.warnSync(`Real-time sync failed for leaving list ${e}, falling back to queue:`,n),await this.syncQueueRepository.addListLeaveItem(e),await this.triggerBackgroundSync()}else await this.syncQueueRepository.addListLeaveItem(e),await this.triggerBackgroundSync();this.eventService.publish({type:ce.LIST_LEFT,payload:{listId:e,title:"",leftAt:new Date},timestamp:new Date,listId:e}),this.logger.infoSync(`Left list: ${e}`)}catch(n){throw this.logger.errorSync(`Failed to leave list ${e}:`,n),n}}async clearAllData(){try{this.yjsListManager.clearAllState(),await this.listRepository.clearAllLists(),await this.syncQueueRepository.clearAllSyncQueueItems(),await this.metadataRepository.clearAllMetadata(),this.logger.infoSync("Cleared all data")}catch(e){throw this.logger.errorSync("Failed to clear all data:",e),e}}async getClientId(){if(this.cachedClientId)return this.cachedClientId;try{const e=await this.metadataRepository.getMetadata("client_id");if(e&&e.value.clientId)return this.cachedClientId=e.value.clientId,e.value.clientId;const n=on();return await this.setClientId(n),n}catch(e){this.logger.errorSync("Error getting client ID:",e);const n=on();return await this.setClientId(n),n}}async setClientId(e){this.cachedClientId=e;try{await this.metadataRepository.saveMetadata({key:"client_id",value:{clientId:e,createdAt:new Date().toISOString()}}),this.logger.debugSync("Set client ID:",{clientId:e})}catch(n){throw this.logger.errorSync("Error setting client ID:",n),n}}async saveSyncState(e){const n=`sync_state_${e.yjsDocumentId}`;await this.metadataRepository.saveMetadata({key:n,value:{lastSyncTime:e.lastSyncTime?.toISOString(),isOnline:e.isOnline,pendingChangesCount:e.pendingChangesCount,lastUpdated:new Date().toISOString()}}),this.logger.debugSync("Saved sync state:",{yjsDocumentId:e.yjsDocumentId,lastSyncTime:e.lastSyncTime,isOnline:e.isOnline,pendingChangesCount:e.pendingChangesCount})}async getSyncState(e){const n=`sync_state_${e}`,r=await this.metadataRepository.getMetadata(n);return r?{yjsDocumentId:e,lastSyncTime:r.value.lastSyncTime?new Date(r.value.lastSyncTime):void 0,isOnline:r.value.isOnline||!1,pendingChangesCount:r.value.pendingChangesCount||0}:null}async getAllSyncStates(){const e=await this.metadataRepository.getAllMetadata(),n=[];for(const r of e)if(r.key.startsWith("sync_state_")){const l=r.key.replace("sync_state_","");n.push({yjsDocumentId:l,lastSyncTime:r.value.lastSyncTime?new Date(r.value.lastSyncTime):void 0,isOnline:r.value.isOnline||!1,pendingChangesCount:r.value.pendingChangesCount||0})}return n}async saveAppliedRemoteUpdate(e,n){const r=`applied_remote_updates_${e}`,l=await this.metadataRepository.getMetadata(r),c=l?l.value.appliedUpdates||[]:[];c.push(n),await this.metadataRepository.saveMetadata({key:r,value:{appliedUpdates:c,lastUpdated:new Date().toISOString()}}),this.logger.debugSync("Saved applied remote update:",{yjsDocumentId:e,updateId:n})}async getAppliedRemoteUpdates(e){const n=`applied_remote_updates_${e}`,r=await this.metadataRepository.getMetadata(n);return r?r.value.appliedUpdates||[]:[]}async clearAppliedRemoteUpdates(e){const n=`applied_remote_updates_${e}`;await this.metadataRepository.deleteMetadata(n),this.logger.debugSync("Cleared applied remote updates:",{yjsDocumentId:e})}async clearSyncMetadataForDocument(e){try{await this.metadataRepository.deleteMetadata(`sync_state_${e}`),await this.metadataRepository.deleteMetadata(`applied_remote_updates_${e}`),await this.metadataRepository.deleteMetadata(`last_sync_${e}`),this.logger.debugSync("Cleared sync metadata for document:",{yjsDocumentId:e})}catch(n){throw this.logger.errorSync("Error clearing sync metadata for document:",n),n}}async getLastSyncTimestamp(e){try{const n=`last_sync_${e}`,r=await this.metadataRepository.getMetadata(n);return!r||!r.value.lastSyncTimestamp?null:new Date(r.value.lastSyncTimestamp)}catch(n){return this.logger.errorSync("Error getting last sync timestamp:",n),null}}async setLastSyncTimestamp(e,n){try{const r=`last_sync_${e}`;await this.metadataRepository.saveMetadata({key:r,value:{lastSyncTimestamp:n.toISOString(),lastUpdated:new Date().toISOString()}}),this.logger.debugSync(`Set last sync timestamp for ${e}:`,{timestamp:n.toISOString()})}catch(r){throw this.logger.errorSync("Error setting last sync timestamp:",r),r}}async triggerBackgroundSync(){try{const{ServiceContainer:e}=await ma(async()=>{const{ServiceContainer:l}=await Promise.resolve().then(()=>iA);return{ServiceContainer:l}},void 0),r=e.getInstance().getBackgroundSyncService();r.isServiceStarted()&&await r.triggerSync()}catch(e){this.logger.errorSync("Error triggering background sync:",e)}}}var On=(i=>(i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=3]="ERROR",i[i.NONE=4]="NONE",i))(On||{});class JD{level;constructor(e=On.INFO){this.level=e}setLevel(e){this.level=e}getLevel(){return this.level}getCallerInfo(){const e=new Error().stack;if(!e)return"";const r=e.split(`
`)[3];if(!r)return"";const l=r.match(/at\s+(.+?)\s+\((.+?):(\d+):(\d+)\)/);if(l){const[,u,h,g,m]=l;return`[${h.split("/").pop()?.split("?")[0]||h}:${g}]`}const c=r.match(/at\s+(.+?):(\d+):(\d+)/);if(c){const[,u,h,g]=c;return`[${u.split("/").pop()?.split("?")[0]||u}:${h}]`}return""}debug(e,...n){if(this.level<=On.DEBUG){const r=this.getCallerInfo();console.log(`🔍 ${e} ${r}`,...n)}}info(e,...n){if(this.level<=On.INFO){const r=this.getCallerInfo();console.log(`ℹ️ ${e} ${r}`,...n)}}warn(e,...n){if(this.level<=On.WARN){const r=this.getCallerInfo();console.warn(`⚠️ ${e} ${r}`,...n)}}error(e,...n){if(this.level<=On.ERROR){const r=this.getCallerInfo();console.error(`❌ ${r} ${e}`,...n)}}debugSync(e,...n){if(this.level<=On.DEBUG){const r=this.getCallerInfo();console.log(`🔄 ${e} ${r}`,...n)}}infoSync(e,...n){if(this.level<=On.INFO){const r=this.getCallerInfo();console.log(`✅ ${e} ${r}`,...n)}}warnSync(e,...n){if(this.level<=On.WARN){const r=this.getCallerInfo();console.warn(`⚠️ ${e} ${r}`,...n)}}errorSync(e,...n){if(this.level<=On.ERROR){const r=this.getCallerInfo();console.error(`❌ ${e} ${r}`,...n)}}}class Jr{constructor(e,n,r,l){this.listController=e,this.remoteStorageService=n,this.logger=r,this.connectionMonitor=l}static instance=null;isRunning=!1;isStarted=!1;syncInterval=null;SYNC_INTERVAL_MS=5e3;MAX_BACKOFF_MS=3e4;currentBackoffMs=this.SYNC_INTERVAL_MS;consecutiveEmptyRuns=0;connectionChangeListener=null;connectionChangeTimeout=null;isProcessingConnectionChange=!1;static getInstance(e,n,r,l){return Jr.instance||(Jr.instance=new Jr(e,n,r,l)),Jr.instance}async start(){if(this.isStarted){this.logger.infoSync("Background sync service is already started");return}this.isStarted=!0,this.logger.infoSync("Background sync service started (lazy mode)"),this.setupConnectionMonitoring(),await this.checkAndStartSync()}async checkAndStartSync(){if(this.isRunning){this.logger.debugSync("Sync service already running, skipping check");return}try{const e=await this.listController.getSyncQueueItems();e.length>0?(this.logger.infoSync(`Found ${e.length} items in sync queue, starting sync service`),this.startSyncLoop()):this.logger.debugSync("No items in sync queue, sync service will remain idle")}catch(e){this.logger.errorSync("Error checking sync queue:",e)}}startSyncLoop(){if(this.isRunning){this.logger.debugSync("Background sync service is already running, skipping start");return}this.isRunning=!0,this.logger.infoSync("Starting background sync loop"),this.currentBackoffMs=this.SYNC_INTERVAL_MS,this.consecutiveEmptyRuns=0,this.syncInterval=setInterval(()=>{this.processSyncQueue().catch(e=>{this.logger.errorSync("Error in background sync:",e)})},this.currentBackoffMs),this.processSyncQueue().catch(e=>{this.logger.errorSync("Error in initial sync:",e)})}stopSyncLoop(){this.isRunning&&(this.isRunning=!1,this.logger.infoSync("Stopping background sync loop (service remains started)"),this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null))}stop(){if(!this.isStarted){this.logger.infoSync("Background sync service is not started");return}this.isStarted=!1,this.logger.infoSync("Stopping background sync service completely"),this.stopSyncLoop(),this.teardownConnectionMonitoring(),this.currentBackoffMs=this.SYNC_INTERVAL_MS,this.consecutiveEmptyRuns=0,this.isProcessingConnectionChange=!1}setupConnectionMonitoring(){this.connectionChangeListener=e=>{this.connectionChangeTimeout&&clearTimeout(this.connectionChangeTimeout),this.connectionChangeTimeout=setTimeout(()=>{this.handleConnectionChange(e)},500)},this.connectionMonitor.onConnectionChange(this.connectionChangeListener)}async handleConnectionChange(e){if(this.isProcessingConnectionChange){this.logger.debugSync("Already processing connection change, skipping");return}this.isProcessingConnectionChange=!0;try{e.isOnline&&this.isStarted&&!this.isRunning?(this.logger.infoSync("Connection restored, checking for sync queue items"),await this.checkAndStartSync()):!e.isOnline&&this.isRunning&&(this.logger.infoSync("Connection lost, pausing sync service"),this.stopSyncLoop())}catch(n){this.logger.errorSync("Error handling connection change:",n)}finally{this.isProcessingConnectionChange=!1}}teardownConnectionMonitoring(){this.connectionChangeTimeout&&(clearTimeout(this.connectionChangeTimeout),this.connectionChangeTimeout=null),this.connectionChangeListener&&(this.connectionMonitor.removeConnectionListener(this.connectionChangeListener),this.connectionChangeListener=null)}async processSyncQueue(){try{if(!this.connectionMonitor.isOnline()){this.logger.debugSync("Offline, skipping sync queue processing");return}this.logger.infoSync("Processing sync queue...");const e=await this.listController.getSyncQueueItems();if(e.length===0){this.logger.debugSync("No sync queue items to process"),this.handleEmptyQueue();return}this.consecutiveEmptyRuns=0,this.currentBackoffMs=this.SYNC_INTERVAL_MS,this.logger.infoSync(`Processing ${e.length} sync queue items`);const n=this.groupOperationsByList(e);for(const[l,c]of n)try{await this.processListOperations(l,c)}catch(u){this.logger.errorSync(`Failed to process operations for list ${l}:`,u)}this.logger.infoSync("Finished processing sync queue"),(await this.listController.getSyncQueueItems()).length===0&&(this.logger.infoSync("Sync queue is now empty, stopping sync loop"),this.stopSyncLoop())}catch(e){throw this.logger.errorSync("Error processing sync queue:",e),e}}handleEmptyQueue(){this.consecutiveEmptyRuns++,this.consecutiveEmptyRuns>3&&(this.currentBackoffMs=Math.min(this.currentBackoffMs*1.5,this.MAX_BACKOFF_MS),this.logger.debugSync(`Empty queue run ${this.consecutiveEmptyRuns}, increasing backoff to ${this.currentBackoffMs}ms`)),this.consecutiveEmptyRuns>10&&(this.logger.infoSync("Too many empty queue runs, stopping sync loop"),this.stopSyncLoop())}groupOperationsByList(e){const n=new Map;for(const r of e)n.has(r.listUUID)||n.set(r.listUUID,[]),n.get(r.listUUID).push(r);return n}async processListOperations(e,n){this.logger.infoSync(`Processing ${n.length} operations for list ${e}`);const r=n.sort((c,u)=>{const h={LIST_CREATE:1,YJS_UPDATE:2,LIST_DELETE:3,LIST_LEAVE:4},g=h[c.operationType],m=h[u.operationType];return g!==m?g-m:c.addedDate.getTime()-u.addedDate.getTime()});this.logger.infoSync(`Sorted operations for list ${e}:`,r.map(c=>`${c.operationType} (${c.uuid})`));const l=this.optimizeOperations(r);this.logger.infoSync(`Optimized ${n.length} operations to ${l.length} for list ${e}`);for(const c of l)try{await this.processSyncQueueItem(c)}catch(u){throw this.logger.errorSync(`Failed to process optimized operation ${c.uuid} for list ${e}:`,u),u}}optimizeOperations(e){const n=[];let r=!1;for(const l of e)if(l.operationType==="LIST_DELETE"){this.logger.infoSync(`Optimizing: Found DELETE operation, removing ${n.length} previous operations`),n.length=0,n.push(l),r=!0;break}else l.operationType==="LIST_CREATE"?n.push(l):l.operationType==="YJS_UPDATE"&&(r?this.logger.infoSync(`Optimizing: Skipping YJS_UPDATE ${l.uuid} because DELETE operation exists`):n.push(l));return n}async processSyncQueueItem(e){try{switch(this.logger.infoSync(`Processing sync queue item: ${e.uuid} (${e.operationType})`),e.operationType){case"YJS_UPDATE":await this.processYjsUpdate(e);break;case"LIST_CREATE":await this.processListCreate(e);break;case"LIST_DELETE":await this.processListDelete(e);break;case"LIST_LEAVE":await this.processListLeave(e);break;default:throw new Error(`Unknown operation type: ${e.operationType}`)}await this.listController.removeSyncQueueItem(e.uuid),this.logger.infoSync(`Successfully processed sync queue item: ${e.uuid} (${e.operationType})`)}catch(n){throw this.logger.errorSync(`Failed to process sync queue item ${e.uuid}:`,n),n}}async processYjsUpdate(e){if(!e.data)throw new Error("YJS update item must have data");this.logger.infoSync(`Pushing YJS update to remote storage: ${e.uuid} for list: ${e.listUUID}`);const n=await this.listController.getClientId();await this.remoteStorageService.pushUpdate(e.listUUID,{id:e.uuid,yjsDocumentId:e.listUUID,clientId:n,data:e.data,timestamp:e.addedDate}),this.logger.infoSync(`Successfully pushed YJS update to remote storage: ${e.uuid}`)}async processListCreate(e){this.logger.infoSync(`Creating list in remote storage: ${e.listUUID}`),await this.remoteStorageService.createList(e.listUUID),this.logger.infoSync(`Successfully created list in remote storage: ${e.listUUID}`)}async processListDelete(e){await this.remoteStorageService.deleteList(e.listUUID)}async processListLeave(e){await this.remoteStorageService.removeParticipant(e.listUUID)}async forceSync(){this.logger.infoSync("Forcing sync..."),await this.processSyncQueue()}async triggerSync(){if(!this.isStarted){this.logger.debugSync("Sync service not started, ignoring trigger");return}if(!this.connectionMonitor.isOnline()){this.logger.debugSync("Offline, ignoring sync trigger");return}this.isRunning?this.logger.debugSync("Sync service already running, will process new items on next cycle"):(this.logger.infoSync("Items added to sync queue, starting sync service"),await this.checkAndStartSync())}isServiceRunning(){return this.isRunning}isServiceStarted(){return this.isStarted}}class ZD{constructor(e,n,r){this.listController=e,this.realtimeService=n,this.logger=r}isSubscribed=!1;async start(){if(this.isSubscribed){this.logger.infoSync("Remote update handler is already subscribed");return}this.logger.infoSync("Starting remote update handler");try{this.realtimeService.subscribeToCRDTUpdates(async e=>{try{const n=await this.listController.getClientId();if(e.record.client_id===n){this.logger.debugSync(`Ignoring update from our own client ID: ${n}`);return}const r=e.record.yjs_document_id,l=new Uint8Array(e.record.update_data),c=new Date(e.record.created_at);this.logger.infoSync(`Received remote update for list: ${r} from client: ${e.record.client_id}`),await this.listController.applyRemoteUpdate(r,l,c)}catch(n){this.logger.errorSync("Failed to apply remote update:",n)}}),this.realtimeService.subscribeToListUpdates(async e=>{console.log(">>>>>>>>>RealtimeUpdate",e);try{if(e.eventType==="INSERT"&&e.record){const n=e.record.yjs_document_id;this.logger.infoSync(`Received remote list creation for: ${n}`),await this.listController.handleRemoteListCreation(n)}else if(e.eventType==="UPDATE"&&e.record){const n=e.record.yjs_document_id;e.record.deleted_by||e.record.deleted_at?(this.logger.infoSync(`Received remote list deletion for: ${n} (deleted_by: ${e.record.deleted_by}, deleted_at: ${e.record.deleted_at})`),await this.listController.handleRemoteListDeletion(n)):this.logger.debugSync(`Received list update (not deletion) for: ${n}`)}}catch(n){this.logger.errorSync("Failed to handle list update:",n)}}),this.isSubscribed=!0,this.logger.infoSync("Remote update handler started successfully")}catch(e){throw this.logger.errorSync("Failed to start remote update handler:",e),e}}stop(){if(!this.isSubscribed){this.logger.infoSync("Remote update handler is not subscribed");return}this.logger.infoSync("Stopping remote update handler"),this.isSubscribed=!1}isHandlerSubscribed(){return this.isSubscribed}}class Zr{static instance;logger;realtimeService;connectionState={browserOnline:navigator.onLine,realtimeConnected:!1,isOnline:!1,lastUpdate:new Date};listeners=[];isStarted=!1;browserOnlineHandler;browserOfflineHandler;realtimeConnectionHandler;constructor(e,n){this.logger=e,this.realtimeService=n,this.browserOnlineHandler=()=>this.handleBrowserOnline(),this.browserOfflineHandler=()=>this.handleBrowserOffline(),this.realtimeConnectionHandler=r=>this.handleRealtimeConnectionChange(r)}static getInstance(e,n){return Zr.instance||(Zr.instance=new Zr(e,n)),Zr.instance}start(){if(this.isStarted){this.logger.infoSync("Connection monitor is already started");return}this.logger.infoSync("Starting connection monitor..."),window.addEventListener("online",this.browserOnlineHandler),window.addEventListener("offline",this.browserOfflineHandler),this.realtimeService.onConnectionChange(this.realtimeConnectionHandler);const e=this.realtimeService.isConnected();this.logger.infoSync("Initial connection state:",{browserOnline:navigator.onLine,realtimeConnected:e}),this.updateConnectionState({browserOnline:navigator.onLine,realtimeConnected:e}),this.isStarted=!0,this.logger.infoSync("Connection monitor started successfully")}stop(){if(!this.isStarted){this.logger.infoSync("Connection monitor is not started");return}this.logger.infoSync("Stopping connection monitor..."),window.removeEventListener("online",this.browserOnlineHandler),window.removeEventListener("offline",this.browserOfflineHandler),this.realtimeService.removeConnectionListener(this.realtimeConnectionHandler),this.isStarted=!1,this.logger.infoSync("Connection monitor stopped")}getConnectionState(){return{...this.connectionState}}isOnline(){return this.connectionState.isOnline}onConnectionChange(e){this.listeners.push(e)}removeConnectionListener(e){const n=this.listeners.indexOf(e);n>-1&&this.listeners.splice(n,1)}handleBrowserOnline(){this.logger.infoSync("Browser went online"),this.updateConnectionState({browserOnline:!0,realtimeConnected:this.connectionState.realtimeConnected})}handleBrowserOffline(){this.logger.infoSync("Browser went offline"),this.updateConnectionState({browserOnline:!1,realtimeConnected:this.connectionState.realtimeConnected})}handleRealtimeConnectionChange(e){this.logger.infoSync(`Realtime service ${e?"connected":"disconnected"}`),this.updateConnectionState({browserOnline:this.connectionState.browserOnline,realtimeConnected:e})}updateConnectionState(e){const n={...this.connectionState};this.connectionState={...this.connectionState,...e,lastUpdate:new Date};const r=this.connectionState.isOnline;this.connectionState.isOnline=this.connectionState.browserOnline&&this.connectionState.realtimeConnected,this.logger.infoSync("Connection state update:",{browserOnline:this.connectionState.browserOnline,realtimeConnected:this.connectionState.realtimeConnected,isOnline:this.connectionState.isOnline,wasOnline:r}),n.isOnline!==this.connectionState.isOnline&&this.logger.infoSync(`Connection state changed: ${n.isOnline?"online":"offline"} -> ${this.connectionState.isOnline?"online":"offline"}`),this.listeners.forEach(l=>{try{l(this.connectionState)}catch(c){this.logger.errorSync("Error in connection change listener:",c)}})}}class WD{storage;constructor(e){this.storage=e}async getList(e){return this.storage.get(e)}async getAllLists(){return this.storage.getAll()}async saveList(e){await this.storage.save(e)}async deleteList(e){await this.storage.delete(e)}async clearAllLists(){await this.storage.clear()}}class eA{storage;constructor(e){this.storage=e}async getMetadata(e){return this.storage.get(e)}async getAllMetadata(){return this.storage.getAll()}async saveMetadata(e){await this.storage.save(e)}async deleteMetadata(e){await this.storage.delete(e)}async clearAllMetadata(){await this.storage.clear()}async getValue(e){return(await this.getMetadata(e))?.value||null}async setValue(e,n){const r={key:e,value:n};await this.saveMetadata(r)}}class tA{storage;constructor(e){this.storage=e}async getSyncQueueItem(e){return this.storage.get(e)}async getAllSyncQueueItems(){return this.storage.getAll()}async saveSyncQueueItem(e){await this.storage.save(e)}async deleteSyncQueueItem(e){await this.storage.delete(e)}async clearAllSyncQueueItems(){await this.storage.clear()}async getSyncQueueItemsForList(e){return(await this.getAllSyncQueueItems()).filter(r=>r.listUUID===e)}async getSyncQueueItemsAfterDate(e){return(await this.getAllSyncQueueItems()).filter(r=>r.addedDate>e)}async addSyncQueueItem(e,n,r="YJS_UPDATE"){const l=new Date,c={uuid:on(),listUUID:e,operationType:r,data:n,addedDate:new Date(l.getTime()-l.getTimezoneOffset()*6e4)};return await this.saveSyncQueueItem(c),c}async addYjsUpdateItem(e,n){return this.addSyncQueueItem(e,n,"YJS_UPDATE")}async addListCreateItem(e){return this.addSyncQueueItem(e,null,"LIST_CREATE")}async addListDeleteItem(e){return this.addSyncQueueItem(e,null,"LIST_DELETE")}async addListLeaveItem(e){return this.addSyncQueueItem(e,null,"LIST_LEAVE")}async clearSyncQueueItemsForList(e){const n=await this.getSyncQueueItemsForList(e);for(const r of n)await this.deleteSyncQueueItem(r.uuid)}}const lb={auth:{type:"supabase",url:"http://127.0.0.1:54321",apiKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0"},localStorage:{type:"indexeddb"},remoteStorage:{type:"supabase"},realtime:{type:"supabase"},logging:{type:"console",level:On.DEBUG,enabled:!0}};function nA(){return{...lb,auth:{...lb.auth,url:"http://127.0.0.1:54321",apiKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0"}}}function sA(i){const e=[];return i.auth.type==="supabase"&&(i.auth.url||e.push("Supabase URL is required when using Supabase backend"),i.auth.apiKey||e.push("Supabase API key is required when using Supabase backend")),e}class Ze{static instance;config;authServiceInstance;eventServiceInstance;remoteStorageServiceInstance;realtimeServiceInstance;listControllerInstance;logServiceInstance;yjsListManagerInstance;backgroundSyncServiceInstance;remoteUpdateHandlerInstance;connectionMonitorInstance;listRepositoryInstance;metadataRepositoryInstance;syncQueueRepositoryInstance;constructor(){this.config=nA();const e=sA(this.config);if(e.length>0)throw this.getLogService().errorSync("Configuration validation errors:",e),new Error(`Configuration validation failed: ${e.join(", ")}`)}static getInstance(){return Ze.instance||(Ze.instance=new Ze),Ze.instance}getConfig(){return this.config}updateConfig(e){this.config={...this.config,...e},this.authServiceInstance=void 0,this.realtimeServiceInstance=void 0}getAuthService(){if(!this.authServiceInstance)switch(this.config.auth.type){case"supabase":if(!this.config.auth.url||!this.config.auth.apiKey)throw new Error("Supabase URL and API key are required for authentication");this.authServiceInstance=new _e(this.config.auth.url,this.config.auth.apiKey,this.getLogService());break;default:throw new Error(`Unsupported auth type: ${this.config.auth.type}`)}return this.authServiceInstance}getEventService(){return this.eventServiceInstance||(this.eventServiceInstance=new j1(this.getLogService())),this.eventServiceInstance}getRemoteStorageService(){if(!this.remoteStorageServiceInstance)switch(this.config.remoteStorage.type){case"supabase":if(!this.config.auth.url||!this.config.auth.apiKey)throw new Error("Supabase URL and API key are required for remote storage");this.remoteStorageServiceInstance=new XD(this.config.auth.url,this.config.auth.apiKey,this.getLogService());break;default:throw new Error(`Unsupported remote storage type: ${this.config.remoteStorage.type}`)}return this.remoteStorageServiceInstance}getRealtimeService(){if(!this.realtimeServiceInstance)switch(this.config.realtime.type){case"supabase":if(!this.config.auth.url||!this.config.auth.apiKey)throw new Error("Supabase URL and API key are required for realtime service");this.realtimeServiceInstance=new KD(this.config.auth.url,this.config.auth.apiKey,this.getLogService());break;default:throw new Error(`Unsupported realtime type: ${this.config.realtime.type}`)}return this.realtimeServiceInstance}getLogService(){if(!this.logServiceInstance)switch(this.config.logging.type){case"console":this.logServiceInstance=new JD(this.config.logging.level);break;default:throw new Error(`Unsupported log type: ${this.config.logging.type}`)}return this.logServiceInstance}getYjsListManager(){if(!this.yjsListManagerInstance){const e=this.getLogService();this.yjsListManagerInstance=new R1(e)}return this.yjsListManagerInstance}getListController(){if(!this.listControllerInstance){const e=this.getYjsListManager(),n=this.getEventService(),r=this.getLogService(),l=this.getRemoteStorageService(),c=this.getConnectionMonitor(),u=this.getListRepository(),h=this.getSyncQueueRepository(),g=this.getMetadataRepository();this.listControllerInstance=new FD(e,n,r,l,c,u,h,g)}return this.listControllerInstance}getBackgroundSyncService(){if(!this.backgroundSyncServiceInstance){const e=this.getListController(),n=this.getRemoteStorageService(),r=this.getLogService(),l=this.getConnectionMonitor();this.backgroundSyncServiceInstance=Jr.getInstance(e,n,r,l)}return this.backgroundSyncServiceInstance}getRemoteUpdateHandler(){if(!this.remoteUpdateHandlerInstance){const e=this.getListController(),n=this.getRealtimeService(),r=this.getLogService();this.remoteUpdateHandlerInstance=new ZD(e,n,r)}return this.remoteUpdateHandlerInstance}getConnectionMonitor(){if(!this.connectionMonitorInstance){const e=this.getLogService(),n=this.getRealtimeService();this.connectionMonitorInstance=Zr.getInstance(e,n)}return this.connectionMonitorInstance}getListRepository(){if(!this.listRepositoryInstance){const e=this.createLocalStorage("lists");this.listRepositoryInstance=new WD(e)}return this.listRepositoryInstance}getMetadataRepository(){if(!this.metadataRepositoryInstance){const e=this.createLocalStorage("metadata");this.metadataRepositoryInstance=new eA(e)}return this.metadataRepositoryInstance}getSyncQueueRepository(){if(!this.syncQueueRepositoryInstance){const e=this.createLocalStorage("syncQueue");this.syncQueueRepositoryInstance=new tA(e)}return this.syncQueueRepositoryInstance}createLocalStorage(e){switch(this.config.localStorage.type){case"indexeddb":return new PD(e);default:throw new Error(`Unsupported localStorage type: ${this.config.localStorage.type}`)}}async clearAllData(){try{const e=this.getLogService();e.infoSync("Starting to clear all local data..."),await this.getListController().clearAllData(),e.infoSync("Cleared all local data"),this.reset()}catch(e){throw this.getLogService().errorSync("Error during sign out:",e),e}}reset(){const e=this.getLogService();e.infoSync("Resetting all service instances..."),this.authServiceInstance=void 0,this.eventServiceInstance=void 0,this.remoteStorageServiceInstance=void 0,this.realtimeServiceInstance=void 0,this.listControllerInstance=void 0,this.logServiceInstance=void 0,this.yjsListManagerInstance=void 0,this.backgroundSyncServiceInstance=void 0,this.remoteUpdateHandlerInstance=void 0,this.connectionMonitorInstance=void 0,this.listRepositoryInstance=void 0,this.metadataRepositoryInstance=void 0,this.syncQueueRepositoryInstance=void 0,e.infoSync("All service instances reset")}async cleanupLeftoverDatabases(){try{const e=this.getLogService();e.infoSync("Attempting to clean up leftover databases...");try{await this.getListController().clearAllData(),e.infoSync("Successfully cleared leftover sync metadata")}catch(n){e.infoSync("Could not clear sync metadata (may not exist or be in use):",n)}e.infoSync("Completed leftover database cleanup attempt")}catch(e){this.getLogService().errorSync("Error during leftover database cleanup:",e)}}}const iA=Object.freeze(Object.defineProperty({__proto__:null,ServiceContainer:Ze},Symbol.toStringTag,{value:"Module"}));function Mn(){const[i,e]=E.useState({user:null,loading:!0,error:null}),n=Ze.getInstance().getAuthService(),r=Ze.getInstance().getLogService(),l=Cn();E.useEffect(()=>{let C=!0;const x=n.onAuthStateChange(U=>{C&&(e(z=>({...z,user:U,loading:!1,error:null})),U&&Ze.getInstance().getRemoteStorageService().setUserId(U.id).catch(H=>{r.errorSync("Failed to set user ID in remote storage:",H)}))});return(async()=>{try{const U=await n.getCurrentUser();C&&e(z=>({...z,user:U,loading:!1}))}catch(U){C&&e(z=>({...z,error:U instanceof Error?U.message:"Authentication error",loading:!1}))}})(),()=>{C=!1,x()}},[n]);const c=E.useCallback(async C=>{e(x=>({...x,loading:!0,error:null}));try{const x=await n.signUp(C);return e(A=>({...A,user:x,loading:!1,error:null})),x}catch(x){const A=x instanceof Error?x.message:"Sign up failed";throw e(U=>({...U,loading:!1,error:A})),x}},[n]),u=E.useCallback(async C=>{e(x=>({...x,loading:!0,error:null}));try{try{await Ze.getInstance().getListController().clearAllData()}catch(A){console.log("Database cleanup on sign in failed (this is normal):",A)}const x=await n.signIn(C);return e(A=>({...A,user:x,loading:!1,error:null})),x}catch(x){const A=x instanceof Error?x.message:"Sign in failed";throw e(U=>({...U,loading:!1,error:A})),x}},[n]),h=E.useCallback(async()=>{e(C=>({...C,loading:!0,error:null}));try{try{await n.signOut()}catch(x){console.log("Auth signOut failed (session may already be expired):",x)}await Ze.getInstance().clearAllData(),e(x=>({...x,user:null,loading:!1,error:null})),l("/signout")}catch(C){const x=C instanceof Error?C.message:"Sign out failed";throw e(A=>({...A,loading:!1,error:x})),C}},[n,l]),g=E.useCallback(async C=>{e(x=>({...x,loading:!0,error:null}));try{const x=await n.updateProfile(C);return e(A=>({...A,user:x,loading:!1,error:null})),x}catch(x){const A=x instanceof Error?x.message:"Profile update failed";throw e(U=>({...U,loading:!1,error:A})),x}},[n]),m=E.useCallback(async C=>{e(x=>({...x,loading:!0,error:null}));try{await n.resetPassword(C),e(x=>({...x,loading:!1,error:null}))}catch(x){const A=x instanceof Error?x.message:"Password reset failed";throw e(U=>({...U,loading:!1,error:A})),x}},[n]),p=E.useCallback(async C=>{e(x=>({...x,loading:!0,error:null}));try{const x=await n.updatePassword(C);return e(A=>({...A,user:x,loading:!1,error:null})),x}catch(x){const A=x instanceof Error?x.message:"Password update failed";throw e(U=>({...U,loading:!1,error:A})),x}},[n]),y=E.useCallback(()=>n.hasRecoverySession(),[n]),w=E.useCallback(()=>{n.clearRecoverySession()},[n]),_=E.useCallback(()=>{e(C=>({...C,error:null}))},[]);return{...i,signUp:c,signIn:u,signOut:h,updateProfile:g,resetPassword:m,updatePassword:p,hasRecoverySession:y,clearRecoverySession:w,clearError:_}}function K0(){const e=Ze.getInstance().getEventService(),n=E.useRef([]);E.useEffect(()=>()=>{n.current.forEach(u=>u()),n.current=[]},[]);const r=E.useCallback((u,h)=>{const g=e.subscribe(u,h);return n.current.push(g),g},[e]),l=E.useCallback(u=>{const h=e.subscribeToListEvents(u);return n.current.push(h),h},[e]),c=E.useCallback(u=>{e.publish(u)},[e]);return{subscribe:r,subscribeToListEvents:l,publish:c}}function rA(i){const{subscribeToListEvents:e}=K0();E.useEffect(()=>e(i),[i,e])}function aA(){const[i,e]=E.useState([]),[n,r]=E.useState(!0),[l,c]=E.useState(null),u=Ze.getInstance(),h=u.getListController(),g=u.getLogService(),m=u.getEventService(),{subscribe:p}=K0(),y=E.useCallback(async()=>{try{r(!0),c(null),g.debugSync("useSortedLists: Loading all lists");const _=await h.getAllLists();e(_),g.debugSync(`useSortedLists: Loaded ${_.length} lists`)}catch(_){const C=_ instanceof Error?_.message:"Unknown error";g.errorSync("useSortedLists: Failed to load lists:",_),c(C)}finally{r(!1)}},[h,g]),w=E.useMemo(()=>[...i].sort((_,C)=>{const x=_.updatedAt?.getTime()||_.createdAt?.getTime()||0;return(C.updatedAt?.getTime()||C.createdAt?.getTime()||0)-x}),[i]);return E.useEffect(()=>{y()},[y]),E.useEffect(()=>{if(!m){g.warnSync("useSortedLists: EventService not ready, skipping subscription setup");return}const _=[],C=(j,P)=>{try{return m.subscribe(j,P)}catch(F){return g.errorSync(`Failed to subscribe to ${j}:`,F),()=>{}}},x=C(ce.LIST_CREATED,async j=>{try{const P=j.payload;g.debugSync(`useSortedLists: Received list_created event for list ${P.listId}`),await y()}catch(P){g.errorSync("Error handling list_created event:",P)}}),A=C(ce.LIST_DELETED,async j=>{try{const P=j.payload;g.debugSync(`useSortedLists: Received list_deleted event for list ${P.listId}`),e(F=>F.filter(W=>W.id!==P.listId))}catch(P){g.errorSync("Error handling list_deleted event:",P)}}),U=C(ce.BOOTSTRAP_COMPLETED,async()=>{try{g.debugSync("useSortedLists: Received bootstrap completion, refreshing lists"),await y()}catch(j){g.errorSync("Error handling bootstrap_completed event:",j)}}),z=p(ce.LIST_CREATED,async j=>{try{const P=j.payload;g.debugSync(`useSortedLists: Received event list_created event for list ${P.listId}`),await y()}catch(P){g.errorSync("Error handling remote list_created event:",P)}}),$=p(ce.LIST_DELETED,async j=>{try{const P=j.payload;g.debugSync(`useSortedLists: Received event list_deleted event for list ${P.listId}`),e(F=>F.filter(W=>W.id!==P.listId))}catch(P){g.errorSync("Error handling remote list_deleted event:",P)}}),H=C(ce.LIST_METADATA_CHANGED,async j=>{try{const P=j.payload;g.debugSync(`useSortedLists: Received list_metadata_changed event for list ${P.listId}`);const F=await h.getList(P.listId);F&&e(W=>[...W.filter(ee=>ee.id!==P.listId),F])}catch(P){g.errorSync("useSortedLists: Failed to reload updated list:",P)}});return _.push(x,A,U,z,$,H),g.debugSync("useSortedLists: Successfully set up all event subscriptions"),()=>{g.debugSync("useSortedLists: Cleaning up event subscriptions"),_.forEach(j=>j())}},[m,g,p,h]),{lists:w,isLoading:n,error:l,refreshLists:y}}const Zc=({isOpen:i,onClose:e,title:n,children:r})=>(E.useEffect(()=>{const l=c=>{c.key==="Escape"&&e()};return i&&(document.addEventListener("keydown",l),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",l),document.body.style.overflow="unset"}},[i,e]),i?b.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[b.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:e}),b.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[b.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:n}),b.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:"✕"})]}),b.jsx("div",{className:"p-6",children:r})]})]}):null),bl=({isOpen:i,onClose:e,onConfirm:n,title:r,message:l,confirmText:c="Delete",cancelText:u="Cancel",isDeleting:h=!1})=>b.jsx(Zc,{isOpen:i,onClose:e,title:r,children:b.jsxs("div",{className:"space-y-4",children:[b.jsx("p",{className:"text-gray-700",children:l}),b.jsxs("div",{className:"flex gap-3 justify-end",children:[b.jsx("button",{onClick:e,disabled:h,className:"btn btn-secondary",children:u}),b.jsx("button",{onClick:n,disabled:h,className:"btn btn-danger",children:h?"Deleting...":c})]})]})}),mf=({completedItems:i,totalItems:e,showLabel:n=!0,showProgressBar:r=!0,className:l=""})=>{const c=e>0?i/e*100:0;return b.jsxs("div",{className:`${l}`,children:[n&&b.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-2",children:[b.jsx("span",{children:"Progress"}),b.jsxs("span",{className:"font-medium",children:[i," / ",e," completed"]})]}),r&&e>0&&b.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:b.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${c}%`}})})]})};function lA(i){const[e,n]=E.useState(null),[r,l]=E.useState(!0),[c,u]=E.useState(null),h=Ze.getInstance(),g=h.getListController(),m=h.getLogService(),p=h.getEventService(),y=E.useCallback(async()=>{if(i)try{l(!0),u(null),m.debugSync(`useListSubscription: Loading list ${i}`);const w=await g.getList(i);n(w),w?m.debugSync(`useListSubscription: Loaded list ${i} with ${w.items.length} items`):m.debugSync(`useListSubscription: List ${i} not found`)}catch(w){const _=w instanceof Error?w.message:"Unknown error";m.errorSync(`useListSubscription: Failed to load list ${i}:`,w),u(_)}finally{l(!1)}},[i,g,m]);return E.useEffect(()=>{y()},[y]),E.useEffect(()=>{if(!i)return;const w=[],_=p.subscribe(ce.LIST_METADATA_CHANGED,async A=>{A.payload.listId===i&&(m.debugSync(`useListSubscription: Received metadata change for list ${i}, refreshing`),y())}),C=p.subscribe(ce.BOOTSTRAP_COMPLETED,async()=>{m.debugSync(`useListSubscription: Received bootstrap completion, refreshing list ${i}`),y()}),x=p.subscribe(ce.LIST_DELETED,async A=>{A.payload.listId===i&&(m.debugSync(`useListSubscription: List ${i} was deleted, clearing state`),n(null),l(!1))});return w.push(_,C,x),()=>{w.forEach(A=>A())}},[i,p,y,m]),{list:e,isLoading:r,error:c,refreshList:y}}const F0=E.memo(({listId:i,onDeleteClick:e,isOwner:n=!1})=>{const{list:r,isLoading:l,error:c}=lA(i),u=Cn(),h=()=>{r&&u(`/list/${r.id}`)},g=m=>{m.stopPropagation(),r&&e({name:r.title,uuid:r.id})};return l?b.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 animate-pulse flex flex-col h-full",children:[b.jsxs("div",{className:"flex items-start justify-between mb-3 flex-1",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("div",{className:"h-5 bg-gray-200 rounded mb-2"}),b.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"})]}),b.jsx("div",{className:"h-6 w-6 bg-gray-200 rounded"})]}),b.jsx("div",{className:"h-2 bg-gray-200 rounded mt-auto"})]}):c?b.jsx("div",{className:"bg-red-50 rounded-lg border border-red-200 p-6 flex flex-col h-full",children:b.jsx("div",{className:"flex items-start justify-between mb-3 flex-1",children:b.jsxs("div",{className:"flex-1",children:[b.jsx("h3",{className:"text-lg font-medium text-red-900 mb-1",children:"Error loading list"}),b.jsx("p",{className:"text-sm text-red-600",children:c})]})})}):r?b.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer flex flex-col h-full",onClick:h,children:[b.jsxs("div",{className:"flex items-start justify-between mb-3 flex-1",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:r.title}),r.description&&b.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:r.description}),b.jsxs("p",{className:"text-sm text-gray-500",children:[r.createdAt&&`Created: ${r.createdAt.toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}`,r.updatedAt&&r.updatedAt.getTime()!==r.createdAt?.getTime()&&b.jsxs("span",{className:"block",children:["Updated:"," ",r.updatedAt.toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})]})]})]}),n&&b.jsx("button",{onClick:g,className:"text-red-500 hover:text-red-700 p-1",title:"Delete list",children:"🗑️"})]}),b.jsx(mf,{completedItems:r.statistics.completedItems,totalItems:r.statistics.totalItems,className:"mt-auto"})]}):null});F0.displayName="ListItem";function J0({isOpen:i,onClose:e,onSuccess:n}){const[r,l]=E.useState(""),[c,u]=E.useState(""),[h,g]=E.useState(!1),m=Cn(),p=Ze.getInstance(),y=p.getLogService(),w=p.getListController(),_=async()=>{if(r.trim())try{g(!0);const x=await w.createList(r.trim(),c.trim()||void 0);l(""),u(""),e(),n&&n(),y.infoSync("List created successfully from header"),m(`/list/${x}`)}catch(x){y.errorSync("Error creating list from header:",x)}finally{g(!1)}},C=()=>{l(""),u(""),e()};return b.jsx(Zc,{isOpen:i,onClose:C,title:"Create New List",children:b.jsxs("div",{className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"listName",className:"block text-sm font-medium text-gray-700 mb-2",children:"List Name"}),b.jsx("input",{id:"listName",type:"text",value:r,onChange:x=>l(x.target.value),onKeyDown:x=>x.key==="Enter"&&_(),placeholder:"Enter list name...",className:"input",autoFocus:!0})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"listDescription",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description (Optional)"}),b.jsx("textarea",{id:"listDescription",value:c,onChange:x=>u(x.target.value),placeholder:"Enter list description...",className:"input min-h-[80px] resize-none",rows:3})]}),b.jsxs("div",{className:"flex gap-2 justify-end",children:[b.jsx("button",{onClick:C,className:"btn btn-secondary",children:"Cancel"}),b.jsx("button",{onClick:_,disabled:!r.trim()||h,className:"btn btn-primary",children:h?"Creating...":"Create List"})]})]})})}const oA=()=>{const[i,e]=E.useState(!1),[n,r]=E.useState(!1),[l,c]=E.useState(null),[u,h]=E.useState(!1),{user:g}=Mn(),{lists:m,isLoading:p,error:y}=aA(),w=Ze.getInstance(),_=w.getLogService(),C=w.getListController(),x=z=>{c(z),r(!0)},A=async()=>{if(l)try{h(!0),await C.deleteList(l.uuid),r(!1),c(null)}catch(z){_.errorSync("Error deleting list:",z)}finally{h(!1)}},U=()=>{r(!1),c(null)};return b.jsxs("div",{className:"max-w-4xl mx-auto",children:[b.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8",children:[b.jsxs("div",{children:[b.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Lists"}),g&&b.jsxs("p",{className:"text-gray-600",children:["Welcome, ",g.displayName||g.email]})]}),b.jsx("div",{className:"flex items-center gap-4",children:b.jsx("button",{onClick:()=>e(!0),className:"btn btn-primary",children:"Create New List"})})]}),b.jsx(J0,{isOpen:i,onClose:()=>e(!1)}),b.jsx(bl,{isOpen:n,onClose:U,onConfirm:A,title:"Delete List",message:`Are you sure you want to delete "${l?.name||"this list"}" and all its items? This action cannot be undone.`,isDeleting:u}),p?b.jsxs("div",{className:"text-center py-12",children:[b.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"⏳"}),b.jsx("h2",{className:"text-xl font-medium text-gray-900 mb-2",children:"Loading lists..."}),b.jsx("p",{className:"text-gray-600",children:"Please wait while we load your lists"})]}):y?b.jsxs("div",{className:"text-center py-12",children:[b.jsx("div",{className:"text-red-400 text-6xl mb-4",children:"⚠️"}),b.jsx("h2",{className:"text-xl font-medium text-gray-900 mb-2",children:"Error loading lists"}),b.jsx("p",{className:"text-gray-600",children:y})]}):m.length===0?b.jsxs("div",{className:"text-center py-12",children:[b.jsx("div",{className:"text-gray-400 text-6xl mb-4",children:"📝"}),b.jsx("h2",{className:"text-xl font-medium text-gray-900 mb-2",children:"No lists yet"}),b.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first list to get started"}),b.jsx("button",{onClick:()=>e(!0),className:"btn btn-primary",children:"Create Your First List"})]}):b.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:m.map(z=>b.jsx(F0,{listId:z.id,onDeleteClick:x,isOwner:g?.id===z.ownerId},z.id))})]})};function cA(i,e){let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>i(...r),e)}}function uA(i){const[e,n]=E.useState(null),[r,l]=E.useState(!0),[c,u]=E.useState(null),[h,g]=E.useState(!1),[m,p]=E.useState(!1),[y,w]=E.useState(!1),[_,C]=E.useState(!1),[x,A]=E.useState(!1),[U,z]=E.useState(!1),$=Ze.getInstance(),H=$.getListController(),j=$.getLogService(),P=$.getEventService(),F=E.useCallback(async()=>{if(i)try{l(!0),u(null),j.infoSync(`useNewList: Loading list ${i}`);const X=await H.getList(i);n(X),X?j.infoSync(`useNewList: Loaded list ${i}: ${X.title}`):u("List not found")}catch(X){j.errorSync(`useNewList: Error loading list ${i}:`,X),u(X instanceof Error?X.message:"Failed to load list")}finally{l(!1)}},[i,H,j]),W=E.useMemo(()=>cA(F,300),[F]),fe=E.useCallback(async X=>{if(!i||!e)return;const T=A1(),B={id:T,content:X,isCompleted:!1,isOptimistic:!0,tempId:T},V=e;try{p(!0),u(null),n(Y=>({...Y,items:[...Y.items,B]})),j.infoSync(`useNewList: Adding item to list ${i}: ${X}`),await H.addItem(i,X),j.infoSync(`useNewList: Added item to list ${i}`)}catch(Y){throw j.errorSync(`useNewList: Error adding item to list ${i}:`,Y),n(V),u(`Failed to add item: ${Y instanceof Error?Y.message:"Unknown error"}`),setTimeout(()=>u(null),3e3),Y}finally{p(!1)}},[i,e,H,j]),ee=E.useCallback(async(X,T)=>{if(!i||!e)return;if(!e.items.find(Y=>Y.id===X))throw new Error(`Item with ID ${X} not found`);const V=e;try{w(!0),u(null),n(Y=>({...Y,items:Y.items.map(J=>J.id===X?{...J,content:T.content}:J)})),j.infoSync(`useNewList: Updating item ${X} in list ${i}: ${T.content}`),await H.editItem(i,X,T.content),j.infoSync(`useNewList: Updated item ${X} in list ${i}`)}catch(Y){throw j.errorSync(`useNewList: Error updating item ${X} in list ${i}:`,Y),n(V),u(`Failed to update item: ${Y instanceof Error?Y.message:"Unknown error"}`),setTimeout(()=>u(null),3e3),Y}finally{w(!1)}},[i,e,H,j]),ae=E.useCallback(async X=>{if(!i||!e)return;if(!e.items.find(V=>V.id===X))throw new Error(`Item with ID ${X} not found`);const B=e;try{C(!0),u(null),n(V=>({...V,items:V.items.filter(Y=>Y.id!==X)})),j.infoSync(`useNewList: Deleting item ${X} from list ${i}`),await H.deleteItem(i,X),j.infoSync(`useNewList: Deleted item ${X} from list ${i}`)}catch(V){throw j.errorSync(`useNewList: Error deleting item ${X} from list ${i}:`,V),n(B),u(`Failed to delete item: ${V instanceof Error?V.message:"Unknown error"}`),setTimeout(()=>u(null),3e3),V}finally{C(!1)}},[i,e,H,j]),me=E.useCallback(async X=>{if(!i||!e)return;if(!e.items.find(V=>V.id===X))throw new Error(`Item with ID ${X} not found`);const B=e;try{A(!0),u(null),n(V=>({...V,items:V.items.map(Y=>Y.id===X?{...Y,isCompleted:!Y.isCompleted}:Y)})),j.infoSync(`useNewList: Toggling item ${X} in list ${i}`),await H.toggleItem(i,X),j.infoSync(`useNewList: Toggled item ${X} in list ${i}`)}catch(V){throw j.errorSync(`useNewList: Error toggling item ${X} in list ${i}:`,V),n(B),u(`Failed to toggle item: ${V instanceof Error?V.message:"Unknown error"}`),setTimeout(()=>u(null),3e3),V}finally{A(!1)}},[i,e,H,j]),Le=E.useCallback(async(X,T)=>{if(!i||!e)return;if(!e.items.find(Y=>Y.id===X))throw new Error(`Item with ID ${X} not found`);const V=e;try{z(!0),u(null),n(Y=>{const J=[...Y.items],ue=J.findIndex(te=>te.id===X);if(ue!==-1){const[te]=J.splice(ue,1);J.splice(T,0,te)}return{...Y,items:J}}),j.infoSync(`useNewList: Moving item ${X} to position ${T} in list ${i}`),await H.moveItem(i,X,T),j.infoSync(`useNewList: Moved item ${X} to position ${T} in list ${i}`)}catch(Y){throw j.errorSync(`useNewList: Error moving item ${X} in list ${i}:`,Y),n(V),u(`Failed to move item: ${Y instanceof Error?Y.message:"Unknown error"}`),setTimeout(()=>u(null),3e3),Y}finally{z(!1)}},[i,e,H,j]),Xe=E.useCallback(async X=>{if(!i||!e)return;const T=e;try{u(null),n(B=>({...B,...X})),j.infoSync(`useNewList: Editing metadata of list ${i}: ${JSON.stringify(X)}`),await H.editListMetadata(i,X),j.infoSync(`useNewList: Edited metadata of list ${i}: ${JSON.stringify(X)}`)}catch(B){throw j.errorSync(`useNewList: Error editing metadata of list ${i}:`,B),n(T),u(`Failed to edit metadata: ${B instanceof Error?B.message:"Unknown error"}`),setTimeout(()=>u(null),3e3),B}},[i,e,H,j]),Ie=E.useCallback(async()=>{if(i)try{u(null),j.infoSync(`useNewList: Deleting list ${i}`),await H.deleteList(i),j.infoSync(`useNewList: Deleted list ${i}`)}catch(X){throw j.errorSync(`useNewList: Error deleting list ${i}:`,X),u(`Failed to delete list: ${X instanceof Error?X.message:"Unknown error"}`),setTimeout(()=>u(null),3e3),X}},[i,H,j]),I=E.useCallback(async()=>{if(!i||!e)return;const X=e;try{u(null),n(T=>({...T,items:T.items.filter(B=>!B.isCompleted)})),j.infoSync(`useNewList: Clearing completed items from list ${i}`),await H.clearCompletedItems(i),j.infoSync(`useNewList: Cleared completed items from list ${i}`)}catch(T){throw j.errorSync(`useNewList: Error clearing completed items from list ${i}:`,T),n(X),u(`Failed to clear completed items: ${T instanceof Error?T.message:"Unknown error"}`),setTimeout(()=>u(null),3e3),T}},[i,e,H,j]),K=E.useCallback(async()=>{if(i)try{u(null),j.infoSync(`useNewList: Leaving list ${i}`),await H.leaveList(i),j.infoSync(`useNewList: Left list ${i}`)}catch(X){throw j.errorSync(`useNewList: Error leaving list ${i}:`,X),u(`Failed to leave list: ${X instanceof Error?X.message:"Unknown error"}`),setTimeout(()=>u(null),3e3),X}},[i,H,j]);E.useEffect(()=>{F()},[F]);const se=E.useCallback(async X=>{try{switch(X.type){case ce.LIST_DELETED:j.infoSync(`useNewList: List ${i} was deleted remotely`),g(!0),n(null);break;case ce.LIST_LEFT:j.infoSync(`useNewList: List ${i} was left by user`),g(!0),n(null);break;case ce.ITEM_ADDED:case ce.ITEM_DELETED:case ce.ITEM_CONTENT_CHANGED:case ce.ITEM_COMPLETED:case ce.ITEM_UNCOMPLETED:case ce.ITEM_MOVED:{m||_||y||x||U?j.debugSync(`useNewList: Ignoring ${X.type} event as we're performing an optimistic operation`):(j.infoSync(`useNewList: List ${i} was changed (${X.type}), refreshing (debounced)`),W());break}case ce.LIST_METADATA_CHANGED:j.infoSync(`useNewList: List ${i} metadata changed (${X.type}), refreshing (debounced)`),W();break;default:break}}catch(T){j.errorSync(`useNewList: Error handling event ${X.type}:`,T)}},[i,j,m,_,y,x,U,W]);return rA(se),E.useEffect(()=>{const X=P.subscribe(ce.BOOTSTRAP_COMPLETED,async()=>{try{j.infoSync(`useNewList: Received bootstrap_completed event for list ${i}, refreshing`),W()}catch(T){j.errorSync("useNewList: Error handling bootstrap_completed event:",T)}});return()=>{X()}},[P,W,i,j]),E.useEffect(()=>{e&&g(!1)},[e]),{document:e,isLoading:r,error:c,wasDeletedRemotely:h,isAddingItem:m,isUpdatingItem:y,isDeletingItem:_,isTogglingItem:x,isMovingItem:U,addItem:fe,updateItem:ee,deleteItem:ae,toggleItem:me,moveItem:Le,editListMetadata:Xe,deleteList:Ie,leaveList:K,clearCompletedItems:I,refreshList:F}}function dA(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return E.useMemo(()=>r=>{e.forEach(l=>l(r))},e)}const Wc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ya(i){const e=Object.prototype.toString.call(i);return e==="[object Window]"||e==="[object global]"}function Zf(i){return"nodeType"in i}function Xt(i){var e,n;return i?ya(i)?i:Zf(i)&&(e=(n=i.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function Wf(i){const{Document:e}=Xt(i);return i instanceof e}function Kl(i){return ya(i)?!1:i instanceof Xt(i).HTMLElement}function Z0(i){return i instanceof Xt(i).SVGElement}function va(i){return i?ya(i)?i.document:Zf(i)?Wf(i)?i:Kl(i)||Z0(i)?i.ownerDocument:document:document:document}const Jn=Wc?E.useLayoutEffect:E.useEffect;function eg(i){const e=E.useRef(i);return Jn(()=>{e.current=i}),E.useCallback(function(){for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e.current==null?void 0:e.current(...r)},[])}function hA(){const i=E.useRef(null),e=E.useCallback((r,l)=>{i.current=setInterval(r,l)},[]),n=E.useCallback(()=>{i.current!==null&&(clearInterval(i.current),i.current=null)},[]);return[e,n]}function Il(i,e){e===void 0&&(e=[i]);const n=E.useRef(i);return Jn(()=>{n.current!==i&&(n.current=i)},e),n}function Fl(i,e){const n=E.useRef();return E.useMemo(()=>{const r=i(n.current);return n.current=r,r},[...e])}function $c(i){const e=eg(i),n=E.useRef(null),r=E.useCallback(l=>{l!==n.current&&e?.(l,n.current),n.current=l},[]);return[n,r]}function pf(i){const e=E.useRef();return E.useEffect(()=>{e.current=i},[i]),e.current}let $h={};function Jl(i,e){return E.useMemo(()=>{if(e)return e;const n=$h[i]==null?0:$h[i]+1;return $h[i]=n,i+"-"+n},[i,e])}function W0(i){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),l=1;l<n;l++)r[l-1]=arguments[l];return r.reduce((c,u)=>{const h=Object.entries(u);for(const[g,m]of h){const p=c[g];p!=null&&(c[g]=p+i*m)}return c},{...e})}}const sa=W0(1),Bl=W0(-1);function fA(i){return"clientX"in i&&"clientY"in i}function tg(i){if(!i)return!1;const{KeyboardEvent:e}=Xt(i.target);return e&&i instanceof e}function gA(i){if(!i)return!1;const{TouchEvent:e}=Xt(i.target);return e&&i instanceof e}function yf(i){if(gA(i)){if(i.touches&&i.touches.length){const{clientX:e,clientY:n}=i.touches[0];return{x:e,y:n}}else if(i.changedTouches&&i.changedTouches.length){const{clientX:e,clientY:n}=i.changedTouches[0];return{x:e,y:n}}}return fA(i)?{x:i.clientX,y:i.clientY}:null}const zl=Object.freeze({Translate:{toString(i){if(!i)return;const{x:e,y:n}=i;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(i){if(!i)return;const{scaleX:e,scaleY:n}=i;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(i){if(i)return[zl.Translate.toString(i),zl.Scale.toString(i)].join(" ")}},Transition:{toString(i){let{property:e,duration:n,easing:r}=i;return e+" "+n+"ms "+r}}}),ob="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function mA(i){return i.matches(ob)?i:i.querySelector(ob)}const pA={display:"none"};function yA(i){let{id:e,value:n}=i;return $t.createElement("div",{id:e,style:pA},n)}function vA(i){let{id:e,announcement:n,ariaLiveType:r="assertive"}=i;const l={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return $t.createElement("div",{id:e,style:l,role:"status","aria-live":r,"aria-atomic":!0},n)}function bA(){const[i,e]=E.useState("");return{announce:E.useCallback(r=>{r!=null&&e(r)},[]),announcement:i}}const ew=E.createContext(null);function wA(i){const e=E.useContext(ew);E.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(i)},[i,e])}function SA(){const[i]=E.useState(()=>new Set),e=E.useCallback(r=>(i.add(r),()=>i.delete(r)),[i]);return[E.useCallback(r=>{let{type:l,event:c}=r;i.forEach(u=>{var h;return(h=u[l])==null?void 0:h.call(u,c)})},[i]),e]}const _A={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},EA={onDragStart(i){let{active:e}=i;return"Picked up draggable item "+e.id+"."},onDragOver(i){let{active:e,over:n}=i;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(i){let{active:e,over:n}=i;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(i){let{active:e}=i;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function xA(i){let{announcements:e=EA,container:n,hiddenTextDescribedById:r,screenReaderInstructions:l=_A}=i;const{announce:c,announcement:u}=bA(),h=Jl("DndLiveRegion"),[g,m]=E.useState(!1);if(E.useEffect(()=>{m(!0)},[]),wA(E.useMemo(()=>({onDragStart(y){let{active:w}=y;c(e.onDragStart({active:w}))},onDragMove(y){let{active:w,over:_}=y;e.onDragMove&&c(e.onDragMove({active:w,over:_}))},onDragOver(y){let{active:w,over:_}=y;c(e.onDragOver({active:w,over:_}))},onDragEnd(y){let{active:w,over:_}=y;c(e.onDragEnd({active:w,over:_}))},onDragCancel(y){let{active:w,over:_}=y;c(e.onDragCancel({active:w,over:_}))}}),[c,e])),!g)return null;const p=$t.createElement($t.Fragment,null,$t.createElement(yA,{id:r,value:l.draggable}),$t.createElement(vA,{id:h,announcement:u}));return n?yl.createPortal(p,n):p}var ht;(function(i){i.DragStart="dragStart",i.DragMove="dragMove",i.DragEnd="dragEnd",i.DragCancel="dragCancel",i.DragOver="dragOver",i.RegisterDroppable="registerDroppable",i.SetDroppableDisabled="setDroppableDisabled",i.UnregisterDroppable="unregisterDroppable"})(ht||(ht={}));function Ic(){}function cb(i,e){return E.useMemo(()=>({sensor:i,options:e??{}}),[i,e])}function CA(){for(var i=arguments.length,e=new Array(i),n=0;n<i;n++)e[n]=arguments[n];return E.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Nn=Object.freeze({x:0,y:0});function tw(i,e){return Math.sqrt(Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))}function nw(i,e){let{data:{value:n}}=i,{data:{value:r}}=e;return n-r}function TA(i,e){let{data:{value:n}}=i,{data:{value:r}}=e;return r-n}function ub(i){let{left:e,top:n,height:r,width:l}=i;return[{x:e,y:n},{x:e+l,y:n},{x:e,y:n+r},{x:e+l,y:n+r}]}function sw(i,e){if(!i||i.length===0)return null;const[n]=i;return n[e]}function db(i,e,n){return e===void 0&&(e=i.left),n===void 0&&(n=i.top),{x:e+i.width*.5,y:n+i.height*.5}}const DA=i=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=i;const l=db(e,e.left,e.top),c=[];for(const u of r){const{id:h}=u,g=n.get(h);if(g){const m=tw(db(g),l);c.push({id:h,data:{droppableContainer:u,value:m}})}}return c.sort(nw)},AA=i=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=i;const l=ub(e),c=[];for(const u of r){const{id:h}=u,g=n.get(h);if(g){const m=ub(g),p=l.reduce((w,_,C)=>w+tw(m[C],_),0),y=Number((p/4).toFixed(4));c.push({id:h,data:{droppableContainer:u,value:y}})}}return c.sort(nw)};function RA(i,e){const n=Math.max(e.top,i.top),r=Math.max(e.left,i.left),l=Math.min(e.left+e.width,i.left+i.width),c=Math.min(e.top+e.height,i.top+i.height),u=l-r,h=c-n;if(r<l&&n<c){const g=e.width*e.height,m=i.width*i.height,p=u*h,y=p/(g+m-p);return Number(y.toFixed(4))}return 0}const jA=i=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=i;const l=[];for(const c of r){const{id:u}=c,h=n.get(u);if(h){const g=RA(h,e);g>0&&l.push({id:u,data:{droppableContainer:c,value:g}})}}return l.sort(TA)};function OA(i,e,n){return{...i,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function iw(i,e){return i&&e?{x:i.left-e.left,y:i.top-e.top}:Nn}function LA(i){return function(n){for(var r=arguments.length,l=new Array(r>1?r-1:0),c=1;c<r;c++)l[c-1]=arguments[c];return l.reduce((u,h)=>({...u,top:u.top+i*h.y,bottom:u.bottom+i*h.y,left:u.left+i*h.x,right:u.right+i*h.x}),{...n})}}const kA=LA(1);function NA(i){if(i.startsWith("matrix3d(")){const e=i.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(i.startsWith("matrix(")){const e=i.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function MA(i,e,n){const r=NA(e);if(!r)return i;const{scaleX:l,scaleY:c,x:u,y:h}=r,g=i.left-u-(1-l)*parseFloat(n),m=i.top-h-(1-c)*parseFloat(n.slice(n.indexOf(" ")+1)),p=l?i.width/l:i.width,y=c?i.height/c:i.height;return{width:p,height:y,top:m,right:g+p,bottom:m+y,left:g}}const UA={ignoreTransform:!1};function ba(i,e){e===void 0&&(e=UA);let n=i.getBoundingClientRect();if(e.ignoreTransform){const{transform:m,transformOrigin:p}=Xt(i).getComputedStyle(i);m&&(n=MA(n,m,p))}const{top:r,left:l,width:c,height:u,bottom:h,right:g}=n;return{top:r,left:l,width:c,height:u,bottom:h,right:g}}function hb(i){return ba(i,{ignoreTransform:!0})}function $A(i){const e=i.innerWidth,n=i.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function IA(i,e){return e===void 0&&(e=Xt(i).getComputedStyle(i)),e.position==="fixed"}function BA(i,e){e===void 0&&(e=Xt(i).getComputedStyle(i));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(l=>{const c=e[l];return typeof c=="string"?n.test(c):!1})}function eu(i,e){const n=[];function r(l){if(e!=null&&n.length>=e||!l)return n;if(Wf(l)&&l.scrollingElement!=null&&!n.includes(l.scrollingElement))return n.push(l.scrollingElement),n;if(!Kl(l)||Z0(l)||n.includes(l))return n;const c=Xt(i).getComputedStyle(l);return l!==i&&BA(l,c)&&n.push(l),IA(l,c)?n:r(l.parentNode)}return i?r(i):n}function rw(i){const[e]=eu(i,1);return e??null}function Ih(i){return!Wc||!i?null:ya(i)?i:Zf(i)?Wf(i)||i===va(i).scrollingElement?window:Kl(i)?i:null:null}function aw(i){return ya(i)?i.scrollX:i.scrollLeft}function lw(i){return ya(i)?i.scrollY:i.scrollTop}function vf(i){return{x:aw(i),y:lw(i)}}var xt;(function(i){i[i.Forward=1]="Forward",i[i.Backward=-1]="Backward"})(xt||(xt={}));function ow(i){return!Wc||!i?!1:i===document.scrollingElement}function cw(i){const e={x:0,y:0},n=ow(i)?{height:window.innerHeight,width:window.innerWidth}:{height:i.clientHeight,width:i.clientWidth},r={x:i.scrollWidth-n.width,y:i.scrollHeight-n.height},l=i.scrollTop<=e.y,c=i.scrollLeft<=e.x,u=i.scrollTop>=r.y,h=i.scrollLeft>=r.x;return{isTop:l,isLeft:c,isBottom:u,isRight:h,maxScroll:r,minScroll:e}}const zA={x:.2,y:.2};function qA(i,e,n,r,l){let{top:c,left:u,right:h,bottom:g}=n;r===void 0&&(r=10),l===void 0&&(l=zA);const{isTop:m,isBottom:p,isLeft:y,isRight:w}=cw(i),_={x:0,y:0},C={x:0,y:0},x={height:e.height*l.y,width:e.width*l.x};return!m&&c<=e.top+x.height?(_.y=xt.Backward,C.y=r*Math.abs((e.top+x.height-c)/x.height)):!p&&g>=e.bottom-x.height&&(_.y=xt.Forward,C.y=r*Math.abs((e.bottom-x.height-g)/x.height)),!w&&h>=e.right-x.width?(_.x=xt.Forward,C.x=r*Math.abs((e.right-x.width-h)/x.width)):!y&&u<=e.left+x.width&&(_.x=xt.Backward,C.x=r*Math.abs((e.left+x.width-u)/x.width)),{direction:_,speed:C}}function HA(i){if(i===document.scrollingElement){const{innerWidth:c,innerHeight:u}=window;return{top:0,left:0,right:c,bottom:u,width:c,height:u}}const{top:e,left:n,right:r,bottom:l}=i.getBoundingClientRect();return{top:e,left:n,right:r,bottom:l,width:i.clientWidth,height:i.clientHeight}}function uw(i){return i.reduce((e,n)=>sa(e,vf(n)),Nn)}function YA(i){return i.reduce((e,n)=>e+aw(n),0)}function GA(i){return i.reduce((e,n)=>e+lw(n),0)}function VA(i,e){if(e===void 0&&(e=ba),!i)return;const{top:n,left:r,bottom:l,right:c}=e(i);rw(i)&&(l<=0||c<=0||n>=window.innerHeight||r>=window.innerWidth)&&i.scrollIntoView({block:"center",inline:"center"})}const QA=[["x",["left","right"],YA],["y",["top","bottom"],GA]];class ng{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=eu(n),l=uw(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[c,u,h]of QA)for(const g of u)Object.defineProperty(this,g,{get:()=>{const m=h(r),p=l[c]-m;return this.rect[g]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class xl{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var l;(l=this.target)==null||l.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function PA(i){const{EventTarget:e}=Xt(i);return i instanceof e?i:va(i)}function Bh(i,e){const n=Math.abs(i.x),r=Math.abs(i.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var _n;(function(i){i.Click="click",i.DragStart="dragstart",i.Keydown="keydown",i.ContextMenu="contextmenu",i.Resize="resize",i.SelectionChange="selectionchange",i.VisibilityChange="visibilitychange"})(_n||(_n={}));function fb(i){i.preventDefault()}function XA(i){i.stopPropagation()}var Ee;(function(i){i.Space="Space",i.Down="ArrowDown",i.Right="ArrowRight",i.Left="ArrowLeft",i.Up="ArrowUp",i.Esc="Escape",i.Enter="Enter",i.Tab="Tab"})(Ee||(Ee={}));const dw={start:[Ee.Space,Ee.Enter],cancel:[Ee.Esc],end:[Ee.Space,Ee.Enter,Ee.Tab]},KA=(i,e)=>{let{currentCoordinates:n}=e;switch(i.code){case Ee.Right:return{...n,x:n.x+25};case Ee.Left:return{...n,x:n.x-25};case Ee.Down:return{...n,y:n.y+25};case Ee.Up:return{...n,y:n.y-25}}};class sg{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new xl(va(n)),this.windowListeners=new xl(Xt(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(_n.Resize,this.handleCancel),this.windowListeners.add(_n.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(_n.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&VA(r),n(Nn)}handleKeyDown(e){if(tg(e)){const{active:n,context:r,options:l}=this.props,{keyboardCodes:c=dw,coordinateGetter:u=KA,scrollBehavior:h="smooth"}=l,{code:g}=e;if(c.end.includes(g)){this.handleEnd(e);return}if(c.cancel.includes(g)){this.handleCancel(e);return}const{collisionRect:m}=r.current,p=m?{x:m.left,y:m.top}:Nn;this.referenceCoordinates||(this.referenceCoordinates=p);const y=u(e,{active:n,context:r.current,currentCoordinates:p});if(y){const w=Bl(y,p),_={x:0,y:0},{scrollableAncestors:C}=r.current;for(const x of C){const A=e.code,{isTop:U,isRight:z,isLeft:$,isBottom:H,maxScroll:j,minScroll:P}=cw(x),F=HA(x),W={x:Math.min(A===Ee.Right?F.right-F.width/2:F.right,Math.max(A===Ee.Right?F.left:F.left+F.width/2,y.x)),y:Math.min(A===Ee.Down?F.bottom-F.height/2:F.bottom,Math.max(A===Ee.Down?F.top:F.top+F.height/2,y.y))},fe=A===Ee.Right&&!z||A===Ee.Left&&!$,ee=A===Ee.Down&&!H||A===Ee.Up&&!U;if(fe&&W.x!==y.x){const ae=x.scrollLeft+w.x,me=A===Ee.Right&&ae<=j.x||A===Ee.Left&&ae>=P.x;if(me&&!w.y){x.scrollTo({left:ae,behavior:h});return}me?_.x=x.scrollLeft-ae:_.x=A===Ee.Right?x.scrollLeft-j.x:x.scrollLeft-P.x,_.x&&x.scrollBy({left:-_.x,behavior:h});break}else if(ee&&W.y!==y.y){const ae=x.scrollTop+w.y,me=A===Ee.Down&&ae<=j.y||A===Ee.Up&&ae>=P.y;if(me&&!w.x){x.scrollTo({top:ae,behavior:h});return}me?_.y=x.scrollTop-ae:_.y=A===Ee.Down?x.scrollTop-j.y:x.scrollTop-P.y,_.y&&x.scrollBy({top:-_.y,behavior:h});break}}this.handleMove(e,sa(Bl(y,this.referenceCoordinates),_))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}sg.activators=[{eventName:"onKeyDown",handler:(i,e,n)=>{let{keyboardCodes:r=dw,onActivation:l}=e,{active:c}=n;const{code:u}=i.nativeEvent;if(r.start.includes(u)){const h=c.activatorNode.current;return h&&i.target!==h?!1:(i.preventDefault(),l?.({event:i.nativeEvent}),!0)}return!1}}];function gb(i){return!!(i&&"distance"in i)}function mb(i){return!!(i&&"delay"in i)}class ig{constructor(e,n,r){var l;r===void 0&&(r=PA(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:c}=e,{target:u}=c;this.props=e,this.events=n,this.document=va(u),this.documentListeners=new xl(this.document),this.listeners=new xl(r),this.windowListeners=new xl(Xt(u)),this.initialCoordinates=(l=yf(c))!=null?l:Nn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(_n.Resize,this.handleCancel),this.windowListeners.add(_n.DragStart,fb),this.windowListeners.add(_n.VisibilityChange,this.handleCancel),this.windowListeners.add(_n.ContextMenu,fb),this.documentListeners.add(_n.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(mb(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(gb(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:l}=this.props;l(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(_n.Click,XA,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(_n.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:l,props:c}=this,{onMove:u,options:{activationConstraint:h}}=c;if(!l)return;const g=(n=yf(e))!=null?n:Nn,m=Bl(l,g);if(!r&&h){if(gb(h)){if(h.tolerance!=null&&Bh(m,h.tolerance))return this.handleCancel();if(Bh(m,h.distance))return this.handleStart()}if(mb(h)&&Bh(m,h.tolerance))return this.handleCancel();this.handlePending(h,m);return}e.cancelable&&e.preventDefault(),u(g)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===Ee.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const FA={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class rg extends ig{constructor(e){const{event:n}=e,r=va(n.target);super(e,FA,r)}}rg.activators=[{eventName:"onPointerDown",handler:(i,e)=>{let{nativeEvent:n}=i,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const JA={move:{name:"mousemove"},end:{name:"mouseup"}};var bf;(function(i){i[i.RightClick=2]="RightClick"})(bf||(bf={}));class ZA extends ig{constructor(e){super(e,JA,va(e.event.target))}}ZA.activators=[{eventName:"onMouseDown",handler:(i,e)=>{let{nativeEvent:n}=i,{onActivation:r}=e;return n.button===bf.RightClick?!1:(r?.({event:n}),!0)}}];const zh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class WA extends ig{constructor(e){super(e,zh)}static setup(){return window.addEventListener(zh.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(zh.move.name,e)};function e(){}}}WA.activators=[{eventName:"onTouchStart",handler:(i,e)=>{let{nativeEvent:n}=i,{onActivation:r}=e;const{touches:l}=n;return l.length>1?!1:(r?.({event:n}),!0)}}];var Cl;(function(i){i[i.Pointer=0]="Pointer",i[i.DraggableRect=1]="DraggableRect"})(Cl||(Cl={}));var Bc;(function(i){i[i.TreeOrder=0]="TreeOrder",i[i.ReversedTreeOrder=1]="ReversedTreeOrder"})(Bc||(Bc={}));function eR(i){let{acceleration:e,activator:n=Cl.Pointer,canScroll:r,draggingRect:l,enabled:c,interval:u=5,order:h=Bc.TreeOrder,pointerCoordinates:g,scrollableAncestors:m,scrollableAncestorRects:p,delta:y,threshold:w}=i;const _=nR({delta:y,disabled:!c}),[C,x]=hA(),A=E.useRef({x:0,y:0}),U=E.useRef({x:0,y:0}),z=E.useMemo(()=>{switch(n){case Cl.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Cl.DraggableRect:return l}},[n,l,g]),$=E.useRef(null),H=E.useCallback(()=>{const P=$.current;if(!P)return;const F=A.current.x*U.current.x,W=A.current.y*U.current.y;P.scrollBy(F,W)},[]),j=E.useMemo(()=>h===Bc.TreeOrder?[...m].reverse():m,[h,m]);E.useEffect(()=>{if(!c||!m.length||!z){x();return}for(const P of j){if(r?.(P)===!1)continue;const F=m.indexOf(P),W=p[F];if(!W)continue;const{direction:fe,speed:ee}=qA(P,W,z,e,w);for(const ae of["x","y"])_[ae][fe[ae]]||(ee[ae]=0,fe[ae]=0);if(ee.x>0||ee.y>0){x(),$.current=P,C(H,u),A.current=ee,U.current=fe;return}}A.current={x:0,y:0},U.current={x:0,y:0},x()},[e,H,r,x,c,u,JSON.stringify(z),JSON.stringify(_),C,m,j,p,JSON.stringify(w)])}const tR={x:{[xt.Backward]:!1,[xt.Forward]:!1},y:{[xt.Backward]:!1,[xt.Forward]:!1}};function nR(i){let{delta:e,disabled:n}=i;const r=pf(e);return Fl(l=>{if(n||!r||!l)return tR;const c={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[xt.Backward]:l.x[xt.Backward]||c.x===-1,[xt.Forward]:l.x[xt.Forward]||c.x===1},y:{[xt.Backward]:l.y[xt.Backward]||c.y===-1,[xt.Forward]:l.y[xt.Forward]||c.y===1}}},[n,e,r])}function sR(i,e){const n=e!=null?i.get(e):void 0,r=n?n.node.current:null;return Fl(l=>{var c;return e==null?null:(c=r??l)!=null?c:null},[r,e])}function iR(i,e){return E.useMemo(()=>i.reduce((n,r)=>{const{sensor:l}=r,c=l.activators.map(u=>({eventName:u.eventName,handler:e(u.handler,r)}));return[...n,...c]},[]),[i,e])}var ql;(function(i){i[i.Always=0]="Always",i[i.BeforeDragging=1]="BeforeDragging",i[i.WhileDragging=2]="WhileDragging"})(ql||(ql={}));var wf;(function(i){i.Optimized="optimized"})(wf||(wf={}));const pb=new Map;function rR(i,e){let{dragging:n,dependencies:r,config:l}=e;const[c,u]=E.useState(null),{frequency:h,measure:g,strategy:m}=l,p=E.useRef(i),y=A(),w=Il(y),_=E.useCallback(function(U){U===void 0&&(U=[]),!w.current&&u(z=>z===null?U:z.concat(U.filter($=>!z.includes($))))},[w]),C=E.useRef(null),x=Fl(U=>{if(y&&!n)return pb;if(!U||U===pb||p.current!==i||c!=null){const z=new Map;for(let $ of i){if(!$)continue;if(c&&c.length>0&&!c.includes($.id)&&$.rect.current){z.set($.id,$.rect.current);continue}const H=$.node.current,j=H?new ng(g(H),H):null;$.rect.current=j,j&&z.set($.id,j)}return z}return U},[i,c,n,y,g]);return E.useEffect(()=>{p.current=i},[i]),E.useEffect(()=>{y||_()},[n,y]),E.useEffect(()=>{c&&c.length>0&&u(null)},[JSON.stringify(c)]),E.useEffect(()=>{y||typeof h!="number"||C.current!==null||(C.current=setTimeout(()=>{_(),C.current=null},h))},[h,y,_,...r]),{droppableRects:x,measureDroppableContainers:_,measuringScheduled:c!=null};function A(){switch(m){case ql.Always:return!1;case ql.BeforeDragging:return n;default:return!n}}}function hw(i,e){return Fl(n=>i?n||(typeof e=="function"?e(i):i):null,[e,i])}function aR(i,e){return hw(i,e)}function lR(i){let{callback:e,disabled:n}=i;const r=eg(e),l=E.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(r)},[r,n]);return E.useEffect(()=>()=>l?.disconnect(),[l]),l}function tu(i){let{callback:e,disabled:n}=i;const r=eg(e),l=E.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(r)},[n]);return E.useEffect(()=>()=>l?.disconnect(),[l]),l}function oR(i){return new ng(ba(i),i)}function yb(i,e,n){e===void 0&&(e=oR);const[r,l]=E.useState(null);function c(){l(g=>{if(!i)return null;if(i.isConnected===!1){var m;return(m=g??n)!=null?m:null}const p=e(i);return JSON.stringify(g)===JSON.stringify(p)?g:p})}const u=lR({callback(g){if(i)for(const m of g){const{type:p,target:y}=m;if(p==="childList"&&y instanceof HTMLElement&&y.contains(i)){c();break}}}}),h=tu({callback:c});return Jn(()=>{c(),i?(h?.observe(i),u?.observe(document.body,{childList:!0,subtree:!0})):(h?.disconnect(),u?.disconnect())},[i]),r}function cR(i){const e=hw(i);return iw(i,e)}const vb=[];function uR(i){const e=E.useRef(i),n=Fl(r=>i?r&&r!==vb&&i&&e.current&&i.parentNode===e.current.parentNode?r:eu(i):vb,[i]);return E.useEffect(()=>{e.current=i},[i]),n}function dR(i){const[e,n]=E.useState(null),r=E.useRef(i),l=E.useCallback(c=>{const u=Ih(c.target);u&&n(h=>h?(h.set(u,vf(u)),new Map(h)):null)},[]);return E.useEffect(()=>{const c=r.current;if(i!==c){u(c);const h=i.map(g=>{const m=Ih(g);return m?(m.addEventListener("scroll",l,{passive:!0}),[m,vf(m)]):null}).filter(g=>g!=null);n(h.length?new Map(h):null),r.current=i}return()=>{u(i),u(c)};function u(h){h.forEach(g=>{const m=Ih(g);m?.removeEventListener("scroll",l)})}},[l,i]),E.useMemo(()=>i.length?e?Array.from(e.values()).reduce((c,u)=>sa(c,u),Nn):uw(i):Nn,[i,e])}function bb(i,e){e===void 0&&(e=[]);const n=E.useRef(null);return E.useEffect(()=>{n.current=null},e),E.useEffect(()=>{const r=i!==Nn;r&&!n.current&&(n.current=i),!r&&n.current&&(n.current=null)},[i]),n.current?Bl(i,n.current):Nn}function hR(i){E.useEffect(()=>{if(!Wc)return;const e=i.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n?.()}},i.map(e=>{let{sensor:n}=e;return n}))}function fR(i,e){return E.useMemo(()=>i.reduce((n,r)=>{let{eventName:l,handler:c}=r;return n[l]=u=>{c(u,e)},n},{}),[i,e])}function fw(i){return E.useMemo(()=>i?$A(i):null,[i])}const wb=[];function gR(i,e){e===void 0&&(e=ba);const[n]=i,r=fw(n?Xt(n):null),[l,c]=E.useState(wb);function u(){c(()=>i.length?i.map(g=>ow(g)?r:new ng(e(g),g)):wb)}const h=tu({callback:u});return Jn(()=>{h?.disconnect(),u(),i.forEach(g=>h?.observe(g))},[i]),l}function mR(i){if(!i)return null;if(i.children.length>1)return i;const e=i.children[0];return Kl(e)?e:i}function pR(i){let{measure:e}=i;const[n,r]=E.useState(null),l=E.useCallback(m=>{for(const{target:p}of m)if(Kl(p)){r(y=>{const w=e(p);return y?{...y,width:w.width,height:w.height}:w});break}},[e]),c=tu({callback:l}),u=E.useCallback(m=>{const p=mR(m);c?.disconnect(),p&&c?.observe(p),r(p?e(p):null)},[e,c]),[h,g]=$c(u);return E.useMemo(()=>({nodeRef:h,rect:n,setRef:g}),[n,h,g])}const yR=[{sensor:rg,options:{}},{sensor:sg,options:{}}],vR={current:{}},Ec={draggable:{measure:hb},droppable:{measure:hb,strategy:ql.WhileDragging,frequency:wf.Optimized},dragOverlay:{measure:ba}};class Tl extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const bR={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Tl,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ic},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ec,measureDroppableContainers:Ic,windowRect:null,measuringScheduled:!1},wR={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ic,draggableNodes:new Map,over:null,measureDroppableContainers:Ic},nu=E.createContext(wR),gw=E.createContext(bR);function SR(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Tl}}}function _R(i,e){switch(e.type){case ht.DragStart:return{...i,draggable:{...i.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case ht.DragMove:return i.draggable.active==null?i:{...i,draggable:{...i.draggable,translate:{x:e.coordinates.x-i.draggable.initialCoordinates.x,y:e.coordinates.y-i.draggable.initialCoordinates.y}}};case ht.DragEnd:case ht.DragCancel:return{...i,draggable:{...i.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ht.RegisterDroppable:{const{element:n}=e,{id:r}=n,l=new Tl(i.droppable.containers);return l.set(r,n),{...i,droppable:{...i.droppable,containers:l}}}case ht.SetDroppableDisabled:{const{id:n,key:r,disabled:l}=e,c=i.droppable.containers.get(n);if(!c||r!==c.key)return i;const u=new Tl(i.droppable.containers);return u.set(n,{...c,disabled:l}),{...i,droppable:{...i.droppable,containers:u}}}case ht.UnregisterDroppable:{const{id:n,key:r}=e,l=i.droppable.containers.get(n);if(!l||r!==l.key)return i;const c=new Tl(i.droppable.containers);return c.delete(n),{...i,droppable:{...i.droppable,containers:c}}}default:return i}}function ER(i){let{disabled:e}=i;const{active:n,activatorEvent:r,draggableNodes:l}=E.useContext(nu),c=pf(r),u=pf(n?.id);return E.useEffect(()=>{if(!e&&!r&&c&&u!=null){if(!tg(c)||document.activeElement===c.target)return;const h=l.get(u);if(!h)return;const{activatorNode:g,node:m}=h;if(!g.current&&!m.current)return;requestAnimationFrame(()=>{for(const p of[g.current,m.current]){if(!p)continue;const y=mA(p);if(y){y.focus();break}}})}},[r,e,l,u,c]),null}function xR(i,e){let{transform:n,...r}=e;return i!=null&&i.length?i.reduce((l,c)=>c({transform:l,...r}),n):n}function CR(i){return E.useMemo(()=>({draggable:{...Ec.draggable,...i?.draggable},droppable:{...Ec.droppable,...i?.droppable},dragOverlay:{...Ec.dragOverlay,...i?.dragOverlay}}),[i?.draggable,i?.droppable,i?.dragOverlay])}function TR(i){let{activeNode:e,measure:n,initialRect:r,config:l=!0}=i;const c=E.useRef(!1),{x:u,y:h}=typeof l=="boolean"?{x:l,y:l}:l;Jn(()=>{if(!u&&!h||!e){c.current=!1;return}if(c.current||!r)return;const m=e?.node.current;if(!m||m.isConnected===!1)return;const p=n(m),y=iw(p,r);if(u||(y.x=0),h||(y.y=0),c.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const w=rw(m);w&&w.scrollBy({top:y.y,left:y.x})}},[e,u,h,r,n])}const mw=E.createContext({...Nn,scaleX:1,scaleY:1});var ti;(function(i){i[i.Uninitialized=0]="Uninitialized",i[i.Initializing=1]="Initializing",i[i.Initialized=2]="Initialized"})(ti||(ti={}));const DR=E.memo(function(e){var n,r,l,c;let{id:u,accessibility:h,autoScroll:g=!0,children:m,sensors:p=yR,collisionDetection:y=jA,measuring:w,modifiers:_,...C}=e;const x=E.useReducer(_R,void 0,SR),[A,U]=x,[z,$]=SA(),[H,j]=E.useState(ti.Uninitialized),P=H===ti.Initialized,{draggable:{active:F,nodes:W,translate:fe},droppable:{containers:ee}}=A,ae=F!=null?W.get(F):null,me=E.useRef({initial:null,translated:null}),Le=E.useMemo(()=>{var Ve;return F!=null?{id:F,data:(Ve=ae?.data)!=null?Ve:vR,rect:me}:null},[F,ae]),Xe=E.useRef(null),[Ie,I]=E.useState(null),[K,se]=E.useState(null),X=Il(C,Object.values(C)),T=Jl("DndDescribedBy",u),B=E.useMemo(()=>ee.getEnabled(),[ee]),V=CR(w),{droppableRects:Y,measureDroppableContainers:J,measuringScheduled:ue}=rR(B,{dragging:P,dependencies:[fe.x,fe.y],config:V.droppable}),te=sR(W,F),nt=E.useMemo(()=>K?yf(K):null,[K]),Se=fi(),st=aR(te,V.draggable.measure);TR({activeNode:F!=null?W.get(F):null,config:Se.layoutShiftCompensation,initialRect:st,measure:V.draggable.measure});const Ce=yb(te,V.draggable.measure,st),un=yb(te?te.parentElement:null),kt=E.useRef({activatorEvent:null,active:null,activeNode:te,collisionRect:null,collisions:null,droppableRects:Y,draggableNodes:W,draggingNode:null,draggingNodeRect:null,droppableContainers:ee,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),dn=ee.getNodeFor((n=kt.current.over)==null?void 0:n.id),Bt=pR({measure:V.dragOverlay.measure}),Un=(r=Bt.nodeRef.current)!=null?r:te,$n=P?(l=Bt.rect)!=null?l:Ce:null,zt=!!(Bt.nodeRef.current&&Bt.rect),Pi=cR(zt?null:Ce),Ts=fw(Un?Xt(Un):null),Kt=uR(P?dn??te:null),Tn=gR(Kt),Zn=xR(_,{transform:{x:fe.x-Pi.x,y:fe.y-Pi.y,scaleX:1,scaleY:1},activatorEvent:K,active:Le,activeNodeRect:Ce,containerNodeRect:un,draggingNodeRect:$n,over:kt.current.over,overlayNodeRect:Bt.rect,scrollableAncestors:Kt,scrollableAncestorRects:Tn,windowRect:Ts}),Ds=nt?sa(nt,fe):null,Xi=dR(Kt),wa=bb(Xi),Yt=bb(Xi,[Ce]),Be=sa(Zn,wa),lt=$n?kA($n,Zn):null,Ke=Le&&lt?y({active:Le,collisionRect:lt,droppableRects:Y,droppableContainers:B,pointerCoordinates:Ds}):null,Ki=sw(Ke,"id"),[hn,Fi]=E.useState(null),As=zt?Zn:sa(Zn,Yt),Rs=OA(As,(c=hn?.rect)!=null?c:null,Ce),Ft=E.useRef(null),Wn=E.useCallback((Ve,Tt)=>{let{sensor:mt,options:Jt}=Tt;if(Xe.current==null)return;const pt=W.get(Xe.current);if(!pt)return;const Z=Ve.nativeEvent,it=new mt({active:Xe.current,activeNode:pt,event:Z,options:Jt,context:kt,onAbort(je){if(!W.get(je))return;const{onDragAbort:Ge}=X.current,Nt={id:je};Ge?.(Nt),z({type:"onDragAbort",event:Nt})},onPending(je,Ae,Ge,Nt){if(!W.get(je))return;const{onDragPending:gi}=X.current,In={id:je,constraint:Ae,initialCoordinates:Ge,offset:Nt};gi?.(In),z({type:"onDragPending",event:In})},onStart(je){const Ae=Xe.current;if(Ae==null)return;const Ge=W.get(Ae);if(!Ge)return;const{onDragStart:Nt}=X.current,ts={activatorEvent:Z,active:{id:Ae,data:Ge.data,rect:me}};yl.unstable_batchedUpdates(()=>{Nt?.(ts),j(ti.Initializing),U({type:ht.DragStart,initialCoordinates:je,active:Ae}),z({type:"onDragStart",event:ts}),I(Ft.current),se(Z)})},onMove(je){U({type:ht.DragMove,coordinates:je})},onEnd:yt(ht.DragEnd),onCancel:yt(ht.DragCancel)});Ft.current=it;function yt(je){return async function(){const{active:Ge,collisions:Nt,over:ts,scrollAdjustedTranslate:gi}=kt.current;let In=null;if(Ge&&gi){const{cancelDrop:js}=X.current;In={activatorEvent:Z,active:Ge,collisions:Nt,delta:gi,over:ts},je===ht.DragEnd&&typeof js=="function"&&await Promise.resolve(js(In))&&(je=ht.DragCancel)}Xe.current=null,yl.unstable_batchedUpdates(()=>{U({type:je}),j(ti.Uninitialized),Fi(null),I(null),se(null),Ft.current=null;const js=je===ht.DragEnd?"onDragEnd":"onDragCancel";if(In){const ns=X.current[js];ns?.(In),z({type:js,event:In})}})}}},[W]),es=E.useCallback((Ve,Tt)=>(mt,Jt)=>{const pt=mt.nativeEvent,Z=W.get(Jt);if(Xe.current!==null||!Z||pt.dndKit||pt.defaultPrevented)return;const it={active:Z};Ve(mt,Tt.options,it)===!0&&(pt.dndKit={capturedBy:Tt.sensor},Xe.current=Jt,Wn(mt,Tt))},[W,Wn]),Ji=iR(p,es);hR(p),Jn(()=>{Ce&&H===ti.Initializing&&j(ti.Initialized)},[Ce,H]),E.useEffect(()=>{const{onDragMove:Ve}=X.current,{active:Tt,activatorEvent:mt,collisions:Jt,over:pt}=kt.current;if(!Tt||!mt)return;const Z={active:Tt,activatorEvent:mt,collisions:Jt,delta:{x:Be.x,y:Be.y},over:pt};yl.unstable_batchedUpdates(()=>{Ve?.(Z),z({type:"onDragMove",event:Z})})},[Be.x,Be.y]),E.useEffect(()=>{const{active:Ve,activatorEvent:Tt,collisions:mt,droppableContainers:Jt,scrollAdjustedTranslate:pt}=kt.current;if(!Ve||Xe.current==null||!Tt||!pt)return;const{onDragOver:Z}=X.current,it=Jt.get(Ki),yt=it&&it.rect.current?{id:it.id,rect:it.rect.current,data:it.data,disabled:it.disabled}:null,je={active:Ve,activatorEvent:Tt,collisions:mt,delta:{x:pt.x,y:pt.y},over:yt};yl.unstable_batchedUpdates(()=>{Fi(yt),Z?.(je),z({type:"onDragOver",event:je})})},[Ki]),Jn(()=>{kt.current={activatorEvent:K,active:Le,activeNode:te,collisionRect:lt,collisions:Ke,droppableRects:Y,draggableNodes:W,draggingNode:Un,draggingNodeRect:$n,droppableContainers:ee,over:hn,scrollableAncestors:Kt,scrollAdjustedTranslate:Be},me.current={initial:$n,translated:lt}},[Le,te,Ke,lt,W,Un,$n,Y,ee,hn,Kt,Be]),eR({...Se,delta:fe,draggingRect:lt,pointerCoordinates:Ds,scrollableAncestors:Kt,scrollableAncestorRects:Tn});const Zi=E.useMemo(()=>({active:Le,activeNode:te,activeNodeRect:Ce,activatorEvent:K,collisions:Ke,containerNodeRect:un,dragOverlay:Bt,draggableNodes:W,droppableContainers:ee,droppableRects:Y,over:hn,measureDroppableContainers:J,scrollableAncestors:Kt,scrollableAncestorRects:Tn,measuringConfiguration:V,measuringScheduled:ue,windowRect:Ts}),[Le,te,Ce,K,Ke,un,Bt,W,ee,Y,hn,J,Kt,Tn,V,ue,Ts]),Wi=E.useMemo(()=>({activatorEvent:K,activators:Ji,active:Le,activeNodeRect:Ce,ariaDescribedById:{draggable:T},dispatch:U,draggableNodes:W,over:hn,measureDroppableContainers:J}),[K,Ji,Le,Ce,U,T,W,hn,J]);return $t.createElement(ew.Provider,{value:$},$t.createElement(nu.Provider,{value:Wi},$t.createElement(gw.Provider,{value:Zi},$t.createElement(mw.Provider,{value:Rs},m)),$t.createElement(ER,{disabled:h?.restoreFocus===!1})),$t.createElement(xA,{...h,hiddenTextDescribedById:T}));function fi(){const Ve=Ie?.autoScrollEnabled===!1,Tt=typeof g=="object"?g.enabled===!1:g===!1,mt=P&&!Ve&&!Tt;return typeof g=="object"?{...g,enabled:mt}:{enabled:mt}}}),AR=E.createContext(null),Sb="button",RR="Draggable";function jR(i){let{id:e,data:n,disabled:r=!1,attributes:l}=i;const c=Jl(RR),{activators:u,activatorEvent:h,active:g,activeNodeRect:m,ariaDescribedById:p,draggableNodes:y,over:w}=E.useContext(nu),{role:_=Sb,roleDescription:C="draggable",tabIndex:x=0}=l??{},A=g?.id===e,U=E.useContext(A?mw:AR),[z,$]=$c(),[H,j]=$c(),P=fR(u,e),F=Il(n);Jn(()=>(y.set(e,{id:e,key:c,node:z,activatorNode:H,data:F}),()=>{const fe=y.get(e);fe&&fe.key===c&&y.delete(e)}),[y,e]);const W=E.useMemo(()=>({role:_,tabIndex:x,"aria-disabled":r,"aria-pressed":A&&_===Sb?!0:void 0,"aria-roledescription":C,"aria-describedby":p.draggable}),[r,_,x,A,C,p.draggable]);return{active:g,activatorEvent:h,activeNodeRect:m,attributes:W,isDragging:A,listeners:r?void 0:P,node:z,over:w,setNodeRef:$,setActivatorNodeRef:j,transform:U}}function OR(){return E.useContext(gw)}const LR="Droppable",kR={timeout:25};function NR(i){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:l}=i;const c=Jl(LR),{active:u,dispatch:h,over:g,measureDroppableContainers:m}=E.useContext(nu),p=E.useRef({disabled:n}),y=E.useRef(!1),w=E.useRef(null),_=E.useRef(null),{disabled:C,updateMeasurementsFor:x,timeout:A}={...kR,...l},U=Il(x??r),z=E.useCallback(()=>{if(!y.current){y.current=!0;return}_.current!=null&&clearTimeout(_.current),_.current=setTimeout(()=>{m(Array.isArray(U.current)?U.current:[U.current]),_.current=null},A)},[A]),$=tu({callback:z,disabled:C||!u}),H=E.useCallback((W,fe)=>{$&&(fe&&($.unobserve(fe),y.current=!1),W&&$.observe(W))},[$]),[j,P]=$c(H),F=Il(e);return E.useEffect(()=>{!$||!j.current||($.disconnect(),y.current=!1,$.observe(j.current))},[j,$]),E.useEffect(()=>(h({type:ht.RegisterDroppable,element:{id:r,key:c,disabled:n,node:j,rect:w,data:F}}),()=>h({type:ht.UnregisterDroppable,key:c,id:r})),[r]),E.useEffect(()=>{n!==p.current.disabled&&(h({type:ht.SetDroppableDisabled,id:r,key:c,disabled:n}),p.current.disabled=n)},[r,c,n,h]),{active:u,rect:w,isOver:g?.id===r,node:j,over:g,setNodeRef:P}}function ag(i,e,n){const r=i.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function MR(i,e){return i.reduce((n,r,l)=>{const c=e.get(r);return c&&(n[l]=c),n},Array(i.length))}function yc(i){return i!==null&&i>=0}function UR(i,e){if(i===e)return!0;if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++)if(i[n]!==e[n])return!1;return!0}function $R(i){return typeof i=="boolean"?{draggable:i,droppable:i}:i}const pw=i=>{let{rects:e,activeIndex:n,overIndex:r,index:l}=i;const c=ag(e,r,n),u=e[l],h=c[l];return!h||!u?null:{x:h.left-u.left,y:h.top-u.top,scaleX:h.width/u.width,scaleY:h.height/u.height}},vc={scaleX:1,scaleY:1},IR=i=>{var e;let{activeIndex:n,activeNodeRect:r,index:l,rects:c,overIndex:u}=i;const h=(e=c[n])!=null?e:r;if(!h)return null;if(l===n){const m=c[u];return m?{x:0,y:n<u?m.top+m.height-(h.top+h.height):m.top-h.top,...vc}:null}const g=BR(c,l,n);return l>n&&l<=u?{x:0,y:-h.height-g,...vc}:l<n&&l>=u?{x:0,y:h.height+g,...vc}:{x:0,y:0,...vc}};function BR(i,e,n){const r=i[e],l=i[e-1],c=i[e+1];return r?n<e?l?r.top-(l.top+l.height):c?c.top-(r.top+r.height):0:c?c.top-(r.top+r.height):l?r.top-(l.top+l.height):0:0}const yw="Sortable",vw=$t.createContext({activeIndex:-1,containerId:yw,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:pw,disabled:{draggable:!1,droppable:!1}});function zR(i){let{children:e,id:n,items:r,strategy:l=pw,disabled:c=!1}=i;const{active:u,dragOverlay:h,droppableRects:g,over:m,measureDroppableContainers:p}=OR(),y=Jl(yw,n),w=h.rect!==null,_=E.useMemo(()=>r.map(P=>typeof P=="object"&&"id"in P?P.id:P),[r]),C=u!=null,x=u?_.indexOf(u.id):-1,A=m?_.indexOf(m.id):-1,U=E.useRef(_),z=!UR(_,U.current),$=A!==-1&&x===-1||z,H=$R(c);Jn(()=>{z&&C&&p(_)},[z,_,C,p]),E.useEffect(()=>{U.current=_},[_]);const j=E.useMemo(()=>({activeIndex:x,containerId:y,disabled:H,disableTransforms:$,items:_,overIndex:A,useDragOverlay:w,sortedRects:MR(_,g),strategy:l}),[x,y,H.draggable,H.droppable,$,_,A,g,w,l]);return $t.createElement(vw.Provider,{value:j},e)}const qR=i=>{let{id:e,items:n,activeIndex:r,overIndex:l}=i;return ag(n,r,l).indexOf(e)},HR=i=>{let{containerId:e,isSorting:n,wasDragging:r,index:l,items:c,newIndex:u,previousItems:h,previousContainerId:g,transition:m}=i;return!m||!r||h!==c&&l===u?!1:n?!0:u!==l&&e===g},YR={duration:200,easing:"ease"},bw="transform",GR=zl.Transition.toString({property:bw,duration:0,easing:"linear"}),VR={roleDescription:"sortable"};function QR(i){let{disabled:e,index:n,node:r,rect:l}=i;const[c,u]=E.useState(null),h=E.useRef(n);return Jn(()=>{if(!e&&n!==h.current&&r.current){const g=l.current;if(g){const m=ba(r.current,{ignoreTransform:!0}),p={x:g.left-m.left,y:g.top-m.top,scaleX:g.width/m.width,scaleY:g.height/m.height};(p.x||p.y)&&u(p)}}n!==h.current&&(h.current=n)},[e,n,r,l]),E.useEffect(()=>{c&&u(null)},[c]),c}function PR(i){let{animateLayoutChanges:e=HR,attributes:n,disabled:r,data:l,getNewIndex:c=qR,id:u,strategy:h,resizeObserverConfig:g,transition:m=YR}=i;const{items:p,containerId:y,activeIndex:w,disabled:_,disableTransforms:C,sortedRects:x,overIndex:A,useDragOverlay:U,strategy:z}=E.useContext(vw),$=XR(r,_),H=p.indexOf(u),j=E.useMemo(()=>({sortable:{containerId:y,index:H,items:p},...l}),[y,l,H,p]),P=E.useMemo(()=>p.slice(p.indexOf(u)),[p,u]),{rect:F,node:W,isOver:fe,setNodeRef:ee}=NR({id:u,data:j,disabled:$.droppable,resizeObserverConfig:{updateMeasurementsFor:P,...g}}),{active:ae,activatorEvent:me,activeNodeRect:Le,attributes:Xe,setNodeRef:Ie,listeners:I,isDragging:K,over:se,setActivatorNodeRef:X,transform:T}=jR({id:u,data:j,attributes:{...VR,...n},disabled:$.draggable}),B=dA(ee,Ie),V=!!ae,Y=V&&!C&&yc(w)&&yc(A),J=!U&&K,ue=J&&Y?T:null,nt=Y?ue??(h??z)({rects:x,activeNodeRect:Le,activeIndex:w,overIndex:A,index:H}):null,Se=yc(w)&&yc(A)?c({id:u,items:p,activeIndex:w,overIndex:A}):H,st=ae?.id,Ce=E.useRef({activeId:st,items:p,newIndex:Se,containerId:y}),un=p!==Ce.current.items,kt=e({active:ae,containerId:y,isDragging:K,isSorting:V,id:u,index:H,items:p,newIndex:Ce.current.newIndex,previousItems:Ce.current.items,previousContainerId:Ce.current.containerId,transition:m,wasDragging:Ce.current.activeId!=null}),dn=QR({disabled:!kt,index:H,node:W,rect:F});return E.useEffect(()=>{V&&Ce.current.newIndex!==Se&&(Ce.current.newIndex=Se),y!==Ce.current.containerId&&(Ce.current.containerId=y),p!==Ce.current.items&&(Ce.current.items=p)},[V,Se,y,p]),E.useEffect(()=>{if(st===Ce.current.activeId)return;if(st!=null&&Ce.current.activeId==null){Ce.current.activeId=st;return}const Un=setTimeout(()=>{Ce.current.activeId=st},50);return()=>clearTimeout(Un)},[st]),{active:ae,activeIndex:w,attributes:Xe,data:j,rect:F,index:H,newIndex:Se,items:p,isOver:fe,isSorting:V,isDragging:K,listeners:I,node:W,overIndex:A,over:se,setNodeRef:B,setActivatorNodeRef:X,setDroppableNodeRef:ee,setDraggableNodeRef:Ie,transform:dn??nt,transition:Bt()};function Bt(){if(dn||un&&Ce.current.newIndex===H)return GR;if(!(J&&!tg(me)||!m)&&(V||kt))return zl.Transition.toString({...m,property:bw})}}function XR(i,e){var n,r;return typeof i=="boolean"?{draggable:i,droppable:!1}:{draggable:(n=i?.draggable)!=null?n:e.draggable,droppable:(r=i?.droppable)!=null?r:e.droppable}}function zc(i){if(!i)return!1;const e=i.data.current;return!!(e&&"sortable"in e&&typeof e.sortable=="object"&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const KR=[Ee.Down,Ee.Right,Ee.Up,Ee.Left],FR=(i,e)=>{let{context:{active:n,collisionRect:r,droppableRects:l,droppableContainers:c,over:u,scrollableAncestors:h}}=e;if(KR.includes(i.code)){if(i.preventDefault(),!n||!r)return;const g=[];c.getEnabled().forEach(y=>{if(!y||y!=null&&y.disabled)return;const w=l.get(y.id);if(w)switch(i.code){case Ee.Down:r.top<w.top&&g.push(y);break;case Ee.Up:r.top>w.top&&g.push(y);break;case Ee.Left:r.left>w.left&&g.push(y);break;case Ee.Right:r.left<w.left&&g.push(y);break}});const m=AA({collisionRect:r,droppableRects:l,droppableContainers:g});let p=sw(m,"id");if(p===u?.id&&m.length>1&&(p=m[1].id),p!=null){const y=c.get(n.id),w=c.get(p),_=w?l.get(w.id):null,C=w?.node.current;if(C&&_&&y&&w){const A=eu(C).some((P,F)=>h[F]!==P),U=ww(y,w),z=JR(y,w),$=A||!U?{x:0,y:0}:{x:z?r.width-_.width:0,y:z?r.height-_.height:0},H={x:_.left,y:_.top};return $.x&&$.y?H:Bl(H,$)}}}};function ww(i,e){return!zc(i)||!zc(e)?!1:i.data.current.sortable.containerId===e.data.current.sortable.containerId}function JR(i,e){return!zc(i)||!zc(e)||!ww(i,e)?!1:i.data.current.sortable.index<e.data.current.sortable.index}function ZR({item:i,index:e,renderItem:n,className:r=""}){const{attributes:l,listeners:c,setNodeRef:u,transform:h,transition:g,isDragging:m}=PR({id:e.toString()}),p={transform:zl.Transform.toString(h),transition:g};return b.jsx("div",{ref:u,style:p,className:`${r} ${m?"z-50 shadow-lg bg-white":""}`,children:n(i,e,m,{attributes:l,listeners:c})})}function WR({items:i,onReorder:e,renderItem:n,keyExtractor:r,className:l="",itemClassName:c=""}){const u=CA(cb(rg),cb(sg,{coordinateGetter:FR}));function h(g){const{active:m,over:p}=g;if(m.id!==p?.id&&p){const y=parseInt(m.id),w=parseInt(p.id),_=ag(i,y,w);e(_)}}return b.jsx(DR,{sensors:u,collisionDetection:DA,onDragEnd:h,children:b.jsx(zR,{items:i.map((g,m)=>m.toString()),strategy:IR,children:b.jsx("div",{className:l,children:i.map((g,m)=>b.jsx(ZR,{item:g,index:m,renderItem:n,className:c},r(g)))})})})}const ej=({isOpen:i,onClose:e,onSave:n,currentTitle:r,currentDescription:l="",isSaving:c=!1})=>{const[u,h]=E.useState(r),[g,m]=E.useState(l);E.useEffect(()=>{i&&(h(r),m(l||""))},[i,r,l]);const p=async w=>{w.preventDefault(),u.trim()&&(await n(u.trim(),g.trim()),e())},y=()=>{h(r),m(l||""),e()};return b.jsx(Zc,{isOpen:i,onClose:y,title:"Edit List",children:b.jsxs("form",{onSubmit:p,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),b.jsx("input",{type:"text",id:"title",value:u,onChange:w=>h(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter list title",required:!0,disabled:c})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),b.jsx("textarea",{id:"description",value:g,onChange:w=>m(w.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter list description (optional)",disabled:c})]}),b.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[b.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",disabled:c,children:"Cancel"}),b.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",disabled:c||!u.trim(),children:c?"Saving...":"Save Changes"})]})]})})},tj=({isOpen:i,onClose:e,listId:n,listTitle:r})=>{const[l,c]=E.useState(""),[u,h]=E.useState(!1),[g,m]=E.useState([]),[p,y]=E.useState(!1),[w,_]=E.useState(null),[C,x]=E.useState(null),A=Ze.getInstance(),U=A.getRemoteStorageService(),z=A.getLogService(),$=A.getAuthService();E.useEffect(()=>{i&&H()},[i,n]);const H=async()=>{try{y(!0),_(null);const ee=await $.getCurrentUser();if(!ee){_("You must be logged in to view invites");return}const ae=await U.getListInvites(n,ee.id);m(ae)}catch(ee){z.errorSync("Failed to load invites:",ee),_("Failed to load existing invites")}finally{y(!1)}},j=async()=>{try{h(!0),_(null),x(null);const ee=await $.getCurrentUser();if(!ee){_("You must be logged in to generate invites");return}const ae={listId:n,invitationFor:l.trim()},me=await U.createInvite(ae,ee.id);m(Le=>[me.invite,...Le]),x(`Invite for ${l.trim()} generated! Share this link: ${me.inviteUrl}`),c(""),z.infoSync("Invite generated successfully:",me)}catch(ee){z.errorSync("Failed to generate invite:",ee),_(ee instanceof Error?ee.message:"Failed to generate invite")}finally{h(!1)}},P=async ee=>{try{const ae=await $.getCurrentUser();if(!ae){_("You must be logged in to revoke invites");return}await U.revokeInvite(ee,ae.id),m(me=>me.filter(Le=>Le.id!==ee)),x("Invite revoked successfully"),z.infoSync("Invite revoked successfully:",ee)}catch(ae){z.errorSync("Failed to revoke invite:",ae),_("Failed to revoke invite")}},F=async ee=>{try{await navigator.clipboard.writeText(ee),x("Link copied to clipboard!"),setTimeout(()=>x(null),2e3)}catch(ae){z.errorSync("Failed to copy to clipboard:",ae),_("Failed to copy link")}},W=ee=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(ee),fe=ee=>{switch(ee){case"pending":return"text-yellow-600 bg-yellow-100";case"accepted":return"text-green-600 bg-green-100";case"expired":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}};return i?b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:b.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[b.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:b.jsxs("div",{className:"flex items-center justify-between",children:[b.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:['Manage Invites for "',r,'"']}),b.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600 transition-colors",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),b.jsxs("div",{className:"px-6 py-4 overflow-y-auto max-h-[calc(90vh-140px)]",children:[b.jsxs("div",{className:"mb-6",children:[b.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Generate New Invite"}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("input",{type:"text",placeholder:"Who is this invite for? (e.g., John, Sarah, Team Lead)",value:l,onChange:ee=>c(ee.target.value),className:"flex-1 input",disabled:u}),b.jsx("button",{onClick:j,disabled:!l.trim()||u,className:"btn btn-primary",children:u?"Generating...":"Generate New Invite"})]})]}),w&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-300 text-red-700 rounded-md",children:w}),C&&b.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-300 text-green-700 rounded-md",children:C}),b.jsxs("div",{children:[b.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Invites by Person"}),p?b.jsx("div",{className:"text-center py-4 text-gray-500",children:"Loading invites..."}):g.length===0?b.jsx("div",{className:"text-center py-4 text-gray-500",children:"No invites yet. Generate your first invite above!"}):b.jsx("div",{className:"space-y-3",children:g.map(ee=>b.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg bg-gray-50",children:[b.jsxs("div",{className:"flex items-center justify-between mb-2",children:[b.jsx("span",{className:"font-medium text-gray-900",children:ee.invitationFor}),b.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${fe(ee.status)}`,children:ee.status})]}),b.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:["Created: ",W(ee.createdAt),ee.expiresAt&&b.jsxs("span",{className:"ml-4",children:["Expires: ",W(ee.expiresAt)]})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:()=>F(`${window.location.origin}/manage/#/invite/${ee.token}`),className:"btn btn-secondary text-sm",children:"Copy Link"}),ee.status==="pending"&&b.jsx("button",{onClick:()=>P(ee.id),className:"btn btn-danger text-sm",children:"Revoke"})]})]},ee.id))})]})]}),b.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:b.jsx("div",{className:"flex justify-end",children:b.jsx("button",{onClick:e,className:"btn btn-secondary",children:"Close"})})})]})}):null},pl=({onClick:i,icon:e,children:n,variant:r="default",disabled:l=!1})=>{const h=`w-full text-left px-4 py-2.5 text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed ${{default:"text-gray-700 hover:bg-gray-100",danger:"text-red-600 hover:bg-red-50"}[r]}`;return b.jsxs("button",{onClick:i,className:h,disabled:l,type:"button",children:[e&&b.jsx("span",{className:"mr-2 inline-block w-4",children:e}),n]})},nj=()=>{const{listId:i}=jb(),e=Cn(),[n,r]=E.useState(""),[l,c]=E.useState(null),[u,h]=E.useState(""),[g,m]=E.useState(!1),[p,y]=E.useState(null),[w,_]=E.useState(!1),[C,x]=E.useState(!1),[A,U]=E.useState(!1),[z,$]=E.useState(!1),[H,j]=E.useState(!1),[P,F]=E.useState(!1),[W,fe]=E.useState(!1),[ee,ae]=E.useState(!1),[me,Le]=E.useState(!1),[Xe,Ie]=E.useState(!1),K=Ze.getInstance().getLogService(),se=E.useRef(null),X=E.useRef(null),T=E.useRef(new Map),{user:B}=Mn();E.useEffect(()=>{const Z=it=>{se.current&&!se.current.contains(it.target)&&_(!1)};return w&&document.addEventListener("mousedown",Z),()=>{document.removeEventListener("mousedown",Z)}},[w]);const[V,Y]=E.useState(null),{document:J,isLoading:ue,error:te,wasDeletedRemotely:nt,isAddingItem:Se,isDeletingItem:st,addItem:Ce,updateItem:un,deleteItem:kt,toggleItem:dn,moveItem:Bt,editListMetadata:Un,deleteList:$n,leaveList:zt,clearCompletedItems:Pi}=uA(i||""),Ts=()=>{Y("newItem")},Kt=Z=>{Y(Z)},Tn=Z=>{c(Z.id),h(Z.content)},Zn=async()=>{if(l&&u.trim()!=="")try{await un(l,{content:u.trim()}),c(null),h("")}catch(Z){K.errorSync("Failed to update item:",Z)}},Ds=()=>{c(null),h("")},Xi=Z=>{Z.key==="Enter"?Zn():Z.key==="Escape"&&Ds()},wa=Z=>{y(Z),m(!0)},Yt=J?.title||"Untitled List",Be=E.useMemo(()=>J?.items||[],[J?.items]);if(E.useEffect(()=>{if(V==="newItem"&&X.current&&document.activeElement!==X.current&&setTimeout(()=>{X.current?.focus()},0),V&&V!=="newItem"&&T.current.has(V)){const Z=T.current.get(V);Z&&document.activeElement!==Z&&setTimeout(()=>{Z.focus()},0)}},[Be,V]),!i)return b.jsx("div",{children:"List ID is required"});if(ue)return b.jsx("div",{className:"flex items-center justify-center min-h-screen",children:b.jsx(mf,{completedItems:0,totalItems:0})});if(te)return b.jsx("div",{className:"flex items-center justify-center min-h-screen",children:b.jsxs("div",{className:"text-center",children:[b.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"Error Loading List"}),b.jsx("p",{className:"text-gray-600",children:te})]})});if(nt)return b.jsx("div",{className:"flex items-center justify-center min-h-screen",children:b.jsxs("div",{className:"text-center",children:[b.jsx("h2",{className:"text-xl font-semibold text-red-600 mb-2",children:"List Deleted"}),b.jsx("p",{className:"text-gray-600 mb-4",children:"This list was deleted by another user."}),b.jsx("button",{onClick:()=>e("/lists"),className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Back to Lists"})]})});const lt=B?.id===J?.ownerId,Ke=async()=>{if(n.trim())try{await Ce(n.trim()),r("")}catch(Z){K.errorSync("Failed to add item:",Z)}},Ki=async()=>{if(p)try{await kt(p.id),m(!1),y(null)}catch(Z){K.errorSync("Error deleting item:",Z)}},hn=()=>{m(!1),y(null)},Fi=async Z=>{const it=J?.items||[];for(let yt=0;yt<Z.length;yt++)if(it[yt]?.id!==Z[yt].id){const je=Z[yt];try{await Bt(je.id,yt)}catch(Ae){K.errorSync("Error moving item:",Ae)}break}},As=()=>{e("/lists")},Rs=()=>{x(!0),_(!1)},Ft=async(Z,it)=>{try{U(!0),await Un({title:Z,description:it}),K.infoSync("List updated successfully")}catch(yt){K.errorSync("Failed to update list:",yt)}finally{U(!1)}},Wn=()=>{_(!w)},es=()=>{$(!0),_(!1)},Ji=async()=>{try{j(!0),await $n(),e("/lists")}catch(Z){K.errorSync("Failed to delete list:",Z)}finally{j(!1),$(!1)}},Zi=()=>{$(!1)},Wi=()=>{F(!0),_(!1)},fi=async()=>{try{fe(!0),await Pi(),K.infoSync("Completed items cleared successfully")}catch(Z){K.errorSync("Failed to clear completed items:",Z)}finally{fe(!1),F(!1)}},Ve=()=>{F(!1)},Tt=()=>{ae(!0),_(!1)},mt=()=>{Le(!0),_(!1)},Jt=async()=>{try{Ie(!0),await zt(),e("/lists")}catch(Z){K.errorSync("Failed to leave list:",Z)}finally{Ie(!1),Le(!1)}},pt=()=>{Le(!1)};return b.jsxs("div",{className:"max-w-4xl mx-auto",children:[b.jsxs("div",{className:"mb-6",children:[b.jsxs("div",{className:"flex items-center mb-2",children:[b.jsx("button",{onClick:As,className:"btn btn-secondary mr-4","aria-label":"Back to lists",children:"←"}),b.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:Yt}),b.jsxs("div",{className:"relative ml-auto",ref:se,children:[b.jsx("button",{onClick:Wn,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"List options",children:b.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),w&&b.jsxs("div",{className:"absolute right-0 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-10",children:[b.jsx(pl,{onClick:Rs,icon:"✏️",children:"Edit List"}),b.jsx(pl,{onClick:Wi,icon:"🧹",children:"Clear Completed"}),lt&&b.jsx(pl,{onClick:Tt,icon:"👥",children:"Manage Invites"}),!lt&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"border-t border-gray-200"}),b.jsx(pl,{onClick:mt,icon:"🚪",variant:"danger",children:"Leave List"})]}),lt&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"border-t border-gray-200"}),b.jsx(pl,{onClick:es,icon:"🗑️",variant:"danger",children:"Delete List"})]})]})]})]}),J?.description&&b.jsx("p",{className:"text-gray-600 ml-16",children:J.description})]}),Be.length>0&&b.jsx("div",{className:"mt-4",children:b.jsx(mf,{completedItems:Be.filter(Z=>Z.isCompleted).length,totalItems:Be.length,showLabel:!0,showProgressBar:!0,className:"text-center"})}),b.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 my-6",children:b.jsxs("div",{className:"flex gap-2",children:[b.jsx("input",{ref:X,type:"text",value:n,onChange:Z=>r(Z.target.value),onKeyDown:Z=>Z.key==="Enter"&&Ke(),onFocus:Ts,placeholder:"Add a new item...",className:"input flex-1"}),b.jsx("button",{onClick:Ke,disabled:!n.trim()||Se,className:"btn btn-primary",children:Se?"Adding...":"Add"})]})}),b.jsx("div",{className:"bg-white rounded-lg border border-gray-200",children:Be.length===0?b.jsx("div",{className:"p-8 text-center text-gray-500",children:"No items yet. Add your first item above!"}):b.jsx(WR,{items:Be,onReorder:Fi,keyExtractor:Z=>Z.id,className:"divide-y divide-gray-200",itemClassName:"",renderItem:(Z,it,yt,je)=>b.jsxs("div",{className:"flex items-center gap-3 p-4",children:[b.jsx("div",{...je.attributes,...je.listeners,className:"cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600 p-1",title:"Drag to reorder",children:"⋮⋮"}),b.jsx("input",{type:"checkbox",checked:Z.isCompleted,onChange:()=>dn(Z.id),className:"w-4 h-4 text-primary-600 rounded border-gray-300 focus:ring-primary-500"}),b.jsx("div",{className:"flex-1",children:l===Z.id?b.jsxs("div",{className:"flex gap-2",children:[b.jsx("input",{ref:Ae=>{Ae?T.current.set(Z.id,Ae):T.current.delete(Z.id)},type:"text",value:u,onChange:Ae=>h(Ae.target.value),onKeyDown:Xi,onFocus:()=>Kt(Z.id),className:"flex-1 bg-white border border-gray-300 rounded px-2 py-1 focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0}),b.jsx("button",{onClick:Zn,className:"text-green-600 hover:text-green-800 px-2 py-1 text-sm",title:"Save",children:"✓"}),b.jsx("button",{onClick:Ds,className:"text-gray-600 hover:text-gray-800 px-2 py-1 text-sm",title:"Cancel",children:"✕"})]}):b.jsx("div",{className:`cursor-pointer ${Z.isCompleted?"line-through text-gray-500":"text-gray-900"}`,onClick:()=>Tn(Z),children:Z.content})}),l!==Z.id&&b.jsx("button",{onClick:()=>wa(Z),className:"text-red-500 hover:text-red-700 p-1",title:"Delete item",children:"🗑️"})]})})}),!1,b.jsx(bl,{isOpen:g,onClose:hn,onConfirm:Ki,title:"Delete Item",message:`Are you sure you want to delete "${p?.content}"? This action cannot be undone.`,isDeleting:st}),b.jsx(bl,{isOpen:z,onClose:Zi,onConfirm:Ji,title:"Delete List",message:`Are you sure you want to delete "${Yt}"? This will permanently remove the list and all its items. This action cannot be undone.`,isDeleting:H}),b.jsx(bl,{isOpen:P,onClose:Ve,onConfirm:fi,title:"Clear Completed Items",message:`Are you sure you want to clear all completed items from "${Yt}"? This action cannot be undone.`,isDeleting:W}),b.jsx(bl,{isOpen:me,onClose:pt,onConfirm:Jt,title:"Leave List",message:`Are you sure you want to leave "${Yt}"? You will no longer have access to this list and all local data will be removed.`,isDeleting:Xe}),b.jsx(ej,{isOpen:C,onClose:()=>x(!1),onSave:Ft,currentTitle:Yt,currentDescription:J?.description||"",isSaving:A}),b.jsx(tj,{isOpen:ee,onClose:()=>ae(!1),listId:i||"",listTitle:Yt})]})};function sj({onSuccess:i}){const{signIn:e,loading:n,error:r,clearError:l}=Mn(),c=Cn(),[u,h]=E.useState({email:"",password:""}),g=async y=>{y.preventDefault(),l();try{const w={email:u.email,password:u.password};await e(w),i?.()}catch{}},m=()=>{c("/password-reset")},p=y=>{const{name:w,value:_}=y.target;h(C=>({...C,[w]:_}))};return b.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md",children:[b.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Sign In"}),r&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:r}),b.jsxs("form",{onSubmit:g,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),b.jsx("input",{type:"email",id:"email",name:"email",value:u.email,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email",autoFocus:!0})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),b.jsx("input",{type:"password",id:"password",name:"password",value:u.password,onChange:p,required:!0,minLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your password"})]}),b.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Loading...":"Sign In"}),b.jsx("div",{className:"text-center",children:b.jsx("button",{type:"button",onClick:m,className:"text-blue-600 hover:text-blue-500 font-medium",children:"Forgot your password?"})})]})]})}function ij(){const i=Cn();E.useEffect(()=>{const r=setTimeout(async()=>{try{console.log("Attempting to clean up leftover databases on auth page load..."),await Ze.getInstance().cleanupLeftoverDatabases()}catch(l){console.log("Error during database cleanup on auth page load:",l)}},500);return()=>clearTimeout(r)},[]);const e=()=>{i("/lists")};return b.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[b.jsx("h1",{className:"text-center text-3xl font-extrabold text-gray-900 mb-2",children:"Shared Lists App"}),b.jsx("p",{className:"text-center text-gray-600",children:"Collaborative lists for families and teams"})]}),b.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:[b.jsx(sj,{onSuccess:e}),b.jsx("div",{className:"mt-6 text-center",children:b.jsxs("p",{className:"text-sm text-gray-600",children:["This is an invite-only system. Need access?"," ",b.jsx("a",{href:"mailto:sandymc@gmail.com",className:"font-medium text-blue-600 hover:text-blue-500",children:"Request an invite"})]})})]})]})}function rj({onSuccess:i,onCancel:e}){const{updatePassword:n,loading:r,error:l,clearError:c}=Mn(),[u,h]=E.useState({newPassword:"",confirmPassword:""}),[g,m]=E.useState(null),p=async w=>{if(w.preventDefault(),c(),m(null),u.newPassword!==u.confirmPassword){m("Passwords do not match");return}if(u.newPassword.length<6){m("Password must be at least 6 characters long");return}try{await n(u.newPassword),i?.()}catch{}},y=w=>{const{name:_,value:C}=w.target;h(x=>({...x,[_]:C}))};return b.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md",children:[b.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Set New Password"}),b.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Please enter your new password below."}),(l||g)&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:l||g}),b.jsxs("form",{onSubmit:p,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),b.jsx("input",{type:"password",id:"newPassword",name:"newPassword",value:u.newPassword,onChange:y,required:!0,minLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your new password",autoFocus:!0})]}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),b.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:u.confirmPassword,onChange:y,required:!0,minLength:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Confirm your new password"})]}),b.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Updating...":"Update Password"}),e&&b.jsx("div",{className:"text-center",children:b.jsx("button",{type:"button",onClick:e,className:"text-blue-600 hover:text-blue-500 font-medium",children:"Cancel"})})]})]})}function _b(){const i=Cn(),{resetPassword:e,clearRecoverySession:n,loading:r,error:l,clearError:c}=Mn(),[u,h]=E.useState(!1),[g,m]=E.useState(!0),[p,y]=E.useState(!1),[w,_]=E.useState("");E.useEffect(()=>{const U=Jf();console.log("Full URL hash:",window.location.hash),console.log("Parsed hash params:",U),console.log("Has recovery params:",Uc()),Uc()?(console.log("Recovery parameters found:",U),h(!0)):(console.log("No valid recovery parameters found"),h(!1)),m(!1)},[]);const C=()=>{n(),i("/lists")},x=()=>{n(),i("/auth",{replace:!0})},A=async U=>{U.preventDefault(),c();try{await e(w),y(!0)}catch{}};return g?b.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),b.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):u?b.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[b.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[b.jsx("h1",{className:"text-center text-3xl font-extrabold text-gray-900 mb-2",children:"SharedListsApp"}),b.jsx("p",{className:"text-center text-gray-600",children:"Reset your password"})]}),b.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:b.jsx(rj,{onSuccess:C,onCancel:x})})]}):b.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:b.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md",children:[b.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"Request Password Reset"}),l&&b.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:l}),p?b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded",children:"Password reset email sent! Check your inbox and follow the instructions to reset your password."}),b.jsx("button",{onClick:()=>i("/auth"),className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Go to Sign In"})]}):b.jsxs("form",{onSubmit:A,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),b.jsx("input",{type:"email",id:"email",value:w,onChange:U=>_(U.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email",autoFocus:!0})]}),b.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Sending...":"Send Reset Email"}),b.jsx("div",{className:"text-center",children:b.jsx("button",{type:"button",onClick:()=>i("/auth"),className:"text-blue-600 hover:text-blue-500 font-medium",children:"Back to Sign In"})})]})]})})}function aj(){const i=Cn(),{user:e}=Mn();return E.useEffect(()=>{Uc()?i("/reset-password",{replace:!0}):e?i("/lists",{replace:!0}):i("/auth",{replace:!0})},[i,e]),b.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),b.jsx("p",{className:"mt-4 text-gray-600",children:"Redirecting..."})]})})}function lj(){const[i,e]=E.useState(!1),n=Cn();return E.useEffect(()=>{const r=setTimeout(()=>{e(!0)},1e3);return()=>clearTimeout(r)},[]),b.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[b.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"text-green-500 text-6xl mb-4",children:"✅"}),b.jsx("h1",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:"Signed Out Successfully"}),b.jsx("p",{className:"text-gray-600 mb-8",children:"You have been signed out of your account. All your data has been cleared from this device."})]})}),b.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:b.jsx("div",{className:"bg-white py-8 px-6 shadow rounded-lg",children:b.jsx("div",{className:"text-center space-y-4",children:i?b.jsxs(b.Fragment,{children:[b.jsx("p",{className:"text-sm text-gray-600",children:"Ready to get back to your lists?"}),b.jsx("button",{onClick:()=>{n("/auth")},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:"Sign In Again"})]}):b.jsx("div",{className:"text-sm text-gray-500",children:b.jsx("div",{className:"animate-pulse",children:"Clearing data..."})})})})})]})}const qc=({message:i="Loading...",size:e="md"})=>{const n={sm:"h-8 w-8",md:"h-12 w-12",lg:"h-16 w-16"};return b.jsx("div",{className:"flex items-center justify-center min-h-screen",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:`animate-spin rounded-full border-b-2 border-blue-600 mx-auto ${n[e]}`}),b.jsx("p",{className:"mt-4 text-gray-600",children:i})]})})},oj=()=>{const{token:i}=jb(),e=Cn(),{user:n,loading:r}=Mn(),[l,c]=E.useState(null),[u,h]=E.useState(!0),[g,m]=E.useState(!1),[p,y]=E.useState(null),[w,_]=E.useState(null),C=Ze.getInstance(),x=C.getLogService(),A=C.getRemoteStorageService(),U=C.getListController();E.useEffect(()=>{if(!i){y("Invalid invite link"),h(!1);return}z()},[i]);const z=async()=>{try{h(!0),y(null);const j=await A.getInviteByToken(i);c(j),h(!1)}catch(j){x.errorSync("Failed to load invite:",j),y(j instanceof Error?j.message:"Failed to load invite details"),h(!1)}},$=async()=>{if(!(!n||!l))try{m(!0),y(null),await A.acceptInvite(l.token),_("Invite accepted successfully! Setting up list...");try{_("Setting up list data..."),await U.bootstrapFromRemote(),_("List ready! Redirecting..."),setTimeout(()=>{e(`/list/${l.yjsDocumentId}`)},1500)}catch(j){x.errorSync("Failed to bootstrap list data:",j),_("Invite accepted! Redirecting..."),setTimeout(()=>{e(`/list/${l.yjsDocumentId}`)},1500)}}catch(j){x.errorSync("Failed to accept invite:",j),y(j instanceof Error?j.message:"Failed to accept invite"),m(!1)}},H=()=>{e("/auth")};return r||u?b.jsx("div",{className:"min-h-screen flex items-center justify-center",children:b.jsx(qc,{message:"Loading invite..."})}):n?p?b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:b.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-8 text-center",children:[b.jsxs("div",{className:"mb-6",children:[b.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"Invalid Invite"}),b.jsx("p",{className:"text-gray-600",children:p})]}),b.jsx("button",{onClick:()=>e("/lists"),className:"bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 transition-colors",children:"Go to Lists"})]})}):l?b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:b.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-8",children:[b.jsxs("div",{className:"mb-6 text-center",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accept Invite"}),b.jsx("p",{className:"text-gray-600",children:"You've been invited to join a list"})]}),b.jsx("div",{className:"mb-6 space-y-4",children:b.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[b.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Invite Details"}),b.jsxs("div",{className:"space-y-2 text-sm",children:[b.jsxs("div",{children:[b.jsx("span",{className:"font-medium text-gray-700",children:"For:"})," ",l.invitationFor]}),b.jsxs("div",{children:[b.jsx("span",{className:"font-medium text-gray-700",children:"Status:"}),b.jsx("span",{className:`ml-2 px-2 py-1 rounded-full text-xs ${l.status==="pending"?"bg-yellow-100 text-yellow-800":l.status==="accepted"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:l.status})]}),b.jsxs("div",{children:[b.jsx("span",{className:"font-medium text-gray-700",children:"Expires:"})," ",l.expiresAt.toLocaleDateString()]})]})]})}),w?b.jsx("div",{className:"mb-4 p-4 bg-green-100 text-green-800 rounded-md text-center",children:w}):b.jsxs("div",{className:"space-y-4",children:[b.jsx("button",{onClick:$,disabled:g||l.status!=="pending",className:`w-full py-2 px-4 rounded-md transition-colors ${l.status==="pending"&&!g?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:g?"Accepting...":"Accept Invite"}),l.status!=="pending"&&b.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["This invite has already been"," ",l.status==="accepted"?"accepted":"expired","."]})]}),b.jsx("div",{className:"mt-6 text-center",children:b.jsx("button",{onClick:()=>e("/lists"),className:"text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"})})]})}):b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:b.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-8 text-center",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Loading Invite..."}),b.jsx(qc,{message:"Please wait..."})]})}):b.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:b.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-8 text-center",children:[b.jsxs("div",{className:"mb-6",children:[b.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Sign In Required"}),b.jsx("p",{className:"text-gray-600",children:"You need to sign in or create an account to accept this invite."})]}),b.jsxs("div",{className:"space-y-4",children:[b.jsx("button",{onClick:H,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Sign In / Sign Up"}),b.jsx("p",{className:"text-sm text-gray-500",children:"After signing in, you'll be able to accept the invite and join the list."})]})]})})};function Eb({children:i,fallback:e}){const{user:n,loading:r}=Mn();return r?b.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:b.jsxs("div",{className:"text-center",children:[b.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),b.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):n?b.jsx(b.Fragment,{children:i}):e?b.jsx(b.Fragment,{children:e}):b.jsx(LE,{to:"/auth",replace:!0})}function cj({isOpen:i,onClose:e,onSuccess:n}){const{user:r,updateProfile:l}=Mn(),[c,u]=E.useState(r?.displayName||""),[h,g]=E.useState(!1),[m,p]=E.useState(null);E.useEffect(()=>{r&&u(r.displayName||"")},[r?.displayName]);const y=async()=>{if(r)try{g(!0),p(null),await l({displayName:c.trim()||void 0}),n&&n(c.trim()),e()}catch(_){p(_ instanceof Error?_.message:"Failed to update profile")}finally{g(!1)}},w=()=>{u(r?.displayName||""),p(null),e()};return b.jsx(Zc,{isOpen:i,onClose:w,title:"Edit Profile",children:b.jsxs("div",{className:"space-y-4",children:[m&&b.jsx("div",{className:"p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:m}),b.jsxs("div",{children:[b.jsx("label",{htmlFor:"displayName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Display Name"}),b.jsx("input",{id:"displayName",type:"text",value:c,onChange:_=>u(_.target.value),placeholder:"Enter your display name",className:"input",autoFocus:!0}),b.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This name will be displayed in the header and shared lists"})]}),b.jsxs("div",{className:"flex gap-2 justify-end",children:[b.jsx("button",{onClick:w,className:"btn btn-secondary",children:"Cancel"}),b.jsx("button",{onClick:y,disabled:h,className:"btn btn-primary",children:h?"Updating...":"Update Profile"})]})]})})}const Sw=E.forwardRef(({user:i,onClick:e},n)=>{const[r,l]=E.useState(i?.displayName||"");E.useImperativeHandle(n,()=>({setDisplayName:u=>{l(u)}}));const c=u=>u?u.split(" ").map(h=>h.charAt(0)).join("").toUpperCase().slice(0,2):"?";return i?b.jsx("button",{onClick:e,className:"w-8 h-8 bg-gray-600 hover:bg-gray-700 text-white rounded-full flex items-center justify-center text-sm font-medium transition-colors",children:c(r)}):null});Sw.displayName="UserAvatar";function uj(){const{user:i,signOut:e}=Mn(),[n,r]=E.useState(!1),[l,c]=E.useState(!1),[u,h]=E.useState(!1),[g,m]=E.useState(!0),[p,y]=E.useState(0),w=E.useRef(null);E.useEffect(()=>{const j=()=>{const P=window.scrollY;P<p?m(!0):P>p&&P>100&&m(!1),y(P)};return window.addEventListener("scroll",j,{passive:!0}),()=>{window.removeEventListener("scroll",j)}},[p]);const _=()=>{r(!n)},C=()=>{r(!1)},x=()=>{c(!0)},A=()=>{c(!1)},U=()=>{h(!0),C()},z=()=>{h(!1)},$=j=>{w.current&&w.current.setDisplayName(j)},H=async()=>{try{await e(),C()}catch(j){console.error("Sign out failed:",j)}};return b.jsxs(b.Fragment,{children:[b.jsx("header",{className:`fixed top-0 left-0 right-0 bg-white border-b border-gray-200 shadow-sm z-50 transition-transform duration-300 ease-in-out ${g?"translate-y-0":"-translate-y-full"}`,children:b.jsx("div",{className:"container mx-auto px-4",children:b.jsxs("div",{className:"flex items-center justify-between h-16",children:[b.jsxs(av,{to:"/",className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:[b.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:b.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),b.jsx("span",{className:"text-xl font-semibold text-gray-900",children:"Shared Lists"})]}),b.jsxs("div",{className:"flex items-center space-x-3",children:[i&&b.jsx("button",{onClick:x,className:"w-8 h-8 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center justify-center transition-colors",title:"Create New List",children:b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),i?b.jsxs("div",{className:"relative",children:[b.jsx(Sw,{ref:w,user:i,onClick:_}),n&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"fixed inset-0 z-40",onClick:C}),b.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-50",children:b.jsxs("div",{className:"py-1",children:[b.jsx("button",{onClick:U,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"Edit Profile"}),b.jsx("button",{onClick:H,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"Sign Out"})]})})]})]}):b.jsx(av,{to:"/auth",className:"px-4 py-2 text-sm font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-md transition-colors",children:"Sign In"})]})]})})}),b.jsx(J0,{isOpen:l,onClose:A}),b.jsx(cj,{isOpen:u,onClose:z,onSuccess:$})]})}function dj(){const[i,e]=E.useState("syncing"),[n,r]=E.useState("idle"),[l,c]=E.useState(!1),[u,h]=E.useState({browserOnline:navigator.onLine,realtimeConnected:!1,isOnline:!1}),{user:g,loading:m}=Mn(),p=E.useMemo(()=>Ze.getInstance(),[]),y=E.useMemo(()=>p.getLogService(),[p]);return E.useEffect(()=>{if(!g||m||l)return;(async()=>{e("syncing");try{const _=p.getListController();await _.getAllLists(),await p.getRemoteUpdateHandler().start();const x=p.getConnectionMonitor();x.start(),x.onConnectionChange(U=>{h(z=>(U.isOnline!==z.isOnline&&y.infoSync("Connection state changed:",{isOnline:U.isOnline,browserOnline:U.browserOnline,realtimeConnected:U.realtimeConnected}),U))}),await new Promise(U=>setTimeout(U,1e3));try{r("loading"),await _.bootstrapFromRemote(),y.infoSync("Bootstrap completed successfully"),r("complete"),await new Promise(U=>setTimeout(U,500))}catch(U){y.warnSync("Failed to bootstrap from remote server:",U),r("error")}await p.getBackgroundSyncService().start(),e("synced"),c(!0)}catch(_){y.errorSync("Error initializing app:",_),e("offline"),c(!0)}})()},[g,m,p,y,l]),E.useEffect(()=>{g||(r("idle"),c(!1))},[g]),b.jsxs("div",{className:"min-h-screen bg-gray-50",children:[b.jsx(uj,{}),!1,b.jsx("div",{className:"container mx-auto px-4 py-8 pt-24",children:b.jsxs(NE,{children:[b.jsx(bs,{path:"/auth",element:b.jsx(ij,{})}),b.jsx(bs,{path:"/reset-password",element:b.jsx(_b,{})}),b.jsx(bs,{path:"/password-reset",element:b.jsx(_b,{})}),b.jsx(bs,{path:"/signout",element:b.jsx(lj,{})}),b.jsx(bs,{path:"/invite/:token",element:b.jsx(oj,{})}),b.jsx(bs,{path:"/",element:b.jsx(aj,{})}),b.jsx(bs,{path:"/lists",element:m?b.jsx(qc,{message:"Loading..."}):b.jsx(Eb,{children:b.jsx(oA,{})})}),b.jsx(bs,{path:"/list/:listId",element:m?b.jsx(qc,{message:"Loading..."}):b.jsx(Eb,{children:b.jsx(nj,{})})})]})})]})}H_.createRoot(document.getElementById("root")).render(b.jsx($t.StrictMode,{children:b.jsx(qE,{children:b.jsx(dj,{})})}));
